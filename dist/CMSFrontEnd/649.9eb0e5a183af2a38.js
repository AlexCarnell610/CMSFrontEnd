(self.webpackChunkCMSFrontEnd=self.webpackChunkCMSFrontEnd||[]).push([[649],{1649:(Ts,Va,J)=>{"use strict";J.r(Va),J.d(Va,{MainMenuModule:()=>Pu});var F=J(9808),T=J(4182),ne=J(1114),i=J(5e3),j=J(591);const Ha=function Ms(l,p){return l===p||l!=l&&p!=p},Ei=function Ds(l,p){for(var o=l.length;o--;)if(Ha(l[o][0],p))return o;return-1};var Fs=Array.prototype.splice;function Mt(l){var p=-1,o=null==l?0:l.length;for(this.clear();++p<o;){var f=l[p];this.set(f[0],f[1])}}Mt.prototype.clear=function Ss(){this.__data__=[],this.size=0},Mt.prototype.delete=function Is(l){var p=this.__data__,o=Ei(p,l);return!(o<0||(o==p.length-1?p.pop():Fs.call(p,o,1),--this.size,0))},Mt.prototype.get=function Zs(l){var p=this.__data__,o=Ei(p,l);return o<0?void 0:p[o][1]},Mt.prototype.has=function Bs(l){return Ei(this.__data__,l)>-1},Mt.prototype.set=function Es(l,p){var o=this.__data__,f=Ei(o,l);return f<0?(++this.size,o.push([l,p])):o[f][1]=p,this};const fi=Mt,gi="object"==typeof global&&global&&global.Object===Object&&global;var Li="object"==typeof self&&self&&self.Object===Object&&self;const Re=gi||Li||Function("return this")(),Nt=Re.Symbol;var Mr=Object.prototype,an=Mr.hasOwnProperty,Dr=Mr.toString,Ht=Nt?Nt.toStringTag:void 0;var on=Object.prototype.toString;var qi=Nt?Nt.toStringTag:void 0;const tt=function ke(l){return null==l?void 0===l?"[object Undefined]":"[object Null]":qi&&qi in Object(l)?function Nr(l){var p=an.call(l,Ht),o=l[Ht];try{l[Ht]=void 0;var f=!0}catch(w){}var _=Dr.call(l);return f&&(p?l[Ht]=o:delete l[Ht]),_}(l):function sn(l){return on.call(l)}(l)},R=function Pr(l){var p=typeof l;return null!=l&&("object"==p||"function"==p)},Zr=function dn(l){if(!R(l))return!1;var p=tt(l);return"[object Function]"==p||"[object GeneratorFunction]"==p||"[object AsyncFunction]"==p||"[object Proxy]"==p};var l,Fe=Re["__core-js_shared__"],Wi=(l=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";var I=Function.prototype.toString;const ut=function mi(l){if(null!=l){try{return I.call(l)}catch(p){}try{return l+""}catch(p){}}return""};var Br=/^\[object .+?Constructor\]$/,pn=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const bn=function mn(l){return!(!R(l)||function pi(l){return!!Wi&&Wi in l}(l))&&(Zr(l)?pn:Br).test(ut(l))},ct=function yn(l,p){var o=function m(l,p){return null==l?void 0:l[p]}(l,p);return bn(o)?o:void 0},$t=ct(Re,"Map"),ht=ct(Object,"create");var An=Object.prototype.hasOwnProperty;var We=Object.prototype.hasOwnProperty;function ft(l){var p=-1,o=null==l?0:l.length;for(this.clear();++p<o;){var f=l[p];this.set(f[0],f[1])}}ft.prototype.clear=function qe(){this.__data__=ht?ht(null):{},this.size=0},ft.prototype.delete=function Yi(l){var p=this.has(l)&&delete this.__data__[l];return this.size-=p?1:0,p},ft.prototype.get=function Er(l){var p=this.__data__;if(ht){var o=p[l];return"__lodash_hash_undefined__"===o?void 0:o}return An.call(p,l)?p[l]:void 0},ft.prototype.has=function Rr(l){var p=this.__data__;return ht?void 0!==p[l]:We.call(p,l)},ft.prototype.set=function Sn(l,p){var o=this.__data__;return this.size+=this.has(l)?0:1,o[l]=ht&&void 0===p?"__lodash_hash_undefined__":p,this};const qr=ft,Gt=function Dn(l,p){var o=l.__data__;return function jr(l){var p=typeof l;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==l:null===l}(p)?o["string"==typeof p?"string":"hash"]:o.map};function le(l){var p=-1,o=null==l?0:l.length;for(this.clear();++p<o;){var f=l[p];this.set(f[0],f[1])}}le.prototype.clear=function kn(){this.size=0,this.__data__={hash:new qr,map:new($t||fi),string:new qr}},le.prototype.delete=function bi(l){var p=Gt(this,l).delete(l);return this.size-=p?1:0,p},le.prototype.get=function zr(l){return Gt(this,l).get(l)},le.prototype.has=function Fn(l){return Gt(this,l).has(l)},le.prototype.set=function Kt(l,p){var o=Gt(this,l),f=o.size;return o.set(l,p),this.size+=o.size==f?0:1,this};const Zn=le;function je(l){var p=this.__data__=new fi(l);this.size=p.size}je.prototype.clear=function $a(){this.__data__=new fi,this.size=0},je.prototype.delete=function Dt(l){var p=this.__data__,o=p.delete(l);return this.size=p.size,o},je.prototype.get=function Xa(l){return this.__data__.get(l)},je.prototype.has=function tn(l){return this.__data__.has(l)},je.prototype.set=function Bn(l,p){var o=this.__data__;if(o instanceof fi){var f=o.__data__;if(!$t||f.length<199)return f.push([l,p]),this.size=++o.size,this;o=this.__data__=new Zn(f)}return o.set(l,p),this.size=o.size,this};const It=je;var Ln=function(){try{var l=ct(Object,"defineProperty");return l({},"",{}),l}catch(p){}}();const Vi=Ln,Jr=function Hi(l,p,o){"__proto__"==p&&Vi?Vi(l,p,{configurable:!0,enumerable:!0,value:o,writable:!0}):l[p]=o};var _i=Object.prototype.hasOwnProperty;const Ye=function gt(l,p,o){var f=l[p];(!_i.call(l,p)||!Ha(f,o)||void 0===o&&!(p in l))&&Jr(l,p,o)},Xt=function vt(l,p,o,f){var _=!o;o||(o={});for(var w=-1,k=p.length;++w<k;){var P=p[w],M=f?f(o[P],l[P],P,o,l):void 0;void 0===M&&(M=l[P]),_?Jr(o,P,M):Ye(o,P,M)}return o},pt=function jn(l){return null!=l&&"object"==typeof l},Hr=function Yn(l){return pt(l)&&"[object Arguments]"==tt(l)};var Qi=Object.prototype,zn=Qi.hasOwnProperty,Jn=Qi.propertyIsEnumerable,Vn=Hr(function(){return arguments}())?Hr:function(l){return pt(l)&&zn.call(l,"callee")&&!Jn.call(l,"callee")};const mt=Vn,$i=Array.isArray;var Pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,yi=Pt&&"object"==typeof module&&module&&!module.nodeType&&module,xi=yi&&yi.exports===Pt?Re.Buffer:void 0;const Ci=(xi?xi.isBuffer:void 0)||function Qr(){return!1};var Ai=/^(?:0|[1-9]\d*)$/;const $n=function Qn(l,p){var o=typeof l;return!!(p=null==p?9007199254740991:p)&&("number"==o||"symbol"!=o&&Ai.test(l))&&l>-1&&l%1==0&&l<p},Gr=function $r(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=9007199254740991};var X={};X["[object Float32Array]"]=X["[object Float64Array]"]=X["[object Int8Array]"]=X["[object Int16Array]"]=X["[object Int32Array]"]=X["[object Uint8Array]"]=X["[object Uint8ClampedArray]"]=X["[object Uint16Array]"]=X["[object Uint32Array]"]=!0,X["[object Arguments]"]=X["[object Array]"]=X["[object ArrayBuffer]"]=X["[object Boolean]"]=X["[object DataView]"]=X["[object Date]"]=X["[object Error]"]=X["[object Function]"]=X["[object Map]"]=X["[object Number]"]=X["[object Object]"]=X["[object RegExp]"]=X["[object Set]"]=X["[object String]"]=X["[object WeakMap]"]=!1;const rr=function co(l){return function(p){return l(p)}};var ra="object"==typeof exports&&exports&&!exports.nodeType&&exports,ri=ra&&"object"==typeof module&&module&&!module.nodeType&&module,Ti=ri&&ri.exports===ra&&gi.process;const Ue=function(){try{return ri&&ri.require&&ri.require("util").types||Ti&&Ti.binding&&Ti.binding("util")}catch(p){}}();var Q=Ue&&Ue.isTypedArray;const Ge=Q?rr(Q):function ii(l){return pt(l)&&Gr(l.length)&&!!X[tt(l)]};var aa=Object.prototype.hasOwnProperty;const Je=function ze(l,p){var o=$i(l),f=!o&&mt(l),_=!o&&!f&&Ci(l),w=!o&&!f&&!_&&Ge(l),k=o||f||_||w,P=k?function Wn(l,p){for(var o=-1,f=Array(l);++o<l;)f[o]=p(o);return f}(l.length,String):[],M=P.length;for(var q in l)(p||aa.call(l,q))&&(!k||!("length"==q||_&&("offset"==q||"parent"==q)||w&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||$n(q,M)))&&P.push(q);return P};var go=Object.prototype;const nr=function na(l){var p=l&&l.constructor;return l===("function"==typeof p&&p.prototype||go)},oa=function vo(l,p){return function(o){return l(p(o))}},sa=oa(Object.keys,Object);var mo=Object.prototype.hasOwnProperty;const ki=function la(l){return null!=l&&Gr(l.length)&&!Zr(l)},lr=function bo(l){return ki(l)?Je(l):function or(l){if(!nr(l))return sa(l);var p=[];for(var o in Object(l))mo.call(l,o)&&"constructor"!=o&&p.push(o);return p}(l)};var _o=Object.prototype.hasOwnProperty;const Mi=function _t(l){if(!R(l))return function ca(l){var p=[];if(null!=l)for(var o in Object(l))p.push(o);return p}(l);var p=nr(l),o=[];for(var f in l)"constructor"==f&&(p||!_o.call(l,f))||o.push(f);return o},ni=function yo(l){return ki(l)?Je(l,!0):Mi(l)};var Ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,rt=Ot&&"object"==typeof module&&module&&!module.nodeType&&module,ha=rt&&rt.exports===Ot?Re.Buffer:void 0,fa=ha?ha.allocUnsafe:void 0;const va=function cr(){return[]};var wo=Object.prototype.propertyIsEnumerable,pa=Object.getOwnPropertySymbols,Di=pa?function(l){return null==l?[]:(l=Object(l),function ga(l,p){for(var o=-1,f=null==l?0:l.length,_=0,w=[];++o<f;){var k=l[o];p(k,o,l)&&(w[_++]=k)}return w}(pa(l),function(p){return wo.call(l,p)}))}:va;const li=Di,fr=function To(l,p){for(var o=-1,f=p.length,_=l.length;++o<f;)l[_+o]=p[o];return l},ma=oa(Object.getPrototypeOf,Object);var ko=Object.getOwnPropertySymbols?function(l){for(var p=[];l;)fr(p,li(l)),l=ma(l);return p}:va;const di=ko,ba=function No(l,p,o){var f=p(l);return $i(l)?f:fr(f,o(l))},Io=function Fo(l){return ba(l,lr,li)},Po=function _a(l){return ba(l,ni,di)},pe=ct(Re,"DataView"),vr=ct(Re,"Promise"),Fi=ct(Re,"Set"),Ut=ct(Re,"WeakMap");var Ii="[object Map]",xa="[object Promise]",Pi="[object Set]",Ca="[object WeakMap]",pr="[object DataView]",Bo=ut(pe),Uo=ut($t),Eo=ut(vr),Ro=ut(Fi),Lo=ut(Ut),Ct=tt;(pe&&Ct(new pe(new ArrayBuffer(1)))!=pr||$t&&Ct(new $t)!=Ii||vr&&Ct(vr.resolve())!=xa||Fi&&Ct(new Fi)!=Pi||Ut&&Ct(new Ut)!=Ca)&&(Ct=function(l){var p=tt(l),o="[object Object]"==p?l.constructor:void 0,f=o?ut(o):"";if(f)switch(f){case Bo:return pr;case Uo:return Ii;case Eo:return xa;case Ro:return Pi;case Lo:return Ca}return p});const Et=Ct;var qo=Object.prototype.hasOwnProperty;const br=Re.Uint8Array,Rt=function _r(l){var p=new l.constructor(l.byteLength);return new br(p).set(new br(l)),p};var jo=/\w*$/;var Ma=Nt?Nt.prototype:void 0,Da=Ma?Ma.valueOf:void 0;const os=function Za(l,p,o){var f=l.constructor;switch(p){case"[object ArrayBuffer]":return Rt(l);case"[object Boolean]":case"[object Date]":return new f(+l);case"[object DataView]":return function Ae(l,p){var o=p?Rt(l.buffer):l.buffer;return new l.constructor(o,l.byteOffset,l.byteLength)}(l,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function At(l,p){var o=p?Rt(l.buffer):l.buffer;return new l.constructor(o,l.byteOffset,l.length)}(l,o);case"[object Map]":case"[object Set]":return new f;case"[object Number]":case"[object String]":return new f(l);case"[object RegExp]":return function Sa(l){var p=new l.constructor(l.source,jo.exec(l));return p.lastIndex=l.lastIndex,p}(l);case"[object Symbol]":return function Lt(l){return Da?Object(Da.call(l)):{}}(l)}};var Oa=Object.create,ss=function(){function l(){}return function(p){if(!R(p))return{};if(Oa)return Oa(p);l.prototype=p;var o=new l;return l.prototype=void 0,o}}();const at=ss;var Ve=Ue&&Ue.isMap;const Ra=Ve?rr(Ve):function Ua(l){return pt(l)&&"[object Map]"==Et(l)};var La=Ue&&Ue.isSet;const qa=La?rr(La):function ot(l){return pt(l)&&"[object Set]"==Et(l)};var r="[object Arguments]",c="[object Function]",v="[object Object]",Z={};Z[r]=Z["[object Array]"]=Z["[object ArrayBuffer]"]=Z["[object DataView]"]=Z["[object Boolean]"]=Z["[object Date]"]=Z["[object Float32Array]"]=Z["[object Float64Array]"]=Z["[object Int8Array]"]=Z["[object Int16Array]"]=Z["[object Int32Array]"]=Z["[object Map]"]=Z["[object Number]"]=Z[v]=Z["[object RegExp]"]=Z["[object Set]"]=Z["[object String]"]=Z["[object Symbol]"]=Z["[object Uint8Array]"]=Z["[object Uint8ClampedArray]"]=Z["[object Uint16Array]"]=Z["[object Uint32Array]"]=!0,Z["[object Error]"]=Z[c]=Z["[object WeakMap]"]=!1;const qt=function se(l,p,o,f,_,w){var k,P=1&p,M=2&p,q=4&p;if(o&&(k=_?o(l,f,_,w):o(l)),void 0!==k)return k;if(!R(l))return l;var B=$i(l);if(B){if(k=function mr(l){var p=l.length,o=new l.constructor(p);return p&&"string"==typeof l[0]&&qo.call(l,"index")&&(o.index=l.index,o.input=l.input),o}(l),!P)return function si(l,p){var o=-1,f=l.length;for(p||(p=Array(f));++o<f;)p[o]=l[o];return p}(l,k)}else{var K=Et(l),oe=K==c||"[object GeneratorFunction]"==K;if(Ci(l))return function xo(l,p){if(p)return l.slice();var o=l.length,f=fa?fa(o):new l.constructor(o);return l.copy(f),f}(l,P);if(K==v||K==r||oe&&!_){if(k=M||oe?{}:function nt(l){return"function"!=typeof l.constructor||nr(l)?{}:at(ma(l))}(l),!P)return M?function Mo(l,p){return Xt(l,di(l),p)}(l,function oi(l,p){return l&&Xt(p,ni(p),l)}(k,l)):function Ce(l,p){return Xt(l,li(l),p)}(l,function da(l,p){return l&&Xt(p,lr(p),l)}(k,l))}else{if(!Z[K])return _?l:{};k=os(l,K,P)}}w||(w=new It);var De=w.get(l);if(De)return De;w.set(l,k),qa(l)?l.forEach(function(te){k.add(se(te,p,o,te,l,w))}):Ra(l)&&l.forEach(function(te,_e){k.set(_e,se(te,p,o,_e,l,w))});var Ze=B?void 0:(q?M?Po:Io:M?ni:lr)(l);return function En(l,p){for(var o=-1,f=null==l?0:l.length;++o<f&&!1!==p(l[o],o,l););}(Ze||l,function(te,_e){Ze&&(te=l[_e=te]),Ye(k,_e,se(te,p,o,_e,l,w))}),k};var gs=J(8332);const Rs=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]];function we(l,p){return"rgba("+l.concat(p).join(",")+")"}function vs(l,p){return Math.floor(Math.random()*(p-l+1))+l}function ps(l){return{backgroundColor:l.map(p=>we(p,.6)),borderColor:l.map(()=>"#fff"),pointBackgroundColor:l.map(p=>we(p,1)),pointBorderColor:l.map(()=>"#fff"),pointHoverBackgroundColor:l.map(p=>we(p,1)),pointHoverBorderColor:l.map(p=>we(p,1))}}function Ls(){return[vs(0,255),vs(0,255),vs(0,255)]}function qs(l){return Rs[l]||Ls()}function Wa(l){const p=new Array(l);for(let o=0;o<l;o++)p[o]=Rs[o]||Ls();return p}let al=(()=>{class l{constructor(){this.pColorschemesOptions={},this.colorschemesOptions=new j.X({})}setColorschemesOptions(o){this.pColorschemesOptions=o,this.colorschemesOptions.next(o)}getColorschemesOptions(){return this.pColorschemesOptions}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=(0,i.Yz7)({factory:function(){return new l},token:l,providedIn:"root"}),l})();const H={Default:0,Update:1,Refresh:2};H[H.Default]="Default",H[H.Update]="Update",H[H.Refresh]="Refresh";let Ws=(()=>{class l{constructor(o,f){this.element=o,this.themeService=f,this.options={},this.chartClick=new i.vpe,this.chartHover=new i.vpe,this.old={dataExists:!1,dataLength:0,datasetsExists:!1,datasetsLength:0,datasetsDataObjects:[],datasetsDataLengths:[],colorsExists:!1,colors:[],labelsExist:!1,labels:[],legendExists:!1,legend:{}},this.subs=[]}static registerPlugin(o){gs.pluginService.register(o)}static unregisterPlugin(o){gs.pluginService.unregister(o)}ngOnInit(){this.ctx=this.element.nativeElement.getContext("2d"),this.refresh(),this.subs.push(this.themeService.colorschemesOptions.subscribe(o=>this.themeChanged(o)))}themeChanged(o){this.refresh()}ngDoCheck(){if(!this.chart)return;let o=H.Default;const f=_=>{o=_>o?_:o};switch(!!this.data!==this.old.dataExists&&(this.propagateDataToDatasets(this.data),this.old.dataExists=!!this.data,f(H.Update)),this.data&&this.data.length!==this.old.dataLength&&(this.old.dataLength=this.data&&this.data.length||0,f(H.Update)),!!this.datasets!==this.old.datasetsExists&&(this.old.datasetsExists=!!this.datasets,f(H.Update)),this.datasets&&this.datasets.length!==this.old.datasetsLength&&(this.old.datasetsLength=this.datasets&&this.datasets.length||0,f(H.Update)),this.datasets&&this.datasets.filter((_,w)=>_.data!==this.old.datasetsDataObjects[w]).length&&(this.old.datasetsDataObjects=this.datasets.map(_=>_.data),f(H.Update)),this.datasets&&this.datasets.filter((_,w)=>_.data.length!==this.old.datasetsDataLengths[w]).length&&(this.old.datasetsDataLengths=this.datasets.map(_=>_.data.length),f(H.Update)),!!this.colors!==this.old.colorsExists&&(this.old.colorsExists=!!this.colors,this.updateColors(),f(H.Update)),this.colors&&this.colors.filter((_,w)=>!this.colorsEqual(_,this.old.colors[w])).length&&(this.old.colors=this.colors.map(_=>this.copyColor(_)),this.updateColors(),f(H.Update)),!!this.labels!==this.old.labelsExist&&(this.old.labelsExist=!!this.labels,f(H.Update)),this.labels&&this.labels.filter((_,w)=>!this.labelsEqual(_,this.old.labels[w])).length&&(this.old.labels=this.labels.map(_=>this.copyLabel(_)),f(H.Update)),!!this.options.legend!==this.old.legendExists&&(this.old.legendExists=!!this.options.legend,f(H.Refresh)),this.options.legend&&this.options.legend.position!==this.old.legend.position&&(this.old.legend.position=this.options.legend.position,f(H.Refresh)),o){case H.Default:break;case H.Update:this.update();break;case H.Refresh:this.refresh()}}copyLabel(o){return Array.isArray(o)?[...o]:o}labelsEqual(o,f){return Array.isArray(o)===Array.isArray(f)&&(Array.isArray(o)||o===f)&&(!Array.isArray(o)||o.length===f.length)&&(!Array.isArray(o)||0===o.filter((_,w)=>_!==f[w]).length)}copyColor(o){return{backgroundColor:o.backgroundColor,borderWidth:o.borderWidth,borderColor:o.borderColor,borderCapStyle:o.borderCapStyle,borderDash:o.borderDash,borderDashOffset:o.borderDashOffset,borderJoinStyle:o.borderJoinStyle,pointBorderColor:o.pointBorderColor,pointBackgroundColor:o.pointBackgroundColor,pointBorderWidth:o.pointBorderWidth,pointRadius:o.pointRadius,pointHoverRadius:o.pointHoverRadius,pointHitRadius:o.pointHitRadius,pointHoverBackgroundColor:o.pointHoverBackgroundColor,pointHoverBorderColor:o.pointHoverBorderColor,pointHoverBorderWidth:o.pointHoverBorderWidth,pointStyle:o.pointStyle,hoverBackgroundColor:o.hoverBackgroundColor,hoverBorderColor:o.hoverBorderColor,hoverBorderWidth:o.hoverBorderWidth}}colorsEqual(o,f){return!o==!f&&(!o||o.backgroundColor===f.backgroundColor&&o.borderWidth===f.borderWidth&&o.borderColor===f.borderColor&&o.borderCapStyle===f.borderCapStyle&&o.borderDash===f.borderDash&&o.borderDashOffset===f.borderDashOffset&&o.borderJoinStyle===f.borderJoinStyle&&o.pointBorderColor===f.pointBorderColor&&o.pointBackgroundColor===f.pointBackgroundColor&&o.pointBorderWidth===f.pointBorderWidth&&o.pointRadius===f.pointRadius&&o.pointHoverRadius===f.pointHoverRadius&&o.pointHitRadius===f.pointHitRadius&&o.pointHoverBackgroundColor===f.pointHoverBackgroundColor&&o.pointHoverBorderColor===f.pointHoverBorderColor&&o.pointHoverBorderWidth===f.pointHoverBorderWidth&&o.pointStyle===f.pointStyle&&o.hoverBackgroundColor===f.hoverBackgroundColor&&o.hoverBorderColor===f.hoverBorderColor&&o.hoverBorderWidth===f.hoverBorderWidth)}updateColors(){this.datasets.forEach((o,f)=>{this.colors&&this.colors[f]?Object.assign(o,this.colors[f]):Object.assign(o,function el(l,p,o){if("pie"===l||"doughnut"===l)return ps(Wa(o));if("polarArea"===l)return function rl(l){return{backgroundColor:l.map(p=>we(p,.6)),borderColor:l.map(p=>we(p,1)),hoverBackgroundColor:l.map(p=>we(p,.8)),hoverBorderColor:l.map(p=>we(p,1))}}(Wa(o));if("line"===l||"radar"===l)return function tl(l){return{backgroundColor:we(l,.4),borderColor:we(l,1),pointBackgroundColor:we(l,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:we(l,.8)}}(qs(p));if("bar"===l||"horizontalBar"===l)return function il(l){return{backgroundColor:we(l,.6),borderColor:we(l,1),hoverBackgroundColor:we(l,.8),hoverBorderColor:we(l,1)}}(qs(p));if("bubble"===l||"scatter"===l)return ps(Wa(o));throw new Error("getColors - Unsupported chart type: "+l)}(this.chartType,f,o.data.length),Object.assign({},o))})}ngOnChanges(o){let f=H.Default;const _=w=>{f=w>f?w:f};switch(o.hasOwnProperty("data")&&o.data.currentValue&&(this.propagateDataToDatasets(o.data.currentValue),_(H.Update)),o.hasOwnProperty("datasets")&&o.datasets.currentValue&&(this.propagateDatasetsToData(o.datasets.currentValue),_(H.Update)),o.hasOwnProperty("labels")&&(this.chart&&(this.chart.data.labels=o.labels.currentValue),_(H.Update)),o.hasOwnProperty("legend")&&(this.chart&&(this.chart.config.options.legend.display=o.legend.currentValue,this.chart.generateLegend()),_(H.Update)),o.hasOwnProperty("options")&&_(H.Refresh),f){case H.Update:this.update();break;case H.Refresh:case H.Default:this.refresh()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(o=>o.unsubscribe())}update(o){if(this.chart)return this.chart.update(o)}hideDataset(o,f){this.chart.getDatasetMeta(o).hidden=f,this.chart.update()}isDatasetHidden(o){return this.chart.getDatasetMeta(o).hidden}toBase64Image(){return this.chart.toBase64Image()}getChartConfiguration(){const o=this.getDatasets(),f=Object.assign({},this.options);!1===this.legend&&(f.legend={display:!1}),f.hover=f.hover||{},f.hover.onHover||(f.hover.onHover=(w,k)=>{k&&!k.length||this.chartHover.emit({event:w,active:k})}),f.onClick||(f.onClick=(w,k)=>{this.chartClick.emit({event:w,active:k})});const _=this.smartMerge(f,this.themeService.getColorschemesOptions());return{type:this.chartType,data:{labels:this.labels||[],datasets:o},plugins:this.plugins,options:_}}getChartBuilder(o){const f=this.getChartConfiguration();return new gs.Chart(o,f)}smartMerge(o,f,_=0){if(0===_&&(o=function fs(l){return qt(l,5)}(o)),Object.keys(f).forEach(k=>{if(Array.isArray(f[k])){const P=o[k];P&&P.forEach(M=>{this.smartMerge(M,f[k][0],_+1)})}else"object"==typeof f[k]?(k in o||(o[k]={}),this.smartMerge(o[k],f[k],_+1)):o[k]=f[k]}),0===_)return o}isMultiLineLabel(o){return Array.isArray(o)}joinLabel(o){return o?this.isMultiLineLabel(o)?o.join(" "):o:null}propagateDatasetsToData(o){this.data=this.datasets.map(f=>f.data),this.chart&&(this.chart.data.datasets=o),this.updateColors()}propagateDataToDatasets(o){this.isMultiDataSet(o)?this.datasets&&o.length===this.datasets.length?this.datasets.forEach((f,_)=>{f.data=o[_]}):(this.datasets=o.map((f,_)=>({data:f,label:this.joinLabel(this.labels[_])||`Label ${_}`})),this.chart&&(this.chart.data.datasets=this.datasets)):this.datasets?(this.datasets[0]||(this.datasets[0]={}),this.datasets[0].data=o,this.datasets.splice(1)):(this.datasets=[{data:o}],this.chart&&(this.chart.data.datasets=this.datasets)),this.updateColors()}isMultiDataSet(o){return Array.isArray(o[0])}getDatasets(){if(!this.datasets&&!this.data)throw new Error(`ng-charts configuration error, data or datasets field are required to render chart ${this.chartType}`);return this.datasets?(this.propagateDatasetsToData(this.datasets),this.datasets):this.data?(this.propagateDataToDatasets(this.data),this.datasets):void 0}refresh(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.ctx&&(this.chart=this.getChartBuilder(this.ctx))}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(i.SBq),i.Y36(al))},l.\u0275dir=i.lG2({type:l,selectors:[["canvas","baseChart",""]],inputs:{options:"options",data:"data",datasets:"datasets",labels:"labels",chartType:"chartType",colors:"colors",legend:"legend",plugins:"plugins"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[i.TTD]}),l})(),nl=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=i.oAB({type:l}),l.\u0275inj=i.cJS({imports:[[]]}),l})();var ve=J(745),V=J(6692),he=J(7333),Te=J(2099),wt=J(7672),st=J(5439),ie=J(5094),Ee=J(2654),ms=J(7739),ee=J(7482);function ol(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"This field is required. "),i.qZA())}function sl(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.hij("Value should be more than ",o.errors.min.min,"Kg. ")}}function ll(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.hij("Value should be less than ",o.errors.max.max,"Kg. ")}}function dl(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,'Should follow the pattern: "UK" followed by 12 numbers.'),i.qZA())}function ul(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"Date can't be in the future."),i.qZA())}function cl(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1,"Initial date should be before first intermediate date "),i.TgZ(2,"strong"),i._uU(3),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(3),i.Oqu(o.errors.initialBeforeInter)}}function hl(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1," Initial weight should be before the sale date: "),i.TgZ(2,"strong"),i._uU(3),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(3),i.Oqu(o.errors.initialBeforeSale)}}function fl(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1,"Intermediate must be "),i.TgZ(2,"strong"),i._uU(3,"between"),i.qZA(),i._uU(4," initial weigh date "),i.TgZ(5,"strong"),i._uU(6),i.qZA(),i._uU(7," and sale date "),i.TgZ(8,"strong"),i._uU(9),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(6),i.Oqu(o.errors.intermediateDate.initialDate),i.xp6(3),i.Oqu(o.errors.intermediateDate.saleDate)}}function gl(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1," Sale date should be after last intermediate date: "),i.TgZ(2,"strong"),i._uU(3),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(3),i.Oqu(o.errors.saleAfterInter)}}function vl(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1," Sale date should be after initial date: "),i.TgZ(2,"strong"),i._uU(3),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(3),i.Oqu(o.errors.saleAfterInitial)}}function pl(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1," Intermediate dates should be after initial date: "),i.TgZ(2,"strong"),i._uU(3),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(3),i.Oqu(o.errors.interBeforeInitial)}}function ml(l,p){if(1&l&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Oqu(o.errors.stats)}}function bl(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"Please choose a breed from the list"),i.qZA())}function _l(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"Please choose the same breed as the calf"),i.qZA())}function yl(l,p){if(1&l&&(i.TgZ(0,"div"),i.YNc(1,ol,2,0,"span",0),i.YNc(2,sl,2,1,"span",0),i.YNc(3,ll,2,1,"span",0),i.YNc(4,dl,2,0,"span",0),i.YNc(5,ul,2,0,"span",0),i.YNc(6,cl,4,1,"span",0),i.YNc(7,hl,4,1,"span",0),i.YNc(8,fl,10,2,"span",0),i.YNc(9,gl,4,1,"span",0),i.YNc(10,vl,4,1,"span",0),i.YNc(11,pl,4,1,"span",0),i.YNc(12,ml,2,1,"span",0),i.YNc(13,bl,2,0,"span",0),i.YNc(14,_l,2,0,"span",0),i.qZA()),2&l){const o=i.oxw();i.xp6(1),i.Q6J("ngIf",o.errors.required),i.xp6(1),i.Q6J("ngIf",o.errors.min),i.xp6(1),i.Q6J("ngIf",o.errors.max),i.xp6(1),i.Q6J("ngIf",o.errors.pattern),i.xp6(1),i.Q6J("ngIf",o.errors.date),i.xp6(1),i.Q6J("ngIf",o.errors.initialBeforeInter),i.xp6(1),i.Q6J("ngIf",o.errors.initialBeforeSale),i.xp6(1),i.Q6J("ngIf",o.errors.intermediateDate),i.xp6(1),i.Q6J("ngIf",o.errors.saleAfterInter),i.xp6(1),i.Q6J("ngIf",o.errors.saleAfterInitial),i.xp6(1),i.Q6J("ngIf",o.errors.interBeforeInitial),i.xp6(1),i.Q6J("ngIf",o.errors.stats),i.xp6(1),i.Q6J("ngIf",o.errors.breed),i.xp6(1),i.Q6J("ngIf",o.errors.notSameBreed)}}function xl(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1," No initial weight set. "),i.qZA())}function Cl(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"Please select one. "),i.qZA())}function Al(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"Sale weight already set. "),i.qZA())}function wl(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"Initial weight already set. "),i.qZA())}function Tl(l,p){if(1&l&&(i.TgZ(0,"div"),i.YNc(1,xl,2,0,"span",0),i.YNc(2,Cl,2,0,"span",0),i.YNc(3,Al,2,0,"span",0),i.YNc(4,wl,2,0,"span",0),i.qZA()),2&l){const o=i.oxw();i.xp6(1),i.Q6J("ngIf",o.errors.noInitial),i.xp6(1),i.Q6J("ngIf",o.errors.required),i.xp6(1),i.Q6J("ngIf",o.errors.saleWeightExists),i.xp6(1),i.Q6J("ngIf",o.errors.initialWeightExists)}}let ui=(()=>{class l{constructor(){this.isRadio=!1}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-form-errors"]],inputs:{errors:"errors",isRadio:"isRadio"},decls:2,vars:2,consts:[[4,"ngIf"]],template:function(o,f){1&o&&(i.YNc(0,yl,15,14,"div",0),i.YNc(1,Tl,5,4,"div",0)),2&o&&(i.Q6J("ngIf",f.errors&&!f.isRadio),i.xp6(1),i.Q6J("ngIf",f.errors&&f.isRadio))},directives:[F.O5],styles:[""]}),l})();const Sl=["p"];function kl(l,p){if(1&l&&(i.TgZ(0,"option",33),i._uU(1),i.ALo(2,"date"),i.qZA()),2&l){const o=p.$implicit;i.s9C("value",o.id),i.xp6(1),i.AsE(" ",i.xi3(2,3,o.weightDate,"dd/MM/yyyy")," - ",o.weight," Kg ")}}const js=function(l){return{"was-validated":l}};function Ml(l,p){if(1&l&&(i.TgZ(0,"div",29)(1,"select",30)(2,"option",31),i._uU(3,"Select weight to edit"),i.qZA(),i.YNc(4,kl,3,6,"option",32),i.qZA(),i.TgZ(5,"div",13),i._UZ(6,"cms-form-errors",25),i.qZA()()),2&l){const o=i.oxw(2);i.Q6J("ngClass",i.VKq(4,js,o.weightSelect.dirty)),i.xp6(4),i.Q6J("ngForOf",o.animal.weightData),i.xp6(2),i.Q6J("errors",o.weightSelect.errors)("isRadio",!0)}}function Dl(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div")(1,"h4",3),i._uU(2),i.TgZ(3,"strong"),i._uU(4),i.qZA()(),i.TgZ(5,"div",4)(6,"form",5),i.YNc(7,Ml,7,6,"div",6),i.TgZ(8,"div",7)(9,"label",8),i._uU(10,"Enter new weight"),i.qZA(),i.TgZ(11,"div",9),i._UZ(12,"input",10),i.TgZ(13,"div",11)(14,"span",12),i._uU(15,"Kg"),i.qZA()(),i.TgZ(16,"div",13),i._UZ(17,"cms-form-errors",14),i.qZA()()(),i.TgZ(18,"div",7)(19,"label",15),i._uU(20,"Enter new date"),i.qZA(),i._UZ(21,"input",16),i.TgZ(22,"div",13),i._UZ(23,"cms-form-errors",14),i.qZA()(),i.TgZ(24,"div",17),i._UZ(25,"input",18),i.TgZ(26,"label",19),i._uU(27," \xa0 Is initial weight?"),i.qZA()(),i.TgZ(28,"div",17),i._UZ(29,"input",20),i.TgZ(30,"label",21),i._uU(31," \xa0 Is intermediate weight?"),i.qZA()(),i.TgZ(32,"div",22),i._UZ(33,"input",23),i.TgZ(34,"label",24),i._uU(35,"\xa0 Is sale weight?"),i.qZA(),i.TgZ(36,"div",13),i._UZ(37,"cms-form-errors",25),i.qZA()(),i.TgZ(38,"button",26,27),i.NdJ("click",function(){return i.CHM(o),i.oxw().saveChanges()}),i._uU(40," Save Changes "),i.qZA(),i.TgZ(41,"button",28),i.NdJ("click",function(){return i.CHM(o),i.oxw().closeModal()}),i._uU(42," Close "),i.qZA()()()()}if(2&l){const o=i.oxw();i.xp6(2),i.hij(" ",o.isAddMode?"Add":"Edit"," Weight for "),i.xp6(2),i.Oqu(o.animal.tagNumber),i.xp6(2),i.Q6J("formGroup",o.editWeightForm),i.xp6(1),i.Q6J("ngIf",!o.isAddMode),i.xp6(4),i.Q6J("ngClass",i.VKq(13,js,o.weight.dirty)),i.xp6(6),i.Q6J("errors",o.weight.errors),i.xp6(4),i.Q6J("ngClass",o.getCSSClassForDate()),i.xp6(2),i.Q6J("errors",o.date.errors),i.xp6(2),i.Q6J("ngClass",o.getCSSForRadio()),i.xp6(4),i.Q6J("ngClass",o.getCSSForRadio()),i.xp6(4),i.Q6J("ngClass",o.getCSSForRadio()),i.xp6(4),i.Q6J("errors",o.weightType.errors)("isRadio",!0)}}var jt=(()=>(function(l){l.Weight="weight",l.Date="date",l.WeightSelect="weightSelect",l.WeightType="weightType",l.AnimalControl="animalControl"}(jt||(jt={})),jt))(),Me=(()=>(function(l){l.Sale="isSale",l.Initial="isInitial",l.Intermediate="isIntermediate"}(Me||(Me={})),Me))();let bs=(()=>{class l{constructor(o,f,_,w,k,P){this.modalService=o,this.fb=f,this.loadingService=_,this.updateService=w,this.warningService=k,this.store=P,this.animal=null,this.isAddMode=!1,this.subs=new Ee.w,this.shortLifeSubs=new Ee.w,this.editWeightForm=new T.cw({}),this.selectedWeight=null,this.showSuccess=!1,this.saveResult={message:"",success:!0}}ngOnInit(){this.setUpForm(),this.trackWeightSelectChanges()}ngAfterViewInit(){const o=this.modalService.get(V.n.Weight);o.onAnyCloseEventFinished.subscribe(()=>{this.clearForm(),this.selectedWeight=null,this.shortLifeSubs.unsubscribe()}),o.onOpenFinished.subscribe(()=>{this.editWeightForm.setValidators(xs(this.isAddMode)),this.editWeightForm.updateValueAndValidity(),this.isAddMode?this.weightSelect.disable():this.weightSelect.enable(),this.shortLifeSubs.add(this.store.pipe((0,ie.Ys)((0,Te.nk)(this.animal.tagNumber))).subscribe(f=>{this.animal=f,this.animalControl.setValue(f)})),this.animalControl.setValue(this.animal),this.animalControl.updateValueAndValidity(),this.date.updateValueAndValidity()})}getCSSForRadio(){return this.weightType.invalid&&this.weightType.dirty?"is-invalid":this.weightType.valid&&this.weightType.dirty?"is-valid":void 0}getCSSClassForDate(){return this.date.invalid&&this.date.dirty?"is-invalid":this.date.valid&&this.date.dirty?"is-valid":void 0}closeModal(){this.modalService.get(V.n.Weight).close()}saveChanges(){this.editWeightForm.markAllAsTouched(),this.markAllAsDirty(),this.editWeightForm.valid&&this.handlePopoverErrors().subscribe(o=>{if(this.isAddMode)if(o){this.loadingService.setLoadingState(!0);const f={weight:this.weight.value,weightDate:this.date.value,weightType:this.getWeightType()};this.updateService.addAnimalWeight(this.animal.tagNumber,f).then(()=>{this.loadingService.setLoadingState(!1),this.clearForm(),this.handleSuccessPopover()})}else this.markAllAsDirty();else if(o){this.loadingService.setLoadingState(!0);const f=Object.assign({weight:this.weight.value,date:this.date.value},this.getWeightType());this.updateService.updateAnimalWeight(this.selectedWeight.id,f,this.animal).then(()=>{this.loadingService.setLoadingState(!1),this.handleSuccessPopover(),this.clearForm()})}else this.markAllAsDirty()})}setUpForm(){this.editWeightForm=this.fb.group({animalControl:null,weightSelect:this.fb.control([],T.kI.required),weight:this.fb.control([],{validators:[T.kI.required,T.kI.min(10),T.kI.max(1e3)],updateOn:"blur"}),date:this.fb.control([],[T.kI.required,ys()]),weightType:this.fb.control([],T.kI.required)},{validators:xs(this.isAddMode)}),this.weightSelect.setValue("")}markAllAsDirty(){this.weightSelect.markAsDirty(),this.weight.markAsDirty(),this.date.markAsDirty(),this.weightType.markAsDirty()}weightDateExists(){const o=st(this.date.value);return-1!==this.animal.weightData.findIndex(f=>f.weightDate.format("L")===o.format("L"))}handleSuccessPopover(){this.saveResult.message="Weight Saved",this.saveResult.success=!0,this.handlePopover(2e3)}handlePopoverErrors(){const o=new j.X(null);return!this.isAddMode&&this.editWeightForm.valid?this.valuesEdited()?o.next(!0):(this.saveResult.message="No changes made",this.saveResult.success=!1,this.handlePopover(3e3),o.next(!1)):this.editWeightForm.valid&&!this.weightDateExists()&&this.weightDateDiff()<=2?o.next(!0):this.weightDateExists()?this.warningService.show({header:"There is already a weight recorded on that day"}).subscribe(f=>{o.next(f)}):this.weightDateDiff()>2?this.warningService.show({header:"The date you entered is more than 2 months ago."}).subscribe(f=>{o.next(f)}):(this.saveResult.message="Please fix errors",this.saveResult.success=!1,this.handlePopover(3e3),o.next(!1)),o}weightDateDiff(){return st().diff(st(this.date.value),"months",!0)}handlePopover(o){this.popover.popoverClass=this.getCSSForPopover(),this.popover.ngbPopover=this.saveResult.message,this.popover.open(),(0,ms.H)(o).subscribe(()=>{this.popover.close()})}getCSSForPopover(){return this.saveResult.success?"update-success":"update-error"}getWeightType(){let o={isInitial:!1,isSale:!1};switch(this.weightType.value){case Me.Initial:o.isInitial=!0;break;case Me.Sale:o.isSale=!0}return o}trackWeightSelectChanges(){this.weightSelect.valueChanges.subscribe(o=>{this.markAsClean(),""!==o?(this.selectedWeight=this.animal.weightData.find(f=>f.id==o),this.updateForm()):this.clearForm()})}markAsClean(){this.weight.markAsPristine(),this.date.markAsPristine(),this.weightType.markAsPristine()}valuesEdited(){var o,f,_,w,k,P,M,q,B;const K=null===(o=this.selectedWeight)||void 0===o?void 0:o.weightDate.format("YYYY-MM-DD"),oe=this.getWeightType();return console.warn((null===(f=this.selectedWeight)||void 0===f?void 0:f.weight)!==this.weight.value,K!==this.date.value,(null===(_=this.selectedWeight)||void 0===_?void 0:_.weightType.isInitial)!==oe.isInitial,(null===(w=this.selectedWeight)||void 0===w?void 0:w.weightType.isSale)!==oe.isSale),console.warn((null===(k=this.selectedWeight)||void 0===k?void 0:k.weightType.isInitial)!==oe.isInitial||(null===(P=this.selectedWeight)||void 0===P?void 0:P.weightType.isSale)!==oe.isSale),(null===(M=this.selectedWeight)||void 0===M?void 0:M.weight)!==this.weight.value||K!==this.date.value||(null===(q=this.selectedWeight)||void 0===q?void 0:q.weightType.isInitial)!==oe.isInitial||(null===(B=this.selectedWeight)||void 0===B?void 0:B.weightType.isSale)!==oe.isSale}updateForm(){this.isAddMode||(this.editWeightForm.setValidators(xs(this.isAddMode,this.convertWeightType(this.selectedWeight.weightType))),this.editWeightForm.updateValueAndValidity()),this.weight.setValue(this.selectedWeight.weight),this.date.setValue(this.selectedWeight.weightDate.format("YYYY-MM-DD")),this.weightType.setValue(this.convertWeightType(this.selectedWeight.weightType))}convertWeightType(o){return o.isInitial?Me.Initial:this.selectedWeight.weightType.isSale?Me.Sale:Me.Intermediate}clearForm(){this.selectedWeight=null,this.weight.reset("",{emitEvent:!1}),this.date.reset("",{emitEvent:!1}),this.weightSelect.reset("",{emitEvent:!1}),this.weightType.reset("",{emitEvent:!1})}get weight(){return this.editWeightForm.get(jt.Weight)}get date(){return this.editWeightForm.get(jt.Date)}get weightType(){return this.editWeightForm.get(jt.WeightType)}get weightSelect(){return this.editWeightForm.get(jt.WeightSelect)}get animalControl(){return this.editWeightForm.get(jt.AnimalControl)}ngOnDestroy(){this.subs.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ve.lu),i.Y36(T.qu),i.Y36(ee.Rz),i.Y36(ee.hP),i.Y36(ee.qj),i.Y36(ie.yh))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-weight-modal"]],viewQuery:function(o,f){if(1&o&&i.Gf(Sl,5),2&o){let _;i.iGM(_=i.CRH())&&(f.popover=_.first)}},inputs:{animal:"animal",isAddMode:"isAddMode"},decls:3,vars:1,consts:[["identifier","weightModal"],["weightModal",""],[4,"ngIf"],[1,"text-center"],[1,"cms-form"],[1,"mb-3","mt-2",3,"formGroup"],["class","input-group mb-3 mt-3",3,"ngClass",4,"ngIf"],[1,"form-group"],["for","newWeight"],[1,"input-group",3,"ngClass"],["formControlName","weight","type","number","step","1","name","weight","required","","min","10","max","1000",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"invalid-feedback"],[3,"errors"],["for","newDate"],["formControlName","date","type","date","name","date","id","newDate",1,"form-control",3,"ngClass"],[1,"form-check"],["formControlName","weightType","value","isInitial","type","radio","name","weightType","id","isInitialRadio",1,"form-check-input",3,"ngClass"],["for","isInitialRadio",1,"form-check-label"],["formControlName","weightType","value","isIntermediate","type","radio","name","weightType","id","isIntermediate",1,"form-check-input",3,"ngClass"],["for","isIntermediate",1,"form-check-label"],[1,"form-check","mb-3"],["formControlName","weightType","value","isSale","type","radio","name","weightType","id","isSaleRadio",1,"form-check-input",3,"ngClass"],["for","isSaleRadio",1,"form-check-label"],[3,"errors","isRadio"],["ngbPopover","Update Success!","placement","bottom","popoverClass","update-success","triggers","manual",1,"btn","btn-success","mr-3",3,"click"],["p","ngbPopover"],["type","button",1,"btn","btn-danger",3,"click"],[1,"input-group","mb-3","mt-3",3,"ngClass"],["formControlName","weightSelect","id","weightSelect","required","",1,"custom-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,f){1&o&&(i.TgZ(0,"ngx-smart-modal",0,1),i.YNc(2,Dl,43,15,"div",2),i.qZA()),2&o&&(i.xp6(2),i.Q6J("ngIf",f.animal))},directives:[ve.Q3,F.O5,T._Y,T.JL,T.sg,F.mk,T.EJ,T.JJ,T.u,T.Q7,T.YN,T.Kr,F.sg,ui,T.Fj,T.wV,T.qQ,T.Fd,T._,ne.o8],pipes:[F.uU],styles:[".weight-modal-form[_ngcontent-%COMP%]{max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}"]}),l})();function _s(l){return p=>{var o;return 0===(null===(o=p.value)||void 0===o?void 0:o.length)||l.breedExists(p.value)?null:{breed:!0}}}function ys(){return l=>st().diff(st(l.value),"days",!0)<0?{date:!0}:null}function xs(l,p){return o=>{const f=o.get("weightType"),_=o.get("date"),w=o.get("animalControl");if(f&&w.value&&!function Zl(l){var p,o;return((null===(p=l.errors)||void 0===p?void 0:p.required)||(null===(o=l.errors)||void 0===o?void 0:o.date))&&l.dirty}(_)){const P=w.value.weightData,M=function Il(l){return l.filter(p=>!p.weightType.isInitial&&!p.weightType.isSale)}(P),q=function Fl(l){return l.find(p=>p.weightType.isSale)}(P),B=function Nl(l){return l.find(p=>p.weightType.isInitial)}(P),K=st(_.value);switch(f.value){case Me.Sale:void 0!==q?f.setErrors({saleWeightExists:!0}):(null==B?void 0:B.weightDate.isSameOrAfter(K,"day"))?_.setErrors({saleAfterInitial:B.weightDate.format("DD/MM/YYYY")}):l&&!Ys(M,K)||!l&&!Ys(M,K)&&p!==Me.Sale?(_.setErrors({saleAfterInter:M[M.length-1].weightDate.format("DD/MM/YYYY")}),_.markAsDirty()):B?_.setErrors(null):f.setErrors({noInitial:!0});break;case Me.Initial:void 0!==B&&p!==Me.Initial?f.setErrors({initialWeightExists:!0}):(null==q?void 0:q.weightDate.isBefore(K))?_.setErrors({initialBeforeSale:q.weightDate.format("DD/MM/YYYY")}):function Pl(l,p){return l.every(o=>p.isBefore(o.weightDate,"day"))}(M,K)?_.setErrors(null):_.setErrors({initialBeforeInter:M[0].weightDate.format("DD/MM/YYYY")});break;case Me.Intermediate:p===Me.Initial?f.setErrors({noInitial:!0}):q&&B&&!K.isBetween(B.weightDate,q.weightDate,"day","()")?(l||!l&&p!==Me.Sale)&&_.setErrors({intermediateDate:{initialDate:B.weightDate.format("DD/MM/YYYY"),saleDate:q.weightDate.format("DD/MM/YYYY")}}):B?K.diff(B.weightDate,"day")<=0?_.setErrors({interBeforeInitial:B.weightDate.format("DD/MM/YYYY")}):_.setErrors(null):f.setErrors({noInitial:!0});break;default:_.setErrors(null),_.value||_.markAsPristine()}}else _.setErrors(null);return null}}function Ys(l,p){return l.every(o=>p.isAfter(o.weightDate,"day"))}var Yt=J(2986);const Ol=["p"],Ar=function(l){return{"was-validated":l}};function Bl(l,p){if(1&l&&(i.TgZ(0,"div",25)(1,"label",40),i._uU(2,"Enter tag number"),i.qZA(),i._UZ(3,"input",41),i.TgZ(4,"div",17),i._UZ(5,"cms-form-errors",18),i.qZA()()),2&l){const o=i.oxw(2);i.Q6J("ngClass",i.VKq(2,Ar,o.tagNumber.dirty)),i.xp6(5),i.Q6J("errors",o.tagNumber.errors)}}function Ul(l,p){if(1&l&&(i.TgZ(0,"div",42),i._UZ(1,"cms-form-errors",36),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("errors",o.registered.errors)("isRadio",!0)}}function El(l,p){if(1&l&&(i.TgZ(0,"option",43),i._uU(1),i.qZA()),2&l){const o=p.$implicit;i.s9C("value",o.code),i.xp6(1),i.hij(" ",o.breed," ")}}function Rl(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div")(1,"h2",3),i._uU(2),i.TgZ(3,"strong"),i._uU(4),i.qZA()(),i.TgZ(5,"div",4)(6,"form",5),i.YNc(7,Bl,6,4,"div",6),i.TgZ(8,"div",7)(9,"label",8),i._uU(10,"Registered on BCMS - \xa0 "),i.qZA(),i.TgZ(11,"div",9)(12,"label",10),i._UZ(13,"input",11),i._uU(14,"Yes "),i.qZA(),i.TgZ(15,"label",10),i._UZ(16,"input",12),i._uU(17,"No "),i.qZA()(),i.YNc(18,Ul,2,2,"div",13),i.qZA(),i.TgZ(19,"div",14)(20,"label",15),i._uU(21,"Enter birth date"),i.qZA(),i._UZ(22,"input",16),i.TgZ(23,"div",17),i._UZ(24,"cms-form-errors",18),i.qZA()(),i.TgZ(25,"div",14)(26,"label",19),i._uU(27,"Enter name (optional)"),i.qZA(),i._UZ(28,"input",20),i.TgZ(29,"div",17),i._UZ(30,"cms-form-errors",18),i.qZA()(),i.TgZ(31,"div",14)(32,"label",21),i._uU(33,"Enter Breed"),i.qZA(),i._UZ(34,"input",22),i.TgZ(35,"datalist",23),i.YNc(36,El,2,2,"option",24),i.qZA(),i.TgZ(37,"div",17),i._UZ(38,"cms-form-errors",18),i.qZA()(),i.TgZ(39,"div",25)(40,"label",26),i._uU(41,"Enter Dam Tag"),i.qZA(),i._UZ(42,"input",27),i.TgZ(43,"div",17),i._UZ(44,"cms-form-errors",18),i.qZA()(),i.TgZ(45,"div",25)(46,"label",28),i._uU(47,"Enter Sire Tag"),i.qZA(),i._UZ(48,"input",29),i.TgZ(49,"div",17),i._UZ(50,"cms-form-errors",18),i.qZA()(),i.TgZ(51,"div",30),i._UZ(52,"input",31),i.TgZ(53,"label",32),i._uU(54,"Male"),i.qZA()(),i.TgZ(55,"div",33),i._UZ(56,"input",34),i.TgZ(57,"label",35),i._uU(58,"Female"),i.qZA(),i.TgZ(59,"div",17),i._UZ(60,"cms-form-errors",36),i.qZA()(),i.TgZ(61,"button",37,38),i.NdJ("click",function(){return i.CHM(o),i.oxw().save()}),i._uU(63),i.qZA(),i.TgZ(64,"button",39),i.NdJ("click",function(){return i.CHM(o),i.oxw().closeModal()}),i._uU(65," Close "),i.qZA()()()()}if(2&l){const o=i.oxw();i.xp6(2),i.hij(" ",o.isAddMode?"Add Animal":"Edit "," "),i.xp6(2),i.Oqu(o.isAddMode?"":null==o.animal?null:o.animal.tagNumber),i.xp6(2),i.Q6J("formGroup",o.animalForm),i.xp6(1),i.Q6J("ngIf",o.isAddMode),i.xp6(5),i.Q6J("ngClass",o.getCSSForRegisteredYes()),i.xp6(3),i.Q6J("ngClass",o.getCSSForRegisteredNo()),i.xp6(3),i.Q6J("ngIf",o.registered.invalid&&o.registered.dirty),i.xp6(4),i.Q6J("ngClass",o.getCSSClassForDOB()),i.xp6(2),i.Q6J("errors",o.dob.errors),i.xp6(4),i.Q6J("ngClass",o.getCSSClassForName()),i.xp6(2),i.Q6J("errors",o.dob.errors),i.xp6(4),i.Q6J("ngClass",o.getCSSClassForBreed()),i.xp6(2),i.Q6J("ngForOf",o.breedsList),i.xp6(2),i.Q6J("errors",o.breed.errors),i.xp6(1),i.Q6J("ngClass",i.VKq(23,Ar,o.dam.dirty)),i.xp6(5),i.Q6J("errors",o.dam.errors),i.xp6(1),i.Q6J("ngClass",i.VKq(25,Ar,o.sire.dirty)),i.xp6(5),i.Q6J("errors",o.sire.errors),i.xp6(1),i.Q6J("ngClass",i.VKq(27,Ar,o.gender.dirty)),i.xp6(4),i.Q6J("ngClass",i.VKq(29,Ar,o.gender.dirty)),i.xp6(5),i.Q6J("errors",o.gender.errors)("isRadio",!0),i.xp6(3),i.hij(" Save ",o.isAddMode?"Animal":"Changes"," ")}}var Ke=(()=>(function(l){l.TagNumber="newTagNumber",l.GenderControl="gender",l.DOB="dob",l.Dam="dam",l.Sire="sire",l.Breed="breed",l.Registered="registered",l.Name="name"}(Ke||(Ke={})),Ke))();let zs=(()=>{class l{constructor(o,f,_,w,k,P,M){this.fb=o,this.store=f,this.modals=_,this.animalUpdateService=w,this.loadingService=k,this.warningService=P,this.breedService=M,this.animal=null,this.animalForm=new T.cw({}),this.saveResult={message:"",success:!0},this.dropDownHidden=!0,this.isAddMode=!1,this.noSireText="No sire assigned",this.subs=new Ee.w}ngOnInit(){this.setUpForm(),this.breedsList=this.breedService.breedCodeObjects,this.$dams=this.store.pipe((0,ie.Ys)(Te.X0)),this.$sires=this.store.pipe((0,ie.Ys)(wt.Of)),this.$animals=this.store.pipe((0,ie.Ys)(Te.MV))}ngAfterViewInit(){this.trackModalEvents()}save(){this.subs.add(this.handlePopoverErrors().subscribe(o=>{if(this.isAddMode){if(this.markAllAsDirty(),o){this.loadingService.setLoadingState(!0);const f={ai:[],birthDate:this.dob.value,calvingHistory:[],dam:this.dam.value,gender:this.gender.value,managementTag:"null",sire:{tagNumber:"UK"==this.sire.value?"":this.sire.value},tagNumber:this.tagNumber.value,weightData:[],breed:this.breedService.isBreedCode(this.breed.value)?this.breed.value:this.breedService.getCodeFromBreed(this.breed.value),registered:this.isRegistered,name:this.name.value?this.name.value:null};this.animalUpdateService.addAnimal(f).then(()=>{this.saveResult.message="Animal Saved",this.saveResult.success=!0,this.clearForm(),this.loadingService.setLoadingState(!1),this.handlePopover(this.previousFormValue?500:1e3)})}}else if(this.tagNumber.disable(),o){this.loadingService.setLoadingState(!0);const f={birthDate:this.dob.value,dam:this.dam.value,sire:{tagNumber:this.noSire()?"":this.sire.value},gender:this.gender.value,breed:this.breedService.isBreedCode(this.breed.value)?this.breed.value:this.breedService.getCodeFromBreed(this.breed.value),registered:this.isRegistered,name:this.name.value?this.name.value:null};this.animalUpdateService.updateAnimal(this.animal.tagNumber,f).then(()=>{this.saveResult.message="Animal Updated",this.saveResult.success=!0,this.loadingService.setLoadingState(!1),this.handlePopover(1e3)})}}))}getCSSForPopover(){return this.saveResult.success?"update-success":"update-error"}getCSSClassForDOB(){return this.dob.invalid&&this.dob.dirty?"is-invalid":this.dob.valid&&this.dob.dirty?"is-valid":void 0}getCSSClassForName(){var o;return this.name.valid&&this.name.dirty&&(null===(o=this.name.value)||void 0===o?void 0:o.length)>0?"is-valid":""}getCSSClassForBreed(){return this.breed.invalid&&this.breed.dirty?"is-invalid":this.breed.valid&&this.breed.dirty?"is-valid":void 0}getCSSForRegisteredNo(){return this.registered.invalid&&this.registered.dirty?"btn-outline-danger":"no"===this.registered.value?"active":void 0}getCSSForRegisteredYes(){return this.registered.invalid&&this.registered.dirty?"btn-outline-danger":"yes"===this.registered.value?"active":void 0}closeModal(){this.modals.get(V.n.Animal).close()}noSire(){return"UK"==this.sire.value||this.sire.value==this.noSireText}handlePopoverErrors(){const o=new j.X(null);return this.isAddMode||this.tagNumber.disable(),this.markAllAsDirty(),("UK"==this.sire.value||""==this.sire.value)&&this.sire.disable(),this.animalForm.valid?(this.sire.enable(),this.valuesChanged()?this.subs.add(this.$animals.pipe((0,Yt.q)(1)).subscribe(f=>{this.damNotExists(f)?this.warningService.show({header:"The dam tag you entered does not exist",body:"Continuing will add it to the database"}).subscribe(_=>{_?this.addDam(this.dam.value).then(()=>{this.loadingService.setLoadingState(!1),o.next(!0)}):o.next(_)}):this.enteredTagIsMale(f)&&!this.previousFormValue?this.warningService.show({header:"The animal entered for the dam is male",body:"Please edit it to continue",buttonText:"Go to edit",isError:!0}).subscribe(_=>{_?(o.next(!1),this.previousFormValue=this.animalForm.value,this.animal=this.getEnteredDam(f),this.isAddMode=!1,this.setData()):o.next(!1)}):o.next(!0)})):(this.saveResult.message="No changes made",this.saveResult.success=!1,this.handlePopover(3e3),o.next(!1))):(this.sire.enable(),this.saveResult.message="Please fix errors",this.saveResult.success=!1,this.handlePopover(3e3),o.next(!1)),o}getEnteredDam(o){return o.find(f=>f.tagNumber===this.dam.value)}enteredTagIsMale(o){var f;return"UK000000000000"!==this.dam.value&&(null===(f=o.find(_=>_.tagNumber===this.dam.value))||void 0===f?void 0:f.gender)===he.Y0.Male}damNotExists(o){return"UK000000000000"!==this.dam.value&&-1===o.findIndex(f=>f.tagNumber===this.dam.value)}addDam(o){const f={ai:[],birthDate:st(),calvingHistory:[],dam:null,gender:he.Y0.Female,managementTag:"null",sire:null,tagNumber:o,weightData:[],breed:"UNAV",registered:!1};return this.loadingService.setLoadingState(!0),this.animalUpdateService.addAnimal(f)}valuesChanged(){var o,f,_,w,k,P;return(null===(o=this.animal)||void 0===o?void 0:o.sire.tagNumber)!==this.convertSireValue(this.sire.value)||(null===(f=this.animal)||void 0===f?void 0:f.dam.tagNumber)!==this.dam.value||(null===(_=this.animal)||void 0===_?void 0:_.birthDate.format("yyyy-MM-DD"))!==this.dob.value||(null===(w=this.animal)||void 0===w?void 0:w.gender)!==this.gender.value||this.breedChanged()||(null===(k=this.animal)||void 0===k?void 0:k.registered)!==this.isRegistered||(null===(P=this.animal)||void 0===P?void 0:P.name)!==this.name.value}get isRegistered(){return"yes"===this.registered.value}breedChanged(){var o;return void 0===(null===(o=this.animal)||void 0===o?void 0:o.breed)||this.breedService.getBreedCode(this.animal.breed)!==this.breedService.getBreedCode(this.breed.value)}convertSireValue(o){return"No sire assigned"===o||"UK"===o?"null":o}setData(){this.isAddMode||(this.dob.setValue(this.animal.birthDate.format("yyyy-MM-DD")),this.dam.setValue(this.animal.dam.tagNumber),this.sire.setValue("null"!==this.animal.sire.tagNumber?this.animal.sire.tagNumber:this.noSireText),this.gender.setValue(this.animal.gender),this.breed.setValue(this.breedService.getBreedFromCode(this.animal.breed)),this.registered.setValue(this.animal.registered?"yes":"no"),this.name.setValue(this.animal.name))}setUpForm(){this.animalForm=this.fb.group({newTagNumber:this.fb.control(["UK"],{validators:[T.kI.pattern(/^UK\d{12}$/),T.kI.required],updateOn:"blur"}),gender:this.fb.control([],T.kI.required),dob:this.fb.control([],[T.kI.required,ys()]),breed:this.fb.control([],{validators:_s(this.breedService),updateOn:"blur"}),dam:this.fb.control(["UK"],{validators:T.kI.pattern(/^UK\d{12}$/),updateOn:"blur"}),sire:this.fb.control(["UK"],{validators:T.kI.pattern(/^UK\d{12}|UK|No sire assigned$/),updateOn:"blur"}),registered:this.fb.control([],T.kI.required),name:this.fb.control([],{})})}handlePopover(o){this.popover.popoverClass=this.getCSSForPopover(),this.popover.ngbPopover=this.saveResult.message,this.popover.open(),(0,ms.H)(o).subscribe(()=>{this.popover.close(),this.saveResult.success&&(this.previousFormValue?(this.isAddMode=!0,this.animalForm.setValue(this.previousFormValue),this.tagNumber.enable(),this.previousFormValue=null):this.closeModal())})}markAllAsDirty(){"UK"==this.sire.value||""==this.sire.value?this.sire.markAsPristine():this.sire.markAsDirty(),this.dam.markAsDirty(),this.tagNumber.markAsDirty(),this.dob.markAsDirty(),this.gender.markAsDirty(),this.breed.markAsDirty(),this.registered.markAsDirty(),this.name.markAsDirty()}trackModalEvents(){const o=this.modals.get(V.n.Animal);this.subs.add(o.onAnyCloseEventFinished.subscribe(()=>{this.modals.get(V.n.Animal).removeData(),this.clearForm()})),this.subs.add(this.modals.get(V.n.Animal).onOpenFinished.subscribe(()=>{this.isAddMode=this.modals.get(V.n.Animal).getData().isAdd,this.animalForm.enable(),this.setData()}))}clearForm(){this.animalForm.reset({newTagNumber:"UK",sire:"UK",dam:"UK"},{emitEvent:!1})}ngOnDestroy(){this.subs.unsubscribe()}get tagNumber(){return this.animalForm.get(Ke.TagNumber)}get gender(){return this.animalForm.get(Ke.GenderControl)}get sire(){return this.animalForm.get(Ke.Sire)}get dam(){return this.animalForm.get(Ke.Dam)}get dob(){return this.animalForm.get(Ke.DOB)}get breed(){return this.animalForm.get(Ke.Breed)}get registered(){return this.animalForm.get(Ke.Registered)}get name(){return this.animalForm.get(Ke.Name)}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(T.qu),i.Y36(ie.yh),i.Y36(ve.lu),i.Y36(ee.hP),i.Y36(ee.Rz),i.Y36(ee.qj),i.Y36(ee.hx))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-animal-modal"]],viewQuery:function(o,f){if(1&o&&i.Gf(Ol,5),2&o){let _;i.iGM(_=i.CRH())&&(f.popover=_.first)}},inputs:{animal:"animal"},decls:3,vars:1,consts:[["justify-content-center","","identifier","animalModal"],["animalModal",""],[4,"ngIf"],[1,"text-center"],[1,"cms-form"],[3,"formGroup"],["class","form-group",3,"ngClass",4,"ngIf"],[1,"mb-2"],["for","registered"],["id","registered",1,"btn-group","btn-group-toggle"],[1,"btn","btn-outline-primary","btn-sm",3,"ngClass"],["formControlName","registered","value","yes","type","radio","name","registered","id","yes","required",""],["formControlName","registered","value","no","type","radio","name","registered","id","no","required",""],["class","cms-invalid-feedback",4,"ngIf"],[1,"form-group"],["for","birthDate"],["formControlName","dob","type","date","name","dateOfBirth","id","dateOfBirth",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[3,"errors"],["for","name"],["formControlName","name","type","text","name","name","id","name",1,"form-control",3,"ngClass"],["for","breed"],["formControlName","breed","type","text","id","breed","list","breeds","onclick","this.select();",1,"form-control",3,"ngClass"],["id","breeds"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group",3,"ngClass"],["for","dams"],["type","text","name","dam","id","dam","formControlName","dam","pattern","^UK\\d{12}$","required","","autocapitalize","characters",1,"form-control"],["for","sire"],["type","text","name","sire","id","sire","formControlName","sire","pattern","^UK\\d{12}|UK|No sire assigned$","autocapitalize","characters",1,"form-control"],[1,"form-check",3,"ngClass"],["formControlName","gender","type","radio","value","M","name","gender","id","isMaleRadio","required","",1,"form-check-input"],["for","isMaleRadio",1,"form-check-label"],[1,"form-check","mb-3",3,"ngClass"],["formControlName","gender","type","radio","value","F","name","gender","id","isFemaleRadio","required","",1,"form-check-input"],["for","isFemaleRadio",1,"form-check-label"],[3,"errors","isRadio"],["ngbPopover","","placement","bottom","triggers","manual",1,"btn","btn-success",3,"click"],["p","ngbPopover"],[1,"btn","btn-danger","ml-3",3,"click"],["for","newTagNumber"],["formControlName","newTagNumber","type","text","name","tag","id","newTagNumber","pattern","^UK\\d{12}$","autocapitalize","characters",1,"form-control"],[1,"cms-invalid-feedback"],[3,"value"]],template:function(o,f){1&o&&(i.TgZ(0,"ngx-smart-modal",0,1),i.YNc(2,Rl,66,31,"div",2),i.qZA()),2&o&&(i.xp6(2),i.Q6J("ngIf",f.animal||f.isAddMode))},directives:[ve.Q3,F.O5,T._Y,T.JL,T.sg,F.mk,T.Fj,T.JJ,T.u,T.c5,ui,T._,T.Q7,F.sg,T.YN,T.Kr,ne.o8],styles:[""]}),l})();var Js=J(6632),Ll=J(2916),Zi=J(6053),ql=J(3489);function Vs(l,p=!1){return o=>o.lift(new Wl(l,p))}class Wl{constructor(p,o){this.predicate=p,this.inclusive=o}call(p,o){return o.subscribe(new jl(p,this.predicate,this.inclusive))}}class jl extends ql.L{constructor(p,o,f){super(p),this.predicate=o,this.inclusive=f,this.index=0}_next(p){const o=this.destination;let f;try{f=this.predicate(p,this.index++)}catch(_){return void o.error(_)}this.nextOrComplete(p,f)}nextOrComplete(p,o){const f=this.destination;Boolean(o)?f.next(p):(this.inclusive&&f.next(p),f.complete())}}const Yl=["errorPop"];function zl(l,p){if(1&l&&(i.TgZ(0,"option",42),i._uU(1),i.qZA()),2&l){const o=p.$implicit;i.s9C("value",o.tagNumber),i.xp6(1),i.hij(" ",o.tagNumber," ")}}const ja=function(l){return{"was-validated":l}};function Jl(l,p){if(1&l&&(i.TgZ(0,"div",38)(1,"select",39)(2,"option",40),i._uU(3,"Select calf..."),i.qZA(),i.YNc(4,zl,2,2,"option",41),i.qZA(),i.TgZ(5,"div",12),i._UZ(6,"cms-form-errors",17),i.qZA()()),2&l){const o=p.ngIf,f=i.oxw(2);i.Q6J("ngClass",i.VKq(4,ja,f.calfSelect.dirty)),i.xp6(4),i.Q6J("ngForOf",o),i.xp6(2),i.Q6J("errors",f.calfSelect.errors)("isRadio",!0)}}function Vl(l,p){if(1&l&&(i.TgZ(0,"div",38)(1,"label",43),i._uU(2,"Tag Number"),i.qZA(),i._UZ(3,"input",44),i.TgZ(4,"div",12),i._UZ(5,"cms-form-errors",13),i.qZA()()),2&l){const o=i.oxw(2);i.Q6J("ngClass",i.VKq(2,ja,o.calfTag.dirty)),i.xp6(5),i.Q6J("errors",o.calfTag.errors)}}function Hl(l,p){if(1&l&&(i.TgZ(0,"option",42),i._uU(1),i.qZA()),2&l){const o=p.$implicit;i.s9C("value",o.tagNumber),i.xp6(1),i.lnq(" ",o.name," - ",o.tagNumber," - ",o.breed," ")}}const Ql=function(l,p){return{"was-validated":l,"is-invalid":p}};function $l(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div",45)(1,"select",46)(2,"option",40),i._uU(3,"Select sire..."),i.qZA(),i.TgZ(4,"option",47),i.NdJ("click",function(){return i.CHM(o),i.oxw(2).addSire()}),i._uU(5,"Add new Sire..."),i.qZA(),i.YNc(6,Hl,2,4,"option",41),i.qZA()()}if(2&l){const o=p.ngIf,f=i.oxw(2);i.Q6J("ngClass",i.WLB(2,Ql,f.sire.dirty,f.sire.invalid&&f.sire.dirty)),i.xp6(6),i.Q6J("ngForOf",o)}}function Gl(l,p){if(1&l&&(i.TgZ(0,"div",48),i._UZ(1,"cms-form-errors",17),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("errors",o.registered.errors)("isRadio",!0)}}function Kl(l,p){if(1&l&&(i.TgZ(0,"div",48),i._UZ(1,"cms-form-errors",13),i.qZA()),2&l){const o=i.oxw(3);i.xp6(1),i.Q6J("errors",o.statErrors)}}function Xl(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div",49)(1,"strong"),i._uU(2,"No stats added - "),i.qZA(),i.TgZ(3,"button",50),i.NdJ("click",function(){return i.CHM(o),i.oxw(2).addStats()}),i._uU(4," Add Stats "),i.qZA(),i.YNc(5,Kl,2,1,"div",24),i.qZA()}if(2&l){const o=i.oxw(2);i.Q6J("ngClass",o.getCSSForCalvingStats()),i.xp6(5),i.Q6J("ngIf",o.getCSSForCalvingStats())}}function ed(l,p){1&l&&(i.TgZ(0,"div",18)(1,"strong"),i._uU(2,"Select calf to view stat"),i.qZA()())}function td(l,p){if(1&l&&(i.TgZ(0,"li",56)(1,"strong"),i._uU(2,"Reason:"),i.qZA(),i._uU(3),i.qZA()),2&l){const o=i.oxw(3);i.xp6(3),i.hij(" ",o.assistReason," ")}}function id(l,p){if(1&l&&(i.TgZ(0,"li",56)(1,"strong"),i._uU(2,"Assisted Feed:"),i.qZA(),i._uU(3),i.qZA()),2&l){const o=i.oxw(3);i.xp6(3),i.hij(" ",o.stat.drinkAssist?"Yes":"No"," ")}}function rd(l,p){if(1&l&&(i.TgZ(0,"li",56)(1,"strong"),i._uU(2,"Getting up:"),i.qZA(),i._uU(3),i.qZA()),2&l){const o=i.oxw(3);i.xp6(3),i.hij(" ",o.stat.gettingUp," ")}}function ad(l,p){if(1&l&&(i.TgZ(0,"li",56)(1,"strong"),i._uU(2,"Notes: \xa0"),i.qZA(),i._uU(3),i.qZA()),2&l){const o=i.oxw(3);i.xp6(3),i.hij(" ",o.truncNotes," ")}}function nd(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div",51,52)(2,"button",53),i._uU(3,"View Stat"),i.qZA(),i.TgZ(4,"div",54)(5,"ul",55)(6,"li",56)(7,"strong"),i._uU(8,"Alive:"),i.qZA(),i._uU(9),i.qZA(),i.TgZ(10,"li",56)(11,"strong"),i._uU(12,"Ease:"),i.qZA(),i._uU(13),i.qZA(),i.YNc(14,td,4,1,"li",57),i.TgZ(15,"li",56)(16,"strong"),i._uU(17,"Dam health:"),i.qZA(),i._uU(18),i.qZA(),i.YNc(19,id,4,1,"li",57),i.YNc(20,rd,4,1,"li",57),i.YNc(21,ad,4,1,"li",57),i.TgZ(22,"button",58),i.NdJ("click",function(){i.CHM(o);const _=i.MAs(1);return i.oxw(2).addStats(),_.close()}),i._uU(23," Edit Stat "),i.qZA()()()()}if(2&l){const o=i.oxw(2);i.xp6(9),i.hij(" ",o.stat.alive?"Alive":"Dead"," "),i.xp6(4),i.hij(" ",o.assistRequired," "),i.xp6(1),i.Q6J("ngIf",o.stat.assistanceReason),i.xp6(4),i.hij(" ",o.stat.damHealth," "),i.xp6(1),i.Q6J("ngIf",o.stat.alive),i.xp6(1),i.Q6J("ngIf",o.stat.alive),i.xp6(1),i.Q6J("ngIf",o.truncNotes)}}function od(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div")(1,"h4",5),i._uU(2),i.TgZ(3,"strong"),i._uU(4),i.qZA()(),i.TgZ(5,"div",6)(6,"form",7),i.YNc(7,Jl,7,6,"div",8),i.ALo(8,"async"),i.YNc(9,Vl,6,4,"div",8),i.TgZ(10,"div",9)(11,"label",10),i._uU(12,"Date of Birth"),i.qZA(),i._UZ(13,"input",11),i.TgZ(14,"div",12),i._UZ(15,"cms-form-errors",13),i.qZA()(),i._UZ(16,"cms-breeds-list",14),i.TgZ(17,"div",9)(18,"label",15),i._uU(19,"Sire"),i.qZA(),i.YNc(20,$l,7,5,"div",16),i.ALo(21,"async"),i.TgZ(22,"div",12),i._UZ(23,"cms-form-errors",17),i.qZA()(),i.TgZ(24,"div",18)(25,"label",19),i._uU(26,"Registered on BCMS - \xa0 "),i.qZA(),i.TgZ(27,"div",20)(28,"label",21),i._UZ(29,"input",22),i._uU(30,"Yes "),i.qZA(),i.TgZ(31,"label",21),i._UZ(32,"input",23),i._uU(33,"No "),i.qZA()(),i.YNc(34,Gl,2,2,"div",24),i.qZA(),i.TgZ(35,"div",25),i._UZ(36,"input",26),i.TgZ(37,"label",27),i._uU(38,"Male"),i.qZA()(),i.TgZ(39,"div",28),i._UZ(40,"input",29),i.TgZ(41,"label",30),i._uU(42,"Female"),i.qZA(),i.TgZ(43,"div",12),i._UZ(44,"cms-form-errors",31),i.qZA()(),i.TgZ(45,"h5"),i._uU(46,"Calving Statistic"),i.qZA(),i.YNc(47,Xl,6,2,"div",32),i.YNc(48,ed,3,0,"div",33),i.YNc(49,nd,24,7,"div",34),i.TgZ(50,"div")(51,"button",35,36),i.NdJ("click",function(){return i.CHM(o),i.oxw().save()}),i._uU(53," Save "),i.qZA(),i.TgZ(54,"button",37),i.NdJ("click",function(){return i.CHM(o),i.oxw().close()}),i._uU(55,"Cancel"),i.qZA()()()()()}if(2&l){const o=i.oxw();i.xp6(2),i.hij(" ",o.isAdd?"Add Birth":"Edit Births"," for "),i.xp6(2),i.Oqu(o.animal.tagNumber),i.xp6(2),i.Q6J("formGroup",o.birthForm),i.xp6(1),i.Q6J("ngIf",!o.isAdd&&i.lcZ(8,22,o.$calves)),i.xp6(2),i.Q6J("ngIf",o.isAdd),i.xp6(4),i.Q6J("ngClass",o.getCSSForDOB()),i.xp6(2),i.Q6J("errors",o.dob.errors),i.xp6(1),i.Q6J("form",o.birthForm)("controlName","calfBreed"),i.xp6(4),i.Q6J("ngIf",i.lcZ(21,24,o.$filteredSires)),i.xp6(3),i.Q6J("errors",o.sire.errors)("isRadio",!0),i.xp6(5),i.Q6J("ngClass",o.getCSSForRegisteredYes()),i.xp6(3),i.Q6J("ngClass",o.getCSSForRegisteredNo()),i.xp6(3),i.Q6J("ngIf",o.registered.invalid&&o.registered.dirty),i.xp6(1),i.Q6J("ngClass",i.VKq(26,ja,o.gender.dirty)),i.xp6(4),i.Q6J("ngClass",i.VKq(28,ja,o.gender.dirty)),i.xp6(5),i.Q6J("isRadio",!0)("errors",o.gender.errors),i.xp6(3),i.Q6J("ngIf",!o.stat&&o.isAdd||!o.isAdd&&!o.stat&&o.calfSelected),i.xp6(1),i.Q6J("ngIf",!o.stat&&!o.isAdd&&!o.calfSelected),i.xp6(1),i.Q6J("ngIf",!o.isAdd&&o.stat&&o.calfSelected||o.isAdd&&o.stat)}}var He=(()=>(function(l){l.CalfTag="calfTag",l.DOB="dob",l.Breed="calfBreed",l.Sire="calfSire",l.Gender="gender",l.Calves="calves",l.Registered="registered"}(He||(He={})),He))();let Cs=(()=>{class l{constructor(o,f,_,w,k,P,M){this.modalService=o,this.fb=f,this.animalService=_,this.store=w,this.breedService=k,this.warningService=P,this.loadingService=M,this.isAdd=!1,this.$filteredSires=new j.X(null),this.breeds=[],this.$calves=new Ll.y,this.stat=null,this.statErrors={stats:"Please add calving statistic"},this.saveResult={message:"",success:!0},this.calfSelected=!1,this.truncNotes="",this.newSire=!1,this.subs=new Ee.w,this.longLifeSubs=new Ee.w,this.breedSelected=!1,this.hasSaved=!1}ngOnInit(){this.$sires=this.store.pipe((0,ie.Ys)(wt.Of)),this.breeds=this.breedService.breedCodeObjects,this.setUpForm(),this.setInitialSires(),this.trackBreedChange(),this.sire.valueChanges.subscribe(o=>{"addNew"===o&&(this.sire.setValue(""),this.addSire())})}ngAfterViewInit(){this.trackModalEvents()}save(){console.warn(this.birthForm.getRawValue()),this.hasSaved=!0,this.subs.add(this.handleErrors().subscribe(o=>{if(o&&(0,Js.wc)(o)){const f=o;this.loadingService.setLoadingState(!0),this.isAdd?this.newSire?this.store.select((0,wt.wQ)(this.sire.value)).pipe((0,Yt.q)(1)).subscribe(_=>{this.animalService.addBull(_).then(()=>{this.saveAnimal(f)})}):this.saveAnimal(f):this.newSire?this.store.select((0,wt.wQ)(this.sire.value)).pipe((0,Yt.q)(1)).subscribe(_=>{this.animalService.addBull(_).then(()=>{this.updateAnimal(f)})}):this.updateAnimal(f)}}))}get assistReason(){const o=[];return this.stat.assistanceReason.forEach(f=>{switch(f){case he.qg.BigCalf:o.push("Big Calf");break;case he.qg.PoorPresentation:o.push(" Poor Presentation");break;case he.qg.NA:o.push("None")}}),o}get assistRequired(){switch(this.stat.assistance){case he.ae.Required:return"Assistance required";case he.ae.Vet:return"Vet required";case he.ae.None:return"No assistance"}}statSaved(o){var f;o&&((null===(f=o.calvingNotes)||void 0===f?void 0:f.length)>21&&(this.truncNotes=o.calvingNotes.slice(0,21)+"..."),this.stat=o)}close(){this.modalService.get(V.n.Birth).close()}addStats(){this.modalService.get(V.n.CalvingStats).open()}getCSSForDOB(){return this.dob.invalid&&this.dob.dirty?"is-invalid":this.dob.valid&&this.dob.dirty?"is-valid":void 0}getCSSForBreed(){return this.breed.invalid&&this.breed.dirty?"is-invalid":this.breed.valid&&this.breed.dirty?"is-valid":void 0}getCSSForCalvingStats(){return this.hasSaved&&!this.stat?"invalid-label":""}addSire(){this.sire.markAsPristine();const o=this.modalService.get(V.n.Sire);o.setData({isAdd:this.isAdd},!0),o.open()}updateAnimal(o){this.animalService.updateAnimal(this.calfSelect.value,o).then(()=>{this.saveResult.message="Calf updated",this.saveResult.success=!0,this.loadingService.setLoadingState(!1),this.handlePopover(1500)})}saveAnimal(o){this.animalService.addAnimal(o).then(()=>{this.saveResult.message="Calf added",this.saveResult.success=!0,this.loadingService.setLoadingState(!1),this.handlePopover(1500)})}handleErrors(){const o=new j.X(null);let f;return this.isAdd?this.calfSelect.disable():this.calfTag.disable(),this.markAllAsDirty(),this.birthForm.valid&&this.stat?(f=this.getNewCalf(),this.valuesEdited(f)?(0,Js.B_)(f.birthDate,"days")>28&&this.isAdd?this.warningService.show({header:"Entered age is more than 28 days"}).subscribe(_=>o.next(_&&f)):this.isAdd?this.store.pipe((0,ie.Ys)(Te.MV),(0,Yt.q)(1)).subscribe(_=>{this.animalExists(_)?this.warningService.show({header:`Animal with tag ${this.calfTag.value} already exists`,body:"Please check the tag number and try again.",isError:!0,showCloseButton:!1,buttonText:"Close"}).subscribe(()=>{o.next(!1)}):o.next(f)}):o.next(f):(this.saveResult.message="No changes made",this.saveResult.success=!1,this.handlePopover(3e3),o.next(!1))):(this.saveResult.message="Please fix errors",this.saveResult.success=!1,this.handlePopover(3e3),o.next(!1)),o}animalExists(o){return-1!==o.findIndex(f=>f.tagNumber===this.calfTag.value)}getNewCalf(){return{tagNumber:this.calfTag.value,managementTag:"null",damTag:this.animal.tagNumber,sire:{tagNumber:this.sire.value},birthDate:st(this.dob.value),gender:this.gender.value,breed:this.breedService.getBreedCode(this.breed.value),calvingStat:this.stat,ai:[],calvingHistory:[],weightData:[],registered:this.isRegistered}}getCSSForPopover(){return this.saveResult.success?"update-success":"update-error"}handlePopover(o){this.statPopover.popoverClass=this.getCSSForPopover(),this.statPopover.ngbPopover=this.saveResult.message,this.statPopover.open(),!this.isAdd&&this.saveResult.success&&this.resetForm(),this.subs.add((0,ms.H)(o).subscribe(()=>{this.statPopover.close(),this.isAdd&&this.saveResult.success&&this.close()}))}markAllAsDirty(){this.calfSelect.markAsDirty(),this.dob.markAsDirty(),this.breed.markAsDirty(),this.sire.markAsDirty(),this.gender.markAsDirty(),this.calfTag.markAsDirty(),this.registered.markAsDirty()}valuesEdited(o){var f,_,w,k,P;return o.birthDate.format("DD-MM-YYYY")!==(null===(f=this.selectedCalf)||void 0===f?void 0:f.birthDate.format("DD-MM-YYYY"))||o.breed!==(null===(_=this.selectedCalf)||void 0===_?void 0:_.breed)||o.sire.tagNumber!==(null===(w=this.selectedCalf)||void 0===w?void 0:w.sire.tagNumber)||o.gender!==(null===(k=this.selectedCalf)||void 0===k?void 0:k.gender)||this.statChanged()||o.registered!==(null===(P=this.selectedCalf)||void 0===P?void 0:P.registered)}statChanged(){var o;const f=null===(o=this.selectedCalf)||void 0===o?void 0:o.calvingStat;return this.stat.alive!==f.alive||this.stat.assistance!==f.assistance||this.stat.damHealth!==f.damHealth||this.stat.drinkAssist!==f.drinkAssist||this.stat.gettingUp!==f.gettingUp||this.stat.calvingNotes!==f.calvingNotes||this.reasonChanged()}reasonChanged(){var o;const f=null===(o=this.selectedCalf)||void 0===o?void 0:o.calvingStat.assistanceReason;return this.stat.assistanceReason.length!==f.length||!this.stat.assistanceReason.every(_=>-1!==f.findIndex(w=>w===_))}setInitialSires(){this.$sires.pipe(Vs(()=>!this.breedSelected,!0)).subscribe(o=>{this.$filteredSires.next(o)})}trackBreedChange(){this.longLifeSubs.add((0,Zi.aj)([this.$sires,this.breed.valueChanges]).subscribe(([o,f])=>{this.breedSelected=!0,this.$filteredSires.next(0===(null==f?void 0:f.length)?o:o.filter(_=>{var w;const k=null==f?void 0:f.toUpperCase(),P=null===(w=_.breed)||void 0===w?void 0:w.toUpperCase();return f&&(P===k||P===this.breedService.getCodeFromBreed(k))}))}))}trackCalfSelect(){this.subs.add((0,Zi.aj)([this.calfSelect.valueChanges,this.$calves]).subscribe(([o,f])=>{const _=f.find(w=>w.tagNumber===o);this.isAdd||(_?(this.calfSelected=!0,this.selectedCalf=_,this.calfTag.setValue(_.tagNumber),this.dob.setValue(_.birthDate.format("YYYY-MM-DD")),this.breed.setValue(this.breedService.getBreedFromCode(_.breed)),this.sire.setValue(_.sire.tagNumber),this.gender.setValue(_.gender),this.registered.setValue(_.registered?"yes":"no"),this.stat=_.calvingStat):(this.stat=null,this.calfSelected=!1,this.resetForm(!1)))}))}get isRegistered(){return"yes"===this.registered.value}getCSSForRegisteredNo(){return this.registered.invalid&&this.registered.dirty?"btn-outline-danger":"no"===this.registered.value?"active":void 0}getCSSForRegisteredYes(){return this.registered.invalid&&this.registered.dirty?"btn-outline-danger":"yes"===this.registered.value?"active":void 0}trackModalEvents(){this.modalService.get(V.n.Birth).onAnyCloseEventFinished.subscribe(()=>{this.subs.unsubscribe(),this.stat=null,this.hasSaved=!1,this.truncNotes="",this.resetForm(),this.breedSelected=!1,this.calfSelected=!1}),this.modalService.get(V.n.Birth).onOpen.subscribe(()=>{this.subs=new Ee.w}),this.modalService.get(V.n.Birth).onOpenFinished.subscribe(()=>{this.isAdd?(this.calfTag.enable(),this.calfSelect.disable()):(this.calfTag.disable(),this.calfSelect.enable()),this.$calves=this.store.pipe((0,ie.Ys)((0,Te.Rr)(this.animal.tagNumber))),this.trackCalfSelect(),this.setInitialSires()})}setUpForm(){this.birthForm=this.fb.group({calves:this.fb.control([]),calfTag:this.fb.control(["UK722218"],{validators:[T.kI.pattern(/^UK\d{12}$/),T.kI.required],updateOn:"blur"}),dob:this.fb.control([],[T.kI.required,ys()]),calfBreed:this.fb.control("",{validators:[T.kI.required,_s(this.breedService)],updateOn:"blur"}),calfSire:this.fb.control([],T.kI.required),gender:this.fb.control([],T.kI.required),registered:this.fb.control([],T.kI.required)})}resetForm(o=!0){this.birthForm.reset({calfTag:"UK722218",calves:"",calfSire:""},{emitEvent:o})}get dob(){return this.birthForm.get(He.DOB)}get calfTag(){return this.birthForm.get(He.CalfTag)}get breed(){return this.birthForm.get(He.Breed)}get sire(){return this.birthForm.get(He.Sire)}get gender(){return this.birthForm.get(He.Gender)}get calfSelect(){return this.birthForm.get(He.Calves)}get registered(){return this.birthForm.get(He.Registered)}ngOnDestroy(){this.longLifeSubs.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ve.lu),i.Y36(T.qu),i.Y36(ee.hP),i.Y36(ie.yh),i.Y36(ee.hx),i.Y36(ee.qj),i.Y36(ee.Rz))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-birth-modal"]],viewQuery:function(o,f){if(1&o&&i.Gf(Yl,5),2&o){let _;i.iGM(_=i.CRH())&&(f.statPopover=_.first)}},inputs:{animal:"animal",isAdd:"isAdd"},decls:5,vars:3,consts:[["identifier","birthModal"],["birthModal",""],[4,"ngIf"],[3,"stat","statSaved"],[3,"form","sireAdded"],[1,"text-center"],[1,"cms-form"],[3,"formGroup"],["class","form-group",3,"ngClass",4,"ngIf"],[1,"form-group"],["for","dob"],["type","date","formControlName","dob",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[3,"errors"],[3,"form","controlName"],["for","calfSire"],["class","input-group",3,"ngClass",4,"ngIf"],[3,"errors","isRadio"],[1,"mb-2"],["for","registered"],["id","registered",1,"btn-group","btn-group-toggle"],[1,"btn","btn-outline-primary","btn-sm",3,"ngClass"],["formControlName","registered","value","yes","type","radio","name","registered","id","yes","required",""],["formControlName","registered","value","no","type","radio","name","registered","id","no","required",""],["class","cms-invalid-feedback",4,"ngIf"],[1,"form-check",3,"ngClass"],["formControlName","gender","type","radio","value","M","name","gender","id","isMaleRadio","required","",1,"form-check-input"],["for","isMaleRadio",1,"form-check-label"],[1,"form-check","mb-3",3,"ngClass"],["formControlName","gender","type","radio","value","F","name","gender","id","isFemaleRadio","required","",1,"form-check-input"],["for","isFemaleRadio",1,"form-check-label"],[3,"isRadio","errors"],["class","mb-2",3,"ngClass",4,"ngIf"],["class","mb-2",4,"ngIf"],["ngbDropdown","","class","mb-2 d-inline-block",4,"ngIf"],["ngbPopover","Update Success!","placement","bottom","popoverClass","update-success","triggers","manual",1,"btn","btn-success","mr-3",3,"click"],["errorPop","ngbPopover"],[1,"btn","btn-danger",3,"click"],[1,"form-group",3,"ngClass"],["formControlName","calves","required","",1,"custom-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","tagNumber"],["name","tag","type","text","id","calfTagNumber","formControlName","calfTag","required","","pattern","^UK\\d{12}$",1,"form-control"],[1,"input-group",3,"ngClass"],["formControlName","calfSire","required","",1,"custom-select"],["value","addNew",2,"background-color","#ebebeb",3,"click"],[1,"cms-invalid-feedback"],[1,"mb-2",3,"ngClass"],[1,"btn","btn-primary","btn-sm",3,"click"],["ngbDropdown","",1,"mb-2","d-inline-block"],["statDrop","ngbDropdown"],["ngbDropdownToggle","",1,"btn","btn-primary"],["ngbDropdownMenu","",1,"stat-dropdown"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],[1,"list-group-item","list-group-item-action","active",3,"click"]],template:function(o,f){1&o&&(i.TgZ(0,"ngx-smart-modal",0,1),i.YNc(2,od,56,30,"div",2),i.qZA(),i.TgZ(3,"cms-calving-stats-modal",3),i.NdJ("statSaved",function(w){return f.statSaved(w)}),i.qZA(),i.TgZ(4,"cms-bull-modal",4),i.NdJ("sireAdded",function(w){return f.newSire=w}),i.qZA()),2&o&&(i.xp6(2),i.Q6J("ngIf",f.animal),i.xp6(1),i.Q6J("stat",f.stat),i.xp6(1),i.Q6J("form",f.birthForm))},styles:[".stat-dropdown[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content}.dropdown-menu[_ngcontent-%COMP%]{padding:0!important}.invalid-stat[_ngcontent-%COMP%]{color:#dc3545}.input-group-append[_ngcontent-%COMP%]{border-radius:.25rem!important}"]}),l})();function sd(l,p){if(1&l&&(i.TgZ(0,"div",49),i._UZ(1,"cms-form-errors",24),i.qZA()),2&l){const o=i.oxw();i.xp6(1),i.Q6J("errors",o.isAlive.errors)("isRadio",!0)}}function ld(l,p){if(1&l&&(i.TgZ(0,"div",49),i._UZ(1,"cms-form-errors",24),i.qZA()),2&l){const o=i.oxw();i.xp6(1),i.Q6J("errors",o.isAlive.errors)("isRadio",!0)}}const dd=function(l){return{"invalid-label":l}},Hs=function(l){return{disabled:l}};var Xe=(()=>(function(l){l.IsAlive="isAlive",l.EaseOfCalving="easeOfCalving",l.ReasonBigCalf="reasonBigCalf",l.ReasonPoorPres="reasonPoorPres",l.GettingUp="gettingUp",l.DrinkAssistance="drinkAssistance",l.DamHealth="damHealth",l.Notes="calvingNotes"}(Xe||(Xe={})),Xe))();let Qs=(()=>{class l{constructor(o,f){this.fb=o,this.modals=f,this.statSaved=new i.vpe,this.subs=new Ee.w,this.notesChanged=!1}ngOnInit(){this.setUpForm(),this.trackEaseOfCalving(),this.trackIsAlive(),this.trackNotesChange()}ngAfterViewInit(){this.modals.get(V.n.CalvingStats).onAnyCloseEventFinished.subscribe(()=>{this.resetForm()}),this.modals.get(V.n.CalvingStats).onOpenFinished.subscribe(()=>{this.stat&&this.setFormValues()})}save(){if(this.markAllAsDirty(),this.calvingStatForm.valid){const o={alive:this.alive,assistance:this.convertAssistance(),assistanceReason:this.convertReason(),damHealth:this.damHealth.value,drinkAssist:this.alive?this.convertDrinkAssist():null,gettingUp:this.alive?this.gettingUp.value:null,calvingNotes:this.notesChanged?this.notes.value:null};this.statSaved.emit(o),this.modals.get(V.n.CalvingStats).close()}}close(){this.statSaved.emit(!1),this.modals.get(V.n.CalvingStats).close()}getCSSForDrinkAssistYes(){return this.drinkAssistance.invalid&&this.drinkAssistance.dirty?"btn-outline-danger":this.drinkAssistance.disabled?"disabled":this.drinkAssistance.dirty&&"yes"===this.drinkAssistance.value?"active":void 0}getCSSForDrinkAssistNo(){return this.drinkAssistance.invalid&&this.drinkAssistance.dirty?["btn-outline-danger","invalid-label"]:this.drinkAssistance.disabled?"disabled":this.drinkAssistance.dirty&&"no"===this.drinkAssistance.value?"active":void 0}getCSSForIsAliveYes(){return this.isAlive.dirty&&this.alive?"active":this.isAlive.invalid&&this.isAlive.dirty?"btn-outline-danger":void 0}getCSSForIsAliveNo(){return this.isAlive.invalid&&this.isAlive.dirty?"btn-outline-danger":this.isAlive.dirty&&!this.alive?"active":void 0}getCSSForCalvingEase(){return this.calvingEase.invalid&&this.calvingEase.dirty?"is-invalid":this.calvingEase.valid&&this.calvingEase.dirty?"is-valid":void 0}trackNotesChange(){this.notes.valueChanges.subscribe(o=>{this.notesChanged=""!==o})}setFormValues(){this.isAlive.setValue(this.stat.alive?"alive":"dead"),this.calvingEase.setValue(this.stat.assistance),this.reasonBigCalf.setValue(this.convertReasonStatToForm(he.qg.BigCalf)),this.reasonPoorPres.setValue(this.convertReasonStatToForm(he.qg.PoorPresentation)),this.gettingUp.setValue(this.stat.gettingUp),this.drinkAssistance.setValue(this.getDrinkAssistanceVal()),this.damHealth.setValue(this.stat.damHealth),this.notes.setValue(this.stat.calvingNotes),this.stat.alive?(this.drinkAssistance.markAsDirty(),this.isAlive.markAsDirty()):this.isAlive.markAsDirty()}getDrinkAssistanceVal(){return this.stat.drinkAssist?"yes":null===this.stat.drinkAssist?"":"no"}convertReasonStatToForm(o){return-1!==this.stat.assistanceReason.findIndex(f=>f===o)}convertDrinkAssist(){return"yes"===this.drinkAssistance.value}convertAssistance(){switch(this.calvingEase.value){case"assistanceNone":return he.ae.None;case"assistance":return he.ae.Required;case"vet":return he.ae.Vet}}convertReason(){return this.reasonBigCalf.value?this.reasonPoorPres.value?[he.qg.BigCalf,he.qg.PoorPresentation]:[he.qg.BigCalf]:this.reasonPoorPres.value?[he.qg.PoorPresentation]:[he.qg.NA]}trackIsAlive(){this.subs.add(this.isAlive.valueChanges.subscribe(()=>{this.alive?(this.gettingUp.enable(),this.drinkAssistance.enable()):(this.gettingUp.disable(),this.drinkAssistance.disable(),this.gettingUp.setValue(5))}))}get alive(){return"alive"===this.isAlive.value}setUpForm(){this.calvingStatForm=this.fb.group({easeOfCalving:this.fb.control([],T.kI.required),reasonBigCalf:this.fb.control([]),reasonPoorPres:this.fb.control([]),isAlive:this.fb.control([],T.kI.required),gettingUp:this.fb.control(5,T.kI.required),drinkAssistance:this.fb.control([],T.kI.required),damHealth:this.fb.control(5,T.kI.required),calvingNotes:this.fb.control([])}),this.disableAssistReason(),this.resetAssistReason()}disableAssistReason(){this.reasonBigCalf.disable(),this.reasonPoorPres.disable()}enableAssistReason(){this.reasonBigCalf.enable(),this.reasonPoorPres.enable()}resetAssistReason(){this.reasonBigCalf.setValue(!1),this.reasonPoorPres.setValue(!1)}trackEaseOfCalving(){this.calvingEase.valueChanges.subscribe(o=>{o===he.ae.Required||o===he.ae.Vet?this.enableAssistReason():(this.disableAssistReason(),this.resetAssistReason())})}markAllAsDirty(){this.isAlive.markAsDirty(),this.calvingEase.markAsDirty(),this.gettingUp.markAsDirty(),this.drinkAssistance.markAsDirty(),this.damHealth.markAsDirty(),this.reasonBigCalf.markAsDirty(),this.reasonPoorPres.markAsDirty()}resetForm(){this.calvingStatForm.reset({gettingUp:5,damHealth:5})}get isAlive(){return this.calvingStatForm.get(Xe.IsAlive)}get calvingEase(){return this.calvingStatForm.get(Xe.EaseOfCalving)}get reasonPoorPres(){return this.calvingStatForm.get(Xe.ReasonPoorPres)}get reasonBigCalf(){return this.calvingStatForm.get(Xe.ReasonBigCalf)}get gettingUp(){return this.calvingStatForm.get(Xe.GettingUp)}get drinkAssistance(){return this.calvingStatForm.get(Xe.DrinkAssistance)}get damHealth(){return this.calvingStatForm.get(Xe.DamHealth)}get notes(){return this.calvingStatForm.get(Xe.Notes)}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(T.qu),i.Y36(ve.lu))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-calving-stats-modal"]],inputs:{stat:"stat"},outputs:{statSaved:"statSaved"},decls:91,vars:24,consts:[["identifier","calvingStats"],["calvingStats",""],[1,"text-center"],[1,"cms-form"],[3,"formGroup"],[1,"mb-2"],["for","isAlive",3,"ngClass"],["id","isAlive",1,"btn-group","btn-group-toggle"],[1,"btn","btn-outline-primary","btn-sm",3,"ngClass"],["formControlName","isAlive","value","alive","type","radio","name","isAlive","id","alive","required",""],["formControlName","isAlive","value","dead","type","radio","name","isAlive","id","dead","required",""],["class","cms-invalid-feedback",4,"ngIf"],[1,"row"],[1,"col"],["for","easeOfCalving"],["id","easeOfCalving",1,"form-check"],["formControlName","easeOfCalving","type","radio","name","easeOfCalving","id","assistanceNone","value","assistanceNone",1,"form-check-input",3,"ngClass"],["for","assistanceNone",1,"form-check-label"],[1,"form-check"],["formControlName","easeOfCalving","type","radio","name","easeOfCalving","id","assistanceRequired","value","assistance",1,"form-check-input",3,"ngClass"],["for","assistanceRequired",1,"form-check-label"],["formControlName","easeOfCalving","type","radio","name","easeOfCalving","id","assistanceVet","value","vet",1,"form-check-input",3,"ngClass"],["for","assistanceVet",1,"form-check-label"],[1,"invalid-feedback"],[3,"errors","isRadio"],["for","assistanceReason"],["id","assistanceReason",1,"form-check"],["formControlName","reasonBigCalf","type","checkbox","name","assistanceReason","id","bigCalf","value","bigCalf",1,"form-check-input"],["for","bigCalf",1,"form-check-label"],["formControlName","reasonPoorPres","type","checkbox","name","assistanceReason","id","poorPresentation","value","poorPresentation",1,"form-check-input"],["for","poorPresentation",1,"form-check-label"],["for","calvingNotes",1,"mt-2"],["formControlName","calvingNotes","id","calvingNotes","rows","3",1,"form-control",2,"resize","none"],["for","vigour"],[1,"form-group"],["for","gettingUp",1,"range-label",3,"ngClass"],[1,"input-group"],["formControlName","gettingUp","type","range","name","gettingUp","id","gettingUp","min","1","max","5","step","1",1,"form-control-range","w-50"],[1,"input-group-append","ml-2"],[1,"input-group-text",3,"ngClass"],["for","firstDrink",3,"ngClass"],["id","firstDrink",1,"btn-group","btn-group-toggle","ml-2","mb-2"],["formControlName","drinkAssistance","value","yes","type","radio","name","drinkAssistance","id","firstDrink"],["formControlName","drinkAssistance","value","no","type","radio","name","drinkAssistance","id","no"],["for","damHealth"],["formControlName","damHealth","type","range","name","damHealth","id","damHealth","min","1","max","5","step","1",1,"form-control-range","w-50"],[1,"input-group-text"],[1,"btn","btn-success","mr-3",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"cms-invalid-feedback"]],template:function(o,f){1&o&&(i.TgZ(0,"ngx-smart-modal",0,1)(2,"h4",2),i._uU(3,"Calving Stat"),i.qZA(),i.TgZ(4,"div",3)(5,"form",4)(6,"div",5)(7,"label",6)(8,"strong"),i._uU(9,"Calf Alive - "),i.qZA(),i._uU(10,"\xa0 "),i.qZA(),i.TgZ(11,"div",7)(12,"label",8),i._UZ(13,"input",9),i._uU(14,"Yes "),i.qZA(),i.TgZ(15,"label",8),i._UZ(16,"input",10),i._uU(17,"No "),i.qZA()(),i.YNc(18,sd,2,2,"div",11),i.qZA(),i.TgZ(19,"div",12)(20,"div",13)(21,"label",14)(22,"strong"),i._uU(23,"Ease of Calving"),i.qZA()(),i.TgZ(24,"div",15),i._UZ(25,"input",16),i.TgZ(26,"label",17),i._uU(27,"No assistance required"),i.qZA()(),i.TgZ(28,"div",18),i._UZ(29,"input",19),i.TgZ(30,"label",20),i._uU(31,"Assistance required"),i.qZA()(),i.TgZ(32,"div",18),i._UZ(33,"input",21),i.TgZ(34,"label",22),i._uU(35,"Vet required"),i.qZA(),i.TgZ(36,"div",23),i._UZ(37,"cms-form-errors",24),i.qZA()()(),i.TgZ(38,"div",13)(39,"label",25)(40,"strong"),i._uU(41,"Assistance Reason"),i.qZA()(),i.TgZ(42,"div",26),i._UZ(43,"input",27),i.TgZ(44,"label",28),i._uU(45,"Big calf"),i.qZA()(),i.TgZ(46,"div",18),i._UZ(47,"input",29),i.TgZ(48,"label",30),i._uU(49,"Poor presentation"),i.qZA()(),i.TgZ(50,"label",31)(51,"strong"),i._uU(52,"Notes"),i.qZA()(),i._UZ(53,"textarea",32),i.qZA()(),i.TgZ(54,"label",33)(55,"strong"),i._uU(56,"Vigour"),i.qZA()(),i.TgZ(57,"div",34)(58,"label",35),i._uU(59,"Getting up (1 slow - 5 fast"),i.qZA(),i.TgZ(60,"div",36),i._UZ(61,"input",37),i.TgZ(62,"div",38)(63,"div",39),i._uU(64),i.qZA()()()(),i.TgZ(65,"label",40),i._uU(66,"First feed assisted - "),i.qZA(),i.TgZ(67,"div",41)(68,"label",8),i._UZ(69,"input",42),i._uU(70,"Yes "),i.qZA(),i.TgZ(71,"label",8),i._UZ(72,"input",43),i._uU(73,"No "),i.qZA()(),i.YNc(74,ld,2,2,"div",11),i.TgZ(75,"div",34)(76,"label",44)(77,"strong"),i._uU(78,"Dam health "),i.qZA(),i._uU(79,"(1 worst - 5 best)"),i.qZA(),i.TgZ(80,"div")(81,"div",36),i._UZ(82,"input",45),i.TgZ(83,"div",38)(84,"div",46),i._uU(85),i.qZA()()()()(),i.TgZ(86,"div")(87,"button",47),i.NdJ("click",function(){return f.save()}),i._uU(88,"Save"),i.qZA(),i.TgZ(89,"button",48),i.NdJ("click",function(){return f.close()}),i._uU(90,"Cancel"),i.qZA()()()()()),2&o&&(i.xp6(5),i.Q6J("formGroup",f.calvingStatForm),i.xp6(2),i.Q6J("ngClass",i.VKq(18,dd,f.isAlive.invalid&&f.isAlive.dirty)),i.xp6(5),i.Q6J("ngClass",f.getCSSForIsAliveYes()),i.xp6(3),i.Q6J("ngClass",f.getCSSForIsAliveNo()),i.xp6(3),i.Q6J("ngIf",f.isAlive.invalid&&f.isAlive.dirty),i.xp6(7),i.Q6J("ngClass",f.getCSSForCalvingEase()),i.xp6(4),i.Q6J("ngClass",f.getCSSForCalvingEase()),i.xp6(4),i.Q6J("ngClass",f.getCSSForCalvingEase()),i.xp6(4),i.Q6J("errors",f.calvingEase.errors)("isRadio",!0),i.xp6(21),i.Q6J("ngClass",i.VKq(20,Hs,f.gettingUp.disabled)),i.xp6(5),i.Q6J("ngClass",i.VKq(22,Hs,f.gettingUp.disabled)),i.xp6(1),i.hij(" ",f.gettingUp.value," "),i.xp6(1),i.Q6J("ngClass",f.getCSSForDrinkAssistNo()),i.xp6(3),i.Q6J("ngClass",f.getCSSForDrinkAssistYes()),i.xp6(3),i.Q6J("ngClass",f.getCSSForDrinkAssistNo()),i.xp6(3),i.Q6J("ngIf",f.drinkAssistance.invalid&&f.drinkAssistance.dirty),i.xp6(11),i.Oqu(f.damHealth.value))},directives:[ve.Q3,T._Y,T.JL,T.sg,F.mk,T.Fj,T._,T.JJ,T.u,T.Q7,F.O5,ui,T.Wl,T.eT],styles:[".border[_ngcontent-%COMP%]{border-width:2px!important}.disabled[_ngcontent-%COMP%]{color:#6c757d}.input-group-text[_ngcontent-%COMP%]{border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important}"]}),l})();function ud(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"button",6),i.NdJ("click",function(){return i.CHM(o),i.oxw(2).cancelClick()}),i._uU(1),i.qZA()}if(2&l){const o=i.oxw(2);i.xp6(1),i.hij(" ",o.toast.isError?"Close":"Cancel"," ")}}function cd(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div")(1,"strong"),i._uU(2),i.qZA(),i.TgZ(3,"div"),i._uU(4),i.qZA(),i.TgZ(5,"div",3)(6,"button",4),i.NdJ("click",function(){return i.CHM(o),i.oxw().continueClick()}),i._uU(7),i.qZA(),i.YNc(8,ud,2,1,"button",5),i.qZA()()}if(2&l){const o=i.oxw();i.xp6(2),i.Oqu(o.toast.header),i.xp6(2),i.Oqu(o.toast.body),i.xp6(2),i.Q6J("ngClass",o.getCSSForButton()),i.xp6(1),i.hij(" ",o.toast.buttonText,""),i.xp6(1),i.Q6J("ngIf",o.toast.showCloseButton)}}let Oi=(()=>{class l{constructor(o,f){this.warningService=o,this.modals=f,this.toast=null,this.subs=new Ee.w}ngAfterViewInit(){const o=this.modals.get(V.n.Warning);this.subs.add(o.onDataAdded.subscribe(f=>{this.toast=f})),this.subs.add(o.onAnyCloseEvent.subscribe(()=>{o.removeData()}))}continueClick(){this.warningService.setResult(!0),this.modals.get(V.n.Warning).close()}cancelClick(){this.warningService.setResult(!1),this.modals.get(V.n.Warning).close()}getCSSForButton(){var o;return(null===(o=this.toast)||void 0===o?void 0:o.isError)?"btn-danger":"btn-warning"}getCSSForWarning(){var o;return(null===(o=this.toast)||void 0===o?void 0:o.isError)?"error":"warning"}ngOnDestroy(){this.subs.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ee.qj),i.Y36(ve.lu))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-warning-display"]],decls:3,vars:6,consts:[["identifier","warningModal",3,"ngClass","closable","escapable","dismissable","customClass"],["warningModal",""],[4,"ngIf"],[1,"mt-2"],[1,"btn","mr-2",3,"ngClass","click"],["class","btn btn-dark",3,"click",4,"ngIf"],[1,"btn","btn-dark",3,"click"]],template:function(o,f){1&o&&(i.TgZ(0,"ngx-smart-modal",0,1),i.YNc(2,cd,9,5,"div",2),i.qZA()),2&o&&(i.Q6J("ngClass",f.getCSSForWarning())("closable",!1)("escapable",!1)("dismissable",!1)("customClass","nsm-centered"),i.xp6(2),i.Q6J("ngIf",f.toast))},directives:[ve.Q3,F.mk,F.O5],styles:[".nsm-content[_ngcontent-%COMP%]{background-color:#ffc107}.modal-background[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#ffc107}"]}),l})();function hd(l,p){if(1&l&&(i.TgZ(0,"option",7),i._uU(1),i.qZA()),2&l){const o=p.$implicit;i.s9C("value",o.code),i.xp6(1),i.hij(" ",o.breed," ")}}let As=(()=>{class l{constructor(o){this.breedService=o,this.controlName="breed",this.breeds=[]}ngOnInit(){this.breeds=this.breedService.breedCodeObjects}getCSSForBreed(){return this.breed.invalid&&this.breed.dirty?"is-invalid":this.breed.valid&&this.breed.dirty?"is-valid":void 0}get breed(){return this.form.get(this.controlName)}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ee.hx))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-breeds-list"]],inputs:{form:"form",controlName:"controlName"},decls:8,vars:5,consts:[[1,"form-group",3,"formGroup"],["for","breed"],["type","text","list","breeds","onclick","this.select();",1,"form-control",2,"text-transform","uppercase",3,"formControlName","ngClass"],[1,"invalid-feedback"],[3,"errors"],["id","breeds"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,f){1&o&&(i.TgZ(0,"div",0)(1,"label",1),i._uU(2,"Breed"),i.qZA(),i._UZ(3,"input",2),i.TgZ(4,"div",3),i._UZ(5,"cms-form-errors",4),i.qZA(),i.TgZ(6,"datalist",5),i.YNc(7,hd,2,2,"option",6),i.qZA()()),2&o&&(i.Q6J("formGroup",f.form),i.xp6(3),i.Q6J("formControlName",f.controlName)("ngClass",f.getCSSForBreed()),i.xp6(2),i.Q6J("errors",f.breed.errors),i.xp6(2),i.Q6J("ngForOf",f.breeds))},directives:[T.JL,T.sg,T.Fj,T.JJ,T.u,F.mk,ui,F.sg,T.YN,T.Kr],styles:[""]}),l})();const fd=["errorPop"],$s=function(l){return{"was-validated":l}};let ws=(()=>{class l{constructor(o,f,_,w,k){this.modalService=o,this.formBuilder=f,this.store=_,this.warningService=w,this.breedService=k,this.sireAdded=new i.vpe,this.isAdd=!1,this.bullForm=new T.cw({}),this.isNewBull=!1,this.subs=new Ee.w}ngOnInit(){this.bullForm=this.formBuilder.group({tagNumber:this.formBuilder.control(["UK"],{validators:[T.kI.pattern(/^UK\d{12}$/),T.kI.required],updateOn:"blur"}),breed:this.formBuilder.control([""],{validators:[T.kI.compose([T.kI.required,_s(this.breedService),this.isSameBreedValidator()])],updateOn:"blur"}),name:["",T.kI.required]}),this.bullForm.get("breed").valueChanges.subscribe(o=>{console.warn(o)})}ngAfterViewInit(){this.modalService.get(V.n.Sire).onOpen.subscribe(()=>{this.isAdd=this.modalService.getModalData(V.n.Sire).isAdd,console.warn(this.modalService.getModalData(V.n.Sire)),this.bullForm.reset({tagNumber:"UK"}),this.isAdd||this.setData()})}get tag(){return this.bullForm.get("tagNumber")}get name(){return this.bullForm.get("name")}get breed(){return this.bullForm.get("breed")}save(){this.name.markAsDirty(),this.tag.markAsDirty(),this.breed.markAsDirty(),this.bullForm.valid?this.subs.add(this.store.select(wt.Of).subscribe(o=>{const f=o.findIndex(_=>_.tagNumber===this.tag.value||_.name===this.name.value);if(f>-1&&!this.isNewBull){const _=o[f].tagNumber===this.tag.value;this.warningService.show({header:`Bull with that ${_?"tag":"name"} already exists`,body:_?"Please enter a different tag number":"Are you sure you want to continue?",isError:_}).subscribe(w=>{w&&this.saveBull()})}else this.saveBull()})):this.errorPopover.open()}close(){this.modalService.get(V.n.Sire).close()}setData(){this.bullForm.setValue({tagNumber:this.bull.tagNumber,breed:this.bull.breed,name:this.bull.name}),this.breed.disable()}saveBull(){this.sireAdded.emit(!0),this.isNewBull=!0,this.form.get(He.Sire).setValue(this.tag.value),this.breed.setValue(this.breed.value.toUpperCase()),this.store.dispatch(new wt.m0({bull:this.bullForm.getRawValue()})),this.close()}isSameBreedValidator(){return o=>{var f,_;const w=null===(f=this.form)||void 0===f?void 0:f.get(He.Breed).value;return""===w?null:(null==w?void 0:w.toString().toUpperCase())!==(null===(_=o.value)||void 0===_?void 0:_.toString().toUpperCase())?{notSameBreed:!0}:null}}ngOnDestroy(){this.subs.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ve.lu),i.Y36(T.qu),i.Y36(ie.yh),i.Y36(ee.qj),i.Y36(ee.hx))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-bull-modal"]],viewQuery:function(o,f){if(1&o&&i.Gf(fd,5),2&o){let _;i.iGM(_=i.CRH())&&(f.errorPopover=_.first)}},inputs:{form:"form",bull:"bull"},outputs:{sireAdded:"sireAdded"},decls:26,vars:11,consts:[["identifier","sireModal"],["sireModal",""],[1,"text-center"],[1,"cms-form"],[3,"formGroup"],[1,"form-group",3,"ngClass"],["for","tagNumber"],["name","tag","type","text","id","tagNumber","formControlName","tagNumber","required","","pattern","^UK\\d{12}$",1,"form-control"],[1,"invalid-feedback"],[3,"errors"],[3,"form"],["for","name"],["type","text","id","name","formControlName","name","required","",1,"form-control"],["ngbPopover","Please fix errors","placement","bottom","popoverClass","update-error","triggers","manual",1,"btn","btn-success","mr-3",3,"click"],["errorPop","ngbPopover"],[1,"btn","btn-danger",3,"click"]],template:function(o,f){1&o&&(i.TgZ(0,"ngx-smart-modal",0,1)(2,"h4",2),i._uU(3),i.qZA(),i.TgZ(4,"div",3)(5,"form",4)(6,"div",5)(7,"label",6),i._uU(8,"Tag Number"),i.qZA(),i._UZ(9,"input",7),i.TgZ(10,"div",8),i._UZ(11,"cms-form-errors",9),i.qZA()(),i._UZ(12,"cms-breeds-list",10),i.TgZ(13,"div",5)(14,"label",11),i._uU(15,"Name"),i.qZA(),i._UZ(16,"input",12),i.TgZ(17,"div",8),i._UZ(18,"cms-form-errors",9),i.qZA()(),i.TgZ(19,"div")(20,"button",13,14),i.NdJ("click",function(){return f.save()}),i._uU(22," Save "),i.qZA(),i.TgZ(23,"button",15),i.NdJ("click",function(){return f.close()}),i._uU(24,"Cancel"),i.qZA()()()()(),i._UZ(25,"cms-warning-display")),2&o&&(i.xp6(3),i.hij(" ",f.isAdd?"Add Sire":"Edit Sire"," "),i.xp6(2),i.Q6J("formGroup",f.bullForm),i.xp6(1),i.Q6J("ngClass",i.VKq(7,$s,f.tag.dirty)),i.xp6(5),i.Q6J("errors",f.tag.errors),i.xp6(1),i.Q6J("form",f.bullForm),i.xp6(1),i.Q6J("ngClass",i.VKq(9,$s,f.name.dirty)),i.xp6(5),i.Q6J("errors",f.name.errors))},directives:[ve.Q3,T._Y,T.JL,T.sg,F.mk,T.Fj,T.JJ,T.u,T.Q7,T.c5,ui,As,ne.o8,Oi],styles:[""]}),l})(),gd=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=i.oAB({type:l}),l.\u0275inj=i.cJS({imports:[[F.ez,T.UX]]}),l})(),vd=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=i.oAB({type:l}),l.\u0275inj=i.cJS({imports:[[F.ez,ve.Hd.forChild(),T.UX,ne._A,ne.dT,ne.XC,gd],F.ez,ve.Hd]}),l})();i.B6R(Cs,[ve.Q3,F.O5,T._Y,T.JL,T.sg,F.mk,T.EJ,T.JJ,T.u,T.Q7,T.YN,T.Kr,F.sg,ui,T.Fj,T.c5,As,T._,ne.jt,ne.iD,ne.Vi,ne.o8,Qs,ws],[F.Ov]);var Tt=J(4055),ae=J(1681),pd=J(910),md=J(1086),Bi=J(4850),bd=J(1709);function _d(l,p){if(1&l&&(i.TgZ(0,"span",10)(1,"strong"),i._uU(2),i.qZA()()),2&l){const o=i.oxw().$implicit;i.xp6(2),i.hij(" ",o.tagNumber," ")}}function yd(l,p){if(1&l&&(i.TgZ(0,"ul",11)(1,"li",12)(2,"strong"),i._uU(3),i.qZA()(),i.TgZ(4,"li",12),i._uU(5),i.qZA()()),2&l){const o=i.oxw().$implicit;i.xp6(3),i.hij(" ",o.tagNumber," "),i.xp6(2),i.hij(" ",o.name?o.name:""," ")}}function xd(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",13),i.NdJ("click",function(){return i.CHM(o),i.oxw(3).openEditModal()}),i._uU(1),i.qZA()}if(2&l){const o=i.oxw(3);i.xp6(1),i.hij("Edit ",o.pillButtonText,"")}}function Cd(l,p){1&l&&i._UZ(0,"span")}function Ad(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",14),i.NdJ("click",function(){i.CHM(o);const _=i.oxw().$implicit;return i.oxw(2).openAddModal(_)}),i._uU(1),i.qZA()}if(2&l){const o=i.oxw(3);i.xp6(1),i.AsE("","registration"===o.page?"":"Add"," ",o.pillButtonText,"")}}function wd(l,p){1&l&&i._UZ(0,"span")}function Td(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"button",4),i.NdJ("click",function(){const w=i.CHM(o).$implicit;return i.oxw(2).selectAnimal(w)}),i.YNc(1,_d,3,1,"span",5),i.YNc(2,yd,6,2,"ul",6),i.YNc(3,xd,2,1,"span",7),i.YNc(4,Cd,1,0,"span",8),i.YNc(5,Ad,2,2,"span",9),i.YNc(6,wd,1,0,"span",8),i.qZA()}if(2&l){const o=p.$implicit,f=i.oxw(2);i.Q6J("ngClass",f.getCSSForButton(o)),i.xp6(1),i.Q6J("ngIf",!o.name),i.xp6(1),i.Q6J("ngIf",o.name),i.xp6(1),i.Q6J("ngIf","registration"!==f.page),i.xp6(1),i.Q6J("ngIf","Animal"===f.pillButtonText),i.xp6(1),i.Q6J("ngIf","Animal"!==f.pillButtonText),i.xp6(1),i.Q6J("ngIf","registration"===f.page)}}function Sd(l,p){if(1&l&&(i.TgZ(0,"ul",1),i._UZ(1,"input",2),i.YNc(2,Td,7,7,"button",3),i.qZA()),2&l){const o=p.ngIf,f=i.oxw();i.Q6J("formGroup",f.searchBarGroup),i.xp6(2),i.Q6J("ngForOf",o)}}let Ya=(()=>{class l{constructor(o,f){this.fb=o,this.store=f,this.add=new i.vpe,this.edit=new i.vpe,this.animalSelected=new i.vpe,this.displayBulls=!1,this.searchBarGroup=new T.cw({}),this.searchedAnimals$=new j.X([]),this.$currentAnimal=new j.X(null),this.subscriptions=new Ee.w,this.searched=!1}ngOnInit(){this.trackAnimalSelect(),this.populateAnimals(),this.setUpList(),this.trackSearch()}openAddModal(o){this.add.emit(o)}openEditModal(){this.edit.emit(null)}selectAnimal(o){var f;(this.page===ae.k.Animals||o.tagNumber!==(null===(f=this.currentAnimal)||void 0===f?void 0:f.tagNumber))&&(this.currentAnimal=o,this.pushNextAnimal(o))}get pillButtonText(){switch(this.page){case ae.k.Weight:return"Weights";case ae.k.Animals:return"Animal";case ae.k.Births:return"Births";case ae.k.Registration:return"Register Calf";default:return""}}getCSSForButton(o){var f;return o.tagNumber===(null===(f=this.currentAnimal)||void 0===f?void 0:f.tagNumber)?"active":""}populateAnimals(){this.animals$=this.page===ae.k.Births?this.store.pipe((0,ie.Ys)(Te.X0)).pipe((0,Bi.U)(o=>o.filter(f=>this.notSold(f)))):this.page===ae.k.Registration?this.store.pipe((0,ie.Ys)(Te.Rl)):this.page===ae.k.Animals?(0,Zi.aj)([this.store.select(Te.MV),this.store.select(wt.Of)]).pipe((0,Bi.U)(([o,f])=>[...o,...f])):this.store.pipe((0,ie.Ys)(Te.MV))}notSold(o){return o.weightData.every(f=>!f.weightType.isSale)}pushNextAnimal(o){console.warn(o),this.subscriptions.add(this.getAnimal(o.tagNumber).pipe((0,bd.zg)(f=>(0,pd.s)(()=>!!f,(0,md.of)(f),this.getBull(o.tagNumber)))).subscribe(f=>{console.warn(f),this.$currentAnimal.next(f)}))}getAnimal(o){return this.store.pipe((0,ie.Ys)((0,Te.nk)(o)))}getBull(o){return this.store.select((0,wt.wQ)(o))}setUpList(){this.searchBarGroup=this.fb.group({searchBar:this.fb.control([])})}trackAnimalSelect(){this.subscriptions.add(this.$currentAnimal.subscribe(o=>{this.animalSelected.emit(o)}))}trackSearch(){this.subscriptions.add(this.animals$.pipe(Vs(()=>!this.searched,!0)).subscribe(o=>this.searchedAnimals$.next(o))),this.subscriptions.add((0,Zi.aj)([this.searchBarValChange,this.animals$]).subscribe(([o,f])=>{this.searched=!0,o.length>2?(document.getElementById("animalList")&&(document.getElementById("animalList").scrollTop=0),this.searchedAnimals$.next(this.getSearchedAnimals(f,o)),this.$currentAnimal.next(this.searchedAnimals$.value.find(_=>{var w;return _.tagNumber===(null===(w=this.currentAnimal)||void 0===w?void 0:w.tagNumber)}))):(this.searchedAnimals$.next(f),this.$currentAnimal.next(f.find(_=>{var w;return _.tagNumber===(null===(w=this.currentAnimal)||void 0===w?void 0:w.tagNumber)})))}))}getSearchedAnimals(o,f){return o.filter(_=>{var w;return _.tagNumber.toLowerCase().includes(f.toLowerCase())||(null===(w=_.name)||void 0===w?void 0:w.toLowerCase().includes(f.toLowerCase()))})}get searchBarValChange(){return this.searchBarGroup.get("searchBar").valueChanges}ngOnDestroy(){this.subscriptions.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(T.qu),i.Y36(ie.yh))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-animal-list"]],inputs:{page:"page",displayBulls:"displayBulls"},outputs:{add:"add",edit:"edit",animalSelected:"animalSelected"},decls:3,vars:3,consts:[["class","list-group cms-animal-list","id","animalList",3,"formGroup",4,"ngIf"],["id","animalList",1,"list-group","cms-animal-list",3,"formGroup"],["type","text","placeholder","Search...","formControlName","searchBar",1,"list-group-item","animal-button","cms-sticky"],["class","list-group-item list-group-item-action d-flex justify-content-between align-items-center animal-button",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center","animal-button",3,"ngClass","click"],["class","mr-1",4,"ngIf"],["class","mr-1 list-group list-group-flush",4,"ngIf"],["class","btn badge badge-info badge-pill align-self-center",3,"click",4,"ngIf"],[4,"ngIf"],["class","btn badge badge-success badge-pill ml-1",3,"click",4,"ngIf"],[1,"mr-1"],[1,"mr-1","list-group","list-group-flush"],[1,"list-group"],[1,"btn","badge","badge-info","badge-pill","align-self-center",3,"click"],[1,"btn","badge","badge-success","badge-pill","ml-1",3,"click"]],template:function(o,f){1&o&&(i.YNc(0,Sd,3,2,"ul",0),i.ALo(1,"async"),i._UZ(2,"cms-warning-display")),2&o&&i.Q6J("ngIf",i.lcZ(1,1,f.searchedAnimals$))},directives:[F.O5,T.JL,T.sg,T.Fj,T.JJ,T.u,F.sg,F.mk,Oi],pipes:[F.Ov],styles:[".animal-button[_ngcontent-%COMP%]{max-width:450px;font-size:clamp(13px,3vw,17px);min-width:-webkit-min-content;min-width:-moz-min-content;min-width:min-content}.badge-pill[_ngcontent-%COMP%]{font-size:90%;font-weight:600}.list-group-flush[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{position:relative;display:block;padding:0;background-color:#fff;border:0px solid rgba(0,0,0,.125)}"]}),l})();var kd=J(8896);function Md(l,p){if(1&l&&(i.TgZ(0,"li",6)(1,"strong"),i._uU(2,"Management Tag - "),i.qZA(),i._uU(3),i.qZA()),2&l){const o=i.oxw().ngIf;i.xp6(3),i.hij(" ",o.managementTag," ")}}function Dd(l,p){if(1&l&&(i.TgZ(0,"li",6)(1,"strong"),i._uU(2,"Name - "),i.qZA(),i._uU(3),i.qZA()),2&l){const o=i.oxw().ngIf;i.xp6(3),i.hij(" ",o.name," ")}}function Nd(l,p){if(1&l&&(i.TgZ(0,"li",6)(1,"strong"),i._uU(2,"Date of Birth - "),i.qZA(),i._uU(3),i.ALo(4,"date"),i.qZA()),2&l){const o=i.oxw().ngIf;i.xp6(3),i.hij("",i.xi3(4,1,o.birthDate,"dd MMM yyyy")," ")}}function Fd(l,p){if(1&l&&(i.TgZ(0,"li",6)(1,"strong"),i._uU(2,"Registered - "),i.qZA(),i._uU(3),i.qZA()),2&l){const o=i.oxw().ngIf;i.xp6(3),i.hij("",o.registered?"Yes":"No"," ")}}function Id(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",13),i.NdJ("click",function(){return i.CHM(o),i.oxw(3).goToChildEmit.emit({})}),i._uU(1,"Back"),i.qZA()}}function Pd(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",14),i.NdJ("click",function(){i.CHM(o);const _=i.oxw(2).ngIf;return i.oxw().goToDam(_)}),i._uU(1,"Go to Dam"),i.qZA()}}function Zd(l,p){if(1&l&&(i.TgZ(0,"li",9)(1,"strong"),i._uU(2,"Dam -\xa0"),i.qZA(),i.TgZ(3,"span",10),i._uU(4),i.qZA(),i.TgZ(5,"div"),i.YNc(6,Id,2,0,"span",11),i.YNc(7,Pd,2,0,"span",12),i.qZA()()),2&l){const o=i.oxw().ngIf,f=i.oxw();i.xp6(4),i.Oqu(f.damTagNotProvided()?"Not provided":o.dam.tagNumber),i.xp6(2),i.Q6J("ngIf",f.showGoToChild),i.xp6(1),i.Q6J("ngIf",!f.damTagNotProvided())}}function Od(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"button",21),i.NdJ("click",function(){return i.CHM(o),i.oxw(3).editNotes()}),i._uU(1," Add Notes "),i.qZA()}}function Bd(l,p){if(1&l&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&l){const o=i.oxw(2).ngIf;i.xp6(1),i.hij(" ",o.notes," ")}}function Ud(l,p){1&l&&i._UZ(0,"textarea",22)}function Ed(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",27),i.NdJ("click",function(){return i.CHM(o),i.oxw(4).editNotes()}),i._uU(1),i.qZA()}if(2&l){const o=i.oxw(4);i.Q6J("ngClass",o.getCSSForNotesEdit()),i.xp6(1),i.Oqu(o.isEditNotes?"Save Changes":"Edit Notes")}}function Rd(l,p){1&l&&(i.TgZ(0,"span",28),i._UZ(1,"span",29),i._uU(2," Saving... "),i.qZA())}function Ld(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",30),i.NdJ("click",function(){return i.CHM(o),i.oxw(4).cancelEdit()}),i._uU(1,"Cancel Edit"),i.qZA()}}function qd(l,p){if(1&l&&(i.TgZ(0,"span",23),i.YNc(1,Ed,2,2,"span",24),i.YNc(2,Rd,3,0,"span",25),i.YNc(3,Ld,2,0,"span",26),i.qZA()),2&l){const o=i.oxw(3);i.xp6(1),i.Q6J("ngIf",!o.saving),i.xp6(1),i.Q6J("ngIf",o.saving),i.xp6(1),i.Q6J("ngIf",o.isEditNotes)}}function Wd(l,p){if(1&l&&(i.TgZ(0,"li",15)(1,"div",16)(2,"strong"),i._uU(3,"Notes -\xa0"),i.qZA(),i.YNc(4,Od,2,0,"button",17),i.qZA(),i.YNc(5,Bd,2,1,"div",18),i.YNc(6,Ud,1,0,"textarea",19),i.YNc(7,qd,4,3,"span",20),i.qZA()),2&l){const o=i.oxw().ngIf,f=i.oxw();i.Q6J("formGroup",f.notesGroup),i.xp6(4),i.Q6J("ngIf",!o.notes&&!f.isEditNotes),i.xp6(1),i.Q6J("ngIf",!f.isEditNotes),i.xp6(1),i.Q6J("ngIf",f.isEditNotes),i.xp6(1),i.Q6J("ngIf",o.notes||f.isEditNotes)}}function jd(l,p){if(1&l&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&l){const o=i.oxw(2).ngIf;i.xp6(1),i.hij("\xa0",o.tagNumber,"")}}function Yd(l,p){if(1&l&&(i.TgZ(0,"ul",32),i.YNc(1,jd,2,1,"li",18),i.TgZ(2,"li"),i._uU(3),i.ALo(4,"titlecase"),i.qZA()()),2&l){const o=i.oxw().ngIf,f=i.oxw(2);i.xp6(1),i.Q6J("ngIf","NA"!==o.tagNumber),i.xp6(2),i.hij("\xa0",i.lcZ(4,2,f.getBreedName(o)),"")}}function zd(l,p){if(1&l&&(i.TgZ(0,"li",6)(1,"strong"),i._uU(2,"Sire - "),i.qZA(),i._uU(3),i.YNc(4,Yd,5,4,"ul",31),i.qZA()),2&l){const o=p.ngIf;i.xp6(3),i.hij("","null"!==o.name?o.name:"No sire assigned"," "),i.xp6(1),i.Q6J("ngIf","null"!==o.name)}}function Jd(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div",1)(1,"div",2)(2,"strong"),i._uU(3),i.qZA(),i.TgZ(4,"span",3),i.NdJ("click",function(){return i.CHM(o),i.oxw().openEditModal()}),i._uU(5,"Edit Animal"),i.qZA()(),i.TgZ(6,"ul",4),i.YNc(7,Md,4,1,"li",5),i.YNc(8,Dd,4,1,"li",5),i.TgZ(9,"li",6)(10,"strong"),i._uU(11,"Gender - "),i.qZA(),i._uU(12),i.qZA(),i.YNc(13,Nd,5,4,"li",5),i.YNc(14,Fd,4,1,"li",5),i.TgZ(15,"li",6)(16,"strong"),i._uU(17,"Breed - "),i.qZA(),i._uU(18),i.ALo(19,"titlecase"),i.qZA(),i.YNc(20,Zd,8,3,"li",7),i.YNc(21,Wd,8,5,"li",8),i.YNc(22,zd,5,2,"li",5),i.ALo(23,"async"),i.qZA()()}if(2&l){const o=p.ngIf,f=i.oxw();i.Q6J("ngClass",f.getCSS()),i.xp6(3),i.hij("Tag number - ",o.tagNumber,""),i.xp6(4),i.Q6J("ngIf",o.managementTag&&"null"!==o.managementTag),i.xp6(1),i.Q6J("ngIf",o.name),i.xp6(4),i.hij(" ",o.gender?o.gender:"M"," "),i.xp6(1),i.Q6J("ngIf",o.birthDate),i.xp6(1),i.Q6J("ngIf",o.registered),i.xp6(4),i.hij("",i.lcZ(19,11,f.getBreedName(o))," "),i.xp6(2),i.Q6J("ngIf",o.dam),i.xp6(1),i.Q6J("ngIf",o.dam),i.xp6(1),i.Q6J("ngIf",i.lcZ(23,13,f.$sire))}}let Vd=(()=>{class l{constructor(o,f,_,w,k){this.store=o,this.screenService=f,this.fb=_,this.animalUpdate=w,this.breedService=k,this.$selectedAnimal=new j.X(null),this.editAnimal=new i.vpe,this.goToDamOutput=new i.vpe,this.goToChildEmit=new i.vpe,this.isEditNotes=!1,this.hasChangedNotes=!1,this.notesGroup=new T.cw({}),this.saving=!1,this.subscriptions=new Ee.w,this.animalTagNumber=null,this.notes=null}ngOnInit(){this.setUpForm(),this.trackSire(),this.trackAnimalChanges(),this.trackNotesChanges()}goToDam(o){this.store.select((0,Te.nk)(o.dam.tagNumber)).pipe((0,Yt.q)(1)).subscribe(f=>{this.goToDamOutput.emit(f)})}backToChild(){this.goToChildEmit.emit({})}getBreedName(o){return this.breedService.getBreedFromCode(o.breed)}getCSS(){return this.screenService.isSmallScreen?"small-screen-display":"cms-sticky"}openEditModal(){this.editAnimal.emit(this.$selectedAnimal.value)}editNotes(){this.isEditNotes?this.isEditNotes&&this.hasChangedNotes&&this.updateNotes():this.isEditNotes=!0}cancelEdit(){this.isEditNotes=!1,this.notesControl().setValue(this.notes)}damTagNotProvided(){return"UK000000000000"===this.$selectedAnimal.value.dam.tagNumber}getCSSForNotesEdit(){return this.isEditNotes?this.hasChangedNotes?"badge-success cms-notes-edit btn":"badge-success cms-disabled-pill cms-notes-edit":"badge-info"}setUpForm(){this.notesGroup=this.fb.group({notes:this.fb.control([])})}trackNotesChanges(){this.notesControl().valueChanges.subscribe(o=>{this.hasChangedNotes=this.notes!==o})}updateNotes(){this.saving=!0,this.animalUpdate.updateAnimal(this.animalTagNumber,{notes:this.notesControl().value}).then(()=>{this.saving=!1})}trackAnimalChanges(){this.subscriptions.add(this.$selectedAnimal.subscribe(o=>{this.animalTagNumber=null==o?void 0:o.tagNumber,this.isEditNotes=!1,this.notes=null==o?void 0:o.notes,this.notesControl().setValue(null==o?void 0:o.notes)}))}trackSire(){this.subscriptions.add(this.$selectedAnimal.subscribe(o=>{this.$sire=(null==o?void 0:o.sire)?this.store.pipe((0,ie.Ys)((0,wt.wQ)(o.sire.tagNumber)),(0,Bi.U)(f=>Object.assign(Object.assign({},f),{tagNumber:f.tagNumber.includes("UK000")?"NA":f.tagNumber}))):kd.E}))}notesControl(){return this.notesGroup.get("notes")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ie.yh),i.Y36(ee.O6),i.Y36(T.qu),i.Y36(ee.hP),i.Y36(ee.hx))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-animal-display"]],inputs:{$selectedAnimal:"$selectedAnimal",showGoToChild:"showGoToChild"},outputs:{editAnimal:"editAnimal",goToDamOutput:"goToDamOutput",goToChildEmit:"goToChildEmit"},decls:2,vars:3,consts:[["class","card",3,"ngClass",4,"ngIf"],[1,"card",3,"ngClass"],[1,"card-header","d-flex","justify-content-between"],[1,"btn","badge","badge-info","badge-pill","align-self-center",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngIf"],[1,"list-group-item"],["class","list-group-item d-flex",4,"ngIf"],["class","list-group-item d-flex justify-content-between",3,"formGroup",4,"ngIf"],[1,"list-group-item","d-flex"],[1,"flex-grow-1"],["class","btn badge badge-pill badge-danger mr-1",3,"click",4,"ngIf"],["class","btn badge badge-pill badge-info",3,"click",4,"ngIf"],[1,"btn","badge","badge-pill","badge-danger","mr-1",3,"click"],[1,"btn","badge","badge-pill","badge-info",3,"click"],[1,"list-group-item","d-flex","justify-content-between",3,"formGroup"],[1,"flex-shrink-0"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[4,"ngIf"],["formControlName","notes","class","flex-fill mr-1","style","height: 81px; resize: none",4,"ngIf"],["class","d-flex flex-column ml-auto justify-content-center",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],["formControlName","notes",1,"flex-fill","mr-1",2,"height","81px","resize","none"],[1,"d-flex","flex-column","ml-auto","justify-content-center"],["class","badge badge-pill",3,"ngClass","click",4,"ngIf"],["class","badge badge-pill badge-success","type","button",4,"ngIf"],["class","btn badge badge-pill badge-danger mt-1 cms-notes-edit",3,"click",4,"ngIf"],[1,"badge","badge-pill",3,"ngClass","click"],["type","button",1,"badge","badge-pill","badge-success"],["role","status","aria-hidden","true",1,"spinner-border","cms-disabled-pill","spinner-border-sm"],[1,"btn","badge","badge-pill","badge-danger","mt-1","cms-notes-edit",3,"click"],["style","list-style-type: none",4,"ngIf"],[2,"list-style-type","none"]],template:function(o,f){1&o&&(i.YNc(0,Jd,24,15,"div",0),i.ALo(1,"async")),2&o&&i.Q6J("ngIf",i.lcZ(1,1,f.$selectedAnimal))},directives:[F.O5,F.mk,T.JL,T.sg,T.Fj,T.JJ,T.u],pipes:[F.Ov,F.uU,F.rS],styles:[".badge-pill[_ngcontent-%COMP%]{font-size:100%;font-weight:600}.small-screen-display[_ngcontent-%COMP%]{max-width:450px}.card[_ngcontent-%COMP%]{font-size:clamp(9.5pt,2vw,17px)}.cms-notes-edit[_ngcontent-%COMP%]{width:7.5em}.cms-disabled-pill[_ngcontent-%COMP%]{opacity:.65!important}"]}),l})();function Hd(l,p){1&l&&i.GkF(0)}function Qd(l,p){if(1&l&&(i.TgZ(0,"div",7),i.YNc(1,Hd,1,0,"ng-container",14),i.qZA()),2&l){i.oxw();const o=i.MAs(15);i.xp6(1),i.Q6J("ngTemplateOutlet",o)}}function $d(l,p){1&l&&i.GkF(0)}function Gd(l,p){if(1&l&&(i.TgZ(0,"div",7),i.YNc(1,$d,1,0,"ng-container",14),i.qZA()),2&l){i.oxw();const o=i.MAs(15);i.xp6(1),i.Q6J("ngTemplateOutlet",o)}}function Kd(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"cms-animal-display",15),i.NdJ("editAnimal",function(){return i.CHM(o),i.oxw().editAnimal()})("goToDamOutput",function(_){return i.CHM(o),i.oxw().goToDam(_)})("goToChildEmit",function(){return i.CHM(o),i.oxw().goToPreviousAnimal()}),i.qZA()}if(2&l){const o=i.oxw();i.Q6J("$selectedAnimal",o.$selectedAnimal)("showGoToChild",o.showGoToChild)}}let Xd=(()=>{class l{constructor(o,f,_){this.router=o,this.modalService=f,this.screenService=_,this.pageName=ae.k.Animals,this.$selectedAnimal=new j.X(null),this.previousAnimals=[]}backToMain(){this.router.navigate([ae.k.MainMenu])}addAnimal(){this.modalService.get(V.n.Animal).setData({isAdd:!0}),this.modalService.get(V.n.Animal).open()}editAnimal(){this.$selectedAnimal.pipe((0,Yt.q)(1)).subscribe(o=>{const f=this.modalService.get(this.getModal(o));f.setData({isAdd:!1}),f.open()})}animalSelected(o){this.$selectedAnimal.next(o)}goToDam(o){this.previousAnimals.push(this.$selectedAnimal.value),this.animalSelected(o)}get showGoToChild(){return this.previousAnimals.length>0}goToPreviousAnimal(){this.animalSelected(this.previousAnimals.pop())}getModal(o){return o.dam?V.n.Animal:V.n.Sire}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(Tt.F0),i.Y36(ve.lu),i.Y36(ee.O6))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-animal"]],decls:21,vars:9,consts:[[1,"cms-container"],[1,"cms-flex-item"],["placement","right","ngbTooltip","Back to Main Menu",1,"fas","fa-arrow-left","ml-md-5","ml-3",3,"click"],[1,"page-title","cms-flex-item"],[1,"container","mb-3","mt-3"],[1,"btn","btn-success","mb-3",3,"click"],[1,"row"],[1,"col"],[3,"page","edit","animalSelected"],["class","col",4,"ngIf"],[1,"row","mt-3"],["animalDisplay",""],[3,"animal"],[3,"bull","form"],[4,"ngTemplateOutlet"],[3,"$selectedAnimal","showGoToChild","editAnimal","goToDamOutput","goToChildEmit"]],template:function(o,f){1&o&&(i.TgZ(0,"div",0)(1,"span",1)(2,"span",2),i.NdJ("click",function(){return f.backToMain()}),i.qZA()(),i.TgZ(3,"h1",3),i._uU(4,"Animals"),i.qZA()(),i.TgZ(5,"div",4)(6,"button",5),i.NdJ("click",function(){return f.addAnimal()}),i._uU(7,"Add Animal"),i.qZA(),i.TgZ(8,"div",6)(9,"div",7)(10,"cms-animal-list",8),i.NdJ("edit",function(){return f.editAnimal()})("animalSelected",function(w){return f.animalSelected(w)}),i.qZA()(),i.YNc(11,Qd,2,1,"div",9),i.qZA(),i.TgZ(12,"div",10),i.YNc(13,Gd,2,1,"div",9),i.qZA()(),i.YNc(14,Kd,1,2,"ng-template",null,11,i.W1O),i._UZ(16,"cms-animal-modal",12),i.ALo(17,"async"),i._UZ(18,"cms-bull-modal",13),i.ALo(19,"async"),i._UZ(20,"cms-warning-display")),2&o&&(i.xp6(10),i.Q6J("page",f.pageName),i.xp6(1),i.Q6J("ngIf",!f.screenService.isSmallScreen),i.xp6(2),i.Q6J("ngIf",f.screenService.isSmallScreen),i.xp6(3),i.Q6J("animal",i.lcZ(17,5,f.$selectedAnimal)),i.xp6(2),i.Q6J("bull",i.lcZ(19,7,f.$selectedAnimal)))},directives:[ne._L,Ya,F.O5,F.tP,Vd,zs,ws,Oi],pipes:[F.Ov],styles:[".add-button[_ngcontent-%COMP%]{font-size:clamp(9.5pt,2vw,17px)}"]}),l})(),eu=(()=>{class l{constructor(o,f){this.router=o,this.modalSerivce=f,this.pageName=ae.k.Births,this.$selectedAnimal=new j.X(null)}backToMain(){this.router.navigate([ae.k.MainMenu])}addBirth(){this.isAdd=!0,this.modalSerivce.get(V.n.Birth).open()}editBirth(){this.isAdd=!1,this.modalSerivce.get(V.n.Birth).open()}animalSelected(o){this.$selectedAnimal.next(o)}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(Tt.F0),i.Y36(ve.lu))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-birth"]],decls:16,vars:5,consts:[[1,"cms-container"],[1,"cms-flex-item"],["placement","right","ngbTooltip","Back to Main Menu",1,"fas","fa-arrow-left","ml-md-5","ml-3",3,"click"],[1,"page-title","cms-flex-item"],[1,"mr-5","invisible","cms-blank-arrow"],[1,"mb-3","mt-3","container"],[1,"row","justify-content-center"],[1,"col"],[1,"col-5","cms-birth-animal-list"],[3,"page","add","edit","animalSelected"],[3,"animal","isAdd"]],template:function(o,f){1&o&&(i.TgZ(0,"div",0)(1,"span",1)(2,"span",2),i.NdJ("click",function(){return f.backToMain()}),i.qZA()(),i.TgZ(3,"h1",3),i._uU(4,"Births"),i.qZA(),i.TgZ(5,"span"),i._UZ(6,"div",4),i.qZA()(),i.TgZ(7,"div",5)(8,"div",6),i._UZ(9,"div",7),i.TgZ(10,"div",8)(11,"cms-animal-list",9),i.NdJ("add",function(){return f.addBirth()})("edit",function(){return f.editBirth()})("animalSelected",function(w){return f.animalSelected(w)}),i.qZA()(),i._UZ(12,"div",7),i.qZA()(),i._UZ(13,"cms-birth-modal",10),i.ALo(14,"async"),i._UZ(15,"cms-warning-display")),2&o&&(i.xp6(11),i.Q6J("page",f.pageName),i.xp6(2),i.Q6J("animal",i.lcZ(14,3,f.$selectedAnimal))("isAdd",f.isAdd))},directives:[ne._L,Ya,Cs,Oi],pipes:[F.Ov],styles:[".cms-birth-animal-list[_ngcontent-%COMP%]{min-width:-webkit-min-content;min-width:-moz-min-content;min-width:min-content}.cms-blank-arrow[_ngcontent-%COMP%]{width:28px;height:32px}"]}),l})();function tu(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",function(){const w=i.CHM(o).$implicit;return i.oxw().animalSelected(w)}),i._uU(1),i.qZA()}if(2&l){const o=p.$implicit;i.xp6(1),i.hij(" ",o.tagNumber," ")}}function iu(l,p){1&l&&i.GkF(0)}function ru(l,p){1&l&&i.GkF(0)}function au(l,p){if(1&l&&(i.TgZ(0,"li",20)(1,"strong"),i._uU(2,"Animal score - "),i.qZA(),i._uU(3),i.ALo(4,"number"),i.qZA()),2&l){const o=i.oxw(3);i.xp6(3),i.hij("",i.xi3(4,1,o.selectedCullUpdate.score,"1.0-0")," ")}}function nu(l,p){1&l&&(i.TgZ(0,"li",20)(1,"strong"),i._uU(2,"Animal has no calves"),i.qZA()())}function ou(l,p){if(1&l&&(i.TgZ(0,"li",20)(1,"strong"),i._uU(2,"Calf average daily weight gain - "),i.qZA(),i._uU(3),i.ALo(4,"number"),i.qZA()),2&l){const o=i.oxw(3);i.xp6(3),i.hij(" ",i.xi3(4,1,o.selectedCullUpdate.calfDailyWeightGain,"1.0-3")," Kg ")}}function su(l,p){if(1&l&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&l){const o=p.$implicit;i.xp6(1),i.hij(" ",o.tagNumber," ")}}function lu(l,p){if(1&l&&(i.TgZ(0,"li",20)(1,"strong"),i._uU(2,"Calf tag numbers - "),i.qZA(),i.TgZ(3,"ul",21),i.YNc(4,su,2,1,"li",22),i.ALo(5,"async"),i.qZA()()),2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("ngForOf",i.lcZ(5,1,o.$calves))}}function du(l,p){if(1&l&&(i.TgZ(0,"div",16)(1,"div",17)(2,"strong"),i._uU(3),i.qZA()(),i.TgZ(4,"ul",18),i.YNc(5,au,5,4,"li",19),i.YNc(6,nu,3,0,"li",19),i.TgZ(7,"li",20)(8,"strong"),i._uU(9,"Age - "),i.qZA(),i._uU(10),i.qZA(),i.YNc(11,ou,5,4,"li",19),i.YNc(12,lu,6,3,"li",19),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(3),i.Oqu(o.selectedCullUpdate.tagNumber),i.xp6(2),i.Q6J("ngIf",o.selectedCullUpdate.score),i.xp6(1),i.Q6J("ngIf",0==o.selectedCullUpdate.totalCalves),i.xp6(4),i.hij(" ",o.selectedCullUpdate.age," "),i.xp6(1),i.Q6J("ngIf",o.selectedCullUpdate.calfDailyWeightGain),i.xp6(1),i.Q6J("ngIf",o.selectedCullUpdate.totalCalves>0)}}const Gs=function(){return[]};function uu(l,p){if(1&l&&(i.TgZ(0,"div",23)(1,"span",24)(2,"strong"),i._uU(3,"Calf Weight Gain"),i.qZA()(),i._UZ(4,"canvas",25),i.qZA()),2&l){const o=i.oxw(2);i.xp6(4),i.Q6J("datasets",o.chartWeights)("labels",o.chartLabels)("options",o.weightChartOptions)("legend",!1)("chartType","line")("plugins",i.DdM(6,Gs))}}function cu(l,p){if(1&l&&(i.TgZ(0,"div",23)(1,"span",24)(2,"strong"),i._uU(3,"Alive vs Dead Calves"),i.qZA()(),i._UZ(4,"canvas",26),i.qZA()),2&l){const o=i.oxw(2);i.xp6(4),i.Q6J("datasets",o.aliveVSDeadData)("labels",o.aliveVSDeadLabels)("options",o.aliveDeadChartOptions)("legend",!0)("chartType","pie")("plugins",i.DdM(6,Gs))}}const hu=function(l){return{col:l}};function fu(l,p){if(1&l&&(i.TgZ(0,"div",12)(1,"div",13),i.YNc(2,du,13,6,"div",14),i.ALo(3,"async"),i.YNc(4,uu,5,7,"div",15),i.YNc(5,cu,5,7,"div",15),i.qZA()()),2&l){const o=i.oxw();i.Q6J("ngClass",i.VKq(6,hu,!o.isSmallScreen)),i.xp6(2),i.Q6J("ngIf",i.lcZ(3,4,o.selectedCullUpdate&&o.$selectedAnimal)),i.xp6(2),i.Q6J("ngIf",o.chartWeights.length>0),i.xp6(1),i.Q6J("ngIf",o.chartWeights.length>0)}}const gu=function(l){return{"cms-animal-list":l}};let vu=(()=>{class l{constructor(o,f,_,w,k){this.cullUpdateService=o,this.router=f,this.store=_,this.screenSizeService=w,this.loadingService=k,this.cullUpdate=null,this.$selectedAnimal=new j.X(null),this.$calves=new j.X(null),this.chartWeights=[],this.aliveVSDeadData=[],this.aliveDeadChartOptions={responsive:!0},this.showLegend=!1,this.isSmallScreen=!1,this.subs=new Ee.w}ngOnInit(){this.loadingService.cullUpdateLoading.subscribe(o=>{this.loadingService.setLoadingState(o)}),this.setUpChartOptions(),this.updateGraph(),this.cullUpdateService.getCullUpdate().subscribe(o=>{this.cullUpdate=o}),this.subs.add(this.screenSizeService.isSmallScreenObs().subscribe(o=>{this.isSmallScreen=o}))}animalSelected(o){this.selectedCullUpdate=o,this.subs.add(this.store.pipe((0,ie.Ys)((0,Te.nk)(o.tagNumber)),(0,Yt.q)(1)).subscribe(f=>{var _;(null===(_=this.$selectedAnimal.getValue())||void 0===_?void 0:_.tagNumber)!==f.tagNumber&&(this.$selectedAnimal.next(f),this.store.pipe((0,ie.Ys)((0,Te.Rr)(o.tagNumber)),(0,Yt.q)(1)).subscribe(w=>{this.$calves.next(w)}))}))}backToMain(){this.router.navigate([ae.k.MainMenu])}updateGraph(){this.subs.add((0,Zi.aj)([this.$calves,this.$selectedAnimal]).subscribe(([o,f])=>{if(f&&(this.aliveVSDeadData=[{data:[this.selectedCullUpdate.aliveCalves,this.selectedCullUpdate.totalCalves-this.selectedCullUpdate.aliveCalves],label:"Calves"}],this.aliveVSDeadLabels=["Number alive calves","Number dead calves"],this.chartWeights=[],this.chartLabels=[],(null==o?void 0:o.length)>0)){let _=[];o.forEach(w=>{let k=[];w.weightData.forEach(P=>{_.push(P.weightDate),k.push({x:P.weightDate.format("L"),y:P.weight})}),this.chartWeights.push({data:k,label:w.tagNumber})}),_.forEach(w=>{this.chartLabels.push(w.format("L"))})}}))}setUpChartOptions(){this.weightChartOptions={responsive:!0,tooltips:{custom:o=>(o.title&&(o.title=[o.body[0].lines[0].substring(0,14)],o.body[0].lines[0]=o.body[0].lines[0].substring(16)+" Kg"),o)}}}ngOnDestroy(){this.subs.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ee.OI),i.Y36(Tt.F0),i.Y36(ie.yh),i.Y36(ee.O6),i.Y36(ee.Rz))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-cull-update"]],decls:14,vars:8,consts:[[1,"cms-container"],[1,"cms-flex-item"],["placement","right","ngbTooltip","Back to Main Menu",1,"fas","fa-arrow-left","ml-md-5","ml-3",3,"click"],[1,"page-title","cms-flex-item"],[1,"container"],[1,"row"],[1,"col"],[1,"list-group","mb-2",3,"ngClass"],["class","list-group-item list-group-item-action button-text",3,"click",4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen"],["infoDisplay",""],[1,"list-group-item","list-group-item-action","button-text",3,"click"],[3,"ngClass"],[1,"cms-sticky"],["class","card",4,"ngIf"],["class","chart-wrapper mt-2",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngIf"],[1,"list-group-item"],[2,"list-style-type","none"],[4,"ngFor","ngForOf"],[1,"chart-wrapper","mt-2"],[1,"ml-2","mb-1",2,"color","#7e7e7e"],["baseChart","",3,"datasets","labels","options","colors","legend","chartType","plugins"],["baseChart","",3,"datasets","labels","options","legend","chartType","plugins"]],template:function(o,f){if(1&o&&(i.TgZ(0,"div",0)(1,"span",1)(2,"span",2),i.NdJ("click",function(){return f.backToMain()}),i.qZA()(),i.TgZ(3,"h1",3),i._uU(4,"Cow Performance"),i.qZA()(),i.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),i.YNc(9,tu,2,1,"button",8),i.qZA()(),i.YNc(10,iu,1,0,"ng-container",9),i.qZA(),i.YNc(11,ru,1,0,"ng-container",9),i.qZA(),i.YNc(12,fu,6,8,"ng-template",null,10,i.W1O)),2&o){const _=i.MAs(13);i.xp6(8),i.Q6J("ngClass",i.VKq(6,gu,f.isSmallScreen)),i.xp6(1),i.Q6J("ngForOf",f.cullUpdate),i.xp6(1),i.Q6J("ngIf",!f.isSmallScreen)("ngIfThen",_),i.xp6(1),i.Q6J("ngIf",f.isSmallScreen)("ngIfThen",_)}},directives:[ne._L,F.mk,F.sg,F.O5,Ws],pipes:[F.Ov,F.JJ],styles:[".button-text[_ngcontent-%COMP%]{max-width:450px;font-size:clamp(13px,3vw,17px);min-width:-webkit-min-content;min-width:-moz-min-content;min-width:min-content}"]}),l})(),pu=(()=>{class l{constructor(o,f,_,w){this.router=o,this.warningService=f,this.animalUpdateService=_,this.loadingPaneService=w,this.pageName=ae.k.Registration}backToMain(){this.router.navigate([ae.k.MainMenu])}registerAnimal(o){this.warningService.show({header:`Confirm reigstration of ${o.tagNumber}`,buttonText:"Continue",body:""}).subscribe(f=>{f&&(this.loadingPaneService.setLoadingState(!0),this.markAsRegistered(o))})}markAsRegistered(o){this.animalUpdateService.updateAnimal(o.tagNumber,{registered:!0}).then(()=>{this.loadingPaneService.setLoadingState(!1)})}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(Tt.F0),i.Y36(ee.qj),i.Y36(ee.hP),i.Y36(ee.Rz))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-registration"]],decls:9,vars:1,consts:[[1,"cms-container"],[1,"cms-flex-item"],["placement","right","ngbTooltip","Back to Main Menu",1,"fas","fa-arrow-left","ml-md-5","ml-3",3,"click"],[1,"page-title","cms-flex-item"],[1,"mb-3","mt-3","container"],[1,"row","justify-content-center"],[1,"col","cms-center-animal-list"],[3,"page","add"]],template:function(o,f){1&o&&(i.TgZ(0,"div",0)(1,"span",1)(2,"span",2),i.NdJ("click",function(){return f.backToMain()}),i.qZA()(),i.TgZ(3,"h1",3),i._uU(4,"Calf Registration"),i.qZA()(),i.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"cms-animal-list",7),i.NdJ("add",function(w){return f.registerAnimal(w)}),i.qZA()()()()),2&o&&(i.xp6(8),i.Q6J("page",f.pageName))},directives:[ne._L,Ya],styles:[""]}),l})();function mu(l,p){if(1&l&&(i.TgZ(0,"div",12),i._UZ(1,"canvas",13),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("datasets",o.chartWeights)("labels",o.chartLabels)("options",o.chartOptions)("legend",o.showLegend)("chartType",o.chartType)("plugins",o.chartPlugins)}}function bu(l,p){if(1&l&&(i.TgZ(0,"div",6),i.YNc(1,mu,2,6,"div",11),i.qZA()),2&l){const o=i.oxw();i.xp6(1),i.Q6J("ngIf",o.chartWeights.length>0)}}function _u(l,p){if(1&l&&(i.TgZ(0,"div",15),i._UZ(1,"canvas",13),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("datasets",o.chartWeights)("labels",o.chartLabels)("options",o.chartOptions)("legend",o.showLegend)("chartType",o.chartType)("plugins",o.chartPlugins)}}function yu(l,p){if(1&l&&(i.TgZ(0,"div",6),i.YNc(1,_u,2,6,"div",14),i.qZA()),2&l){const o=i.oxw();i.xp6(1),i.Q6J("ngIf",o.chartWeights.length>0)}}let xu=(()=>{class l{constructor(o,f,_){this.modalService=o,this.router=f,this.screenSize=_,this.chartWeights=[],this.chartOptions={responsive:!0},this.chartType="line",this.chartPlugins=[],this.showLegend=!1,this.$selectedAnimal=new j.X(null),this.isAddMode=!1,this.pageName=ae.k.Weight,this.subs=new Ee.w}ngOnInit(){this.updateGraph()}animalSelected(o){this.$selectedAnimal.next(o)}openAddModal(){this.isAddMode=!0,this.modalService.get(V.n.Weight).open()}backToMain(){this.router.navigate([ae.k.MainMenu])}openEditModal(){this.isAddMode=!1,this.modalService.get(V.n.Weight).open()}updateGraph(){this.$selectedAnimal.subscribe(o=>{!o||this.selectedAnimal===o&&0!=this.chartWeights.length?null==o&&(this.chartWeights=[]):(this.selectedAnimal=o,this.chartWeights=[{data:o.weightData.map(f=>f.weight),label:o.tagNumber}],this.chartLabels=o.weightData.map(f=>f.weightDate.format("L")))})}ngOnDestroy(){this.subs.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(ve.lu),i.Y36(Tt.F0),i.Y36(ee.O6))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-weight"]],decls:14,vars:5,consts:[[1,"cms-container"],[1,"cms-flex-item"],["placement","right","ngbTooltip","Back to Main Menu",1,"fas","fa-arrow-left","ml-md-5","ml-3",3,"click"],[1,"page-title","cms-flex-item"],[1,"container","mb-3","mt-3"],[1,"row"],[1,"col"],[3,"page","add","edit","animalSelected"],["class","col",4,"ngIf"],[1,"row","mt-3"],[3,"isAddMode","animal"],["class","chart-wrapper cms-sticky",4,"ngIf"],[1,"chart-wrapper","cms-sticky"],["baseChart","",3,"datasets","labels","options","colors","legend","chartType","plugins"],["class","chart-wrapper small-screen-graph",4,"ngIf"],[1,"chart-wrapper","small-screen-graph"]],template:function(o,f){1&o&&(i.TgZ(0,"div",0)(1,"span",1)(2,"span",2),i.NdJ("click",function(){return f.backToMain()}),i.qZA()(),i.TgZ(3,"h1",3),i._uU(4,"Animal Weights"),i.qZA()(),i.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"cms-animal-list",7),i.NdJ("add",function(){return f.openAddModal()})("edit",function(){return f.openEditModal()})("animalSelected",function(w){return f.animalSelected(w)}),i.qZA()(),i.YNc(9,bu,2,1,"div",8),i.qZA(),i.TgZ(10,"div",9),i.YNc(11,yu,2,1,"div",8),i.qZA()(),i._UZ(12,"cms-weight-modal",10)(13,"cms-warning-display")),2&o&&(i.xp6(8),i.Q6J("page",f.pageName),i.xp6(1),i.Q6J("ngIf",!f.screenSize.isSmallScreen),i.xp6(2),i.Q6J("ngIf",f.screenSize.isSmallScreen),i.xp6(1),i.Q6J("isAddMode",f.isAddMode)("animal",f.selectedAnimal))},directives:[ne._L,Ya,F.O5,Ws,bs,Oi],styles:[".small-screen-graph[_ngcontent-%COMP%]{width:100%}"]}),l})();var Cu=J(5255);function Au(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",20),i.NdJ("click",function(){return i.CHM(o),i.oxw(3).registrationScreen()}),i.TgZ(1,"strong"),i._uU(2),i.qZA(),i._uU(3," Click to register"),i.qZA()}if(2&l){const o=i.oxw(2).ngIf;i.xp6(2),i.AsE(" ",o.overdue.length," ",1==o.overdue.length?"calf is":"calves are"," overdue registration")}}function wu(l,p){if(1&l&&(i.TgZ(0,"div",6),i.YNc(1,Au,4,2,"span",19),i.ALo(2,"async"),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("ngIf",!i.lcZ(2,1,o.loading))}}function Tu(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"span",22),i.NdJ("click",function(){return i.CHM(o),i.oxw(3).registrationScreen()}),i.TgZ(1,"strong"),i._uU(2),i.qZA(),i._uU(3," Click to reisgter"),i.qZA()}if(2&l){const o=i.oxw(2).ngIf;i.xp6(2),i.AsE(" ",o.unreg.length," ",1==o.unreg.length?"calf is":"calves are"," unregistered")}}function Su(l,p){if(1&l&&(i.TgZ(0,"div",6),i.YNc(1,Tu,4,2,"span",21),i.ALo(2,"async"),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("ngIf",!i.lcZ(2,1,o.loading))}}function ku(l,p){if(1&l&&(i.TgZ(0,"div",17),i.YNc(1,wu,3,3,"div",18),i.YNc(2,Su,3,3,"div",18),i.qZA()),2&l){const o=p.ngIf;i.xp6(1),i.Q6J("ngIf",o.overdue.length>0),i.xp6(1),i.Q6J("ngIf",o.unreg.length>0)}}function Mu(l,p){if(1&l&&(i.TgZ(0,"span",28)(1,"strong"),i._uU(2),i.qZA()()),2&l){const o=i.oxw().ngIf;i.xp6(2),i.lnq("There ",1==o.length?"is":"are"," ",o.length," ",1==o.length?"male":"males"," over 36 months on the system")}}function Du(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"button",29),i.NdJ("click",function(){const w=i.CHM(o).$implicit;return i.oxw(2).openWeightModal(w)}),i._uU(1),i.qZA()}if(2&l){const o=p.$implicit;i.xp6(1),i.hij(" Add sale weight - ",o.tagNumber," ")}}function Nu(l,p){if(1&l&&(i.TgZ(0,"div",23),i.YNc(1,Mu,3,3,"span",24),i.ALo(2,"async"),i.TgZ(3,"div",25)(4,"div",26),i.YNc(5,Du,2,1,"button",27),i.qZA()()()),2&l){const o=p.ngIf,f=i.oxw();i.xp6(1),i.Q6J("ngIf",!i.lcZ(2,2,f.loading)&&o.length>0),i.xp6(4),i.Q6J("ngForOf",o)}}const Fu=[{path:"",component:(()=>{class l{constructor(o,f,_,w,k,P){this.router=o,this.auth=f,this.route=_,this.store=w,this.loadingService=k,this.modalService=P}ngAfterViewInit(){}ngOnInit(){this.$oldMales=this.store.pipe((0,ie.Ys)(Te.Ud)),this.$unregCalves=this.store.pipe((0,ie.Ys)(Te.Rl)).pipe((0,Bi.U)(o=>o.filter(f=>st().diff(f.birthDate,"days")<27))),this.$overdueUnregCalves=this.store.pipe((0,ie.Ys)(Te.Rl)).pipe((0,Bi.U)(o=>o.filter(f=>st().diff(f.birthDate,"days")>=27))),this.$allUnregCalves=(0,Zi.aj)([this.$unregCalves,this.$overdueUnregCalves]).pipe((0,Bi.U)(([o,f])=>({overdue:f,unreg:o})))}openWeightModal(o){this.selectedAnimal=o,this.modalService.get(V.n.Weight).open()}weightScreen(){this.router.navigate([ae.k.Weight],{relativeTo:this.route})}animalScreen(){this.router.navigate([ae.k.Animals],{relativeTo:this.route})}birthScreen(){this.router.navigate([ae.k.Births],{relativeTo:this.route})}logout(){this.auth.logout({returnTo:`https://${window.location.host}/CMSFrontEnd/${ae.k.Login}`})}registrationScreen(){this.router.navigate([ae.k.Registration],{relativeTo:this.route})}cullUpdate(){this.router.navigate([ae.k.CullUpdate],{relativeTo:this.route})}medicationScreen(){this.router.navigate([ae.k.Medication],{relativeTo:this.route})}get loading(){return this.loadingService.currentLoadingState}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(Tt.F0),i.Y36(Cu.e8),i.Y36(Tt.gz),i.Y36(ie.yh),i.Y36(ee.Rz),i.Y36(ve.lu))},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-main-menu"]],decls:47,vars:8,consts:[[1,"text-center"],[1,"page-title"],[1,"container"],["class","row mt-3",4,"ngIf"],[1,"row"],["class","col","ngbDropdown","",4,"ngIf"],[1,"col"],["src","assets/cowSilhouette.svg","alt","CowDataButton",1,"cow-menu-icon"],[1,"btn-toolbar"],[1,"btn-group"],[1,"btn","btn-secondary","mr-1","menu-buttons",3,"click"],[1,"btn","btn-secondary","menu-buttons",2,"margin-right","15px",3,"click"],["src","assets/medicationButton.svg","alt","MedicationMenu",1,"medicine-menu-icon"],["disabled","",1,"btn","btn-secondary","mr-1","menu-buttons"],["src","assets/userIcon.svg","alt","UserIcon",1,"user-menu-icon"],[1,"btn","btn-danger","mr-1","menu-buttons",3,"click"],[3,"animal","isAddMode"],[1,"row","mt-3"],["class","col",4,"ngIf"],["class","alert alert-danger btn",3,"click",4,"ngIf"],[1,"alert","alert-danger","btn",3,"click"],["class","alert alert-warning btn",3,"click",4,"ngIf"],[1,"alert","alert-warning","btn",3,"click"],["ngbDropdown","",1,"col"],["ngbDropdownToggle","","class","alert alert-warning",4,"ngIf"],["ngbDropdownMenu",""],[1,"list-group"],["type","button","class","list-group-item list-group-item-action text","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["ngbDropdownToggle","",1,"alert","alert-warning"],["type","button","ngbDropdownItem","",1,"list-group-item","list-group-item-action","text",3,"click"]],template:function(o,f){1&o&&(i.TgZ(0,"div",0)(1,"h1",1),i._uU(2,"Main Menu"),i.qZA()(),i.TgZ(3,"div",2),i.YNc(4,ku,3,2,"div",3),i.ALo(5,"async"),i.TgZ(6,"div",4),i.YNc(7,Nu,6,4,"div",5),i.ALo(8,"async"),i.qZA(),i.TgZ(9,"div",4)(10,"div",6),i._UZ(11,"img",7),i.qZA()(),i.TgZ(12,"div",4)(13,"div",6)(14,"div",8)(15,"div",9)(16,"button",10),i.NdJ("click",function(){return f.weightScreen()}),i._uU(17," Animal Weights "),i.qZA(),i.TgZ(18,"button",10),i.NdJ("click",function(){return f.animalScreen()}),i._uU(19," Add/Edit Animal "),i.qZA(),i.TgZ(20,"button",10),i.NdJ("click",function(){return f.birthScreen()}),i._uU(21," Add Birth "),i.qZA(),i.TgZ(22,"button",10),i.NdJ("click",function(){return f.cullUpdate()}),i._uU(23," Cull Update "),i.qZA(),i.TgZ(24,"button",11),i.NdJ("click",function(){return f.registrationScreen()}),i._uU(25," Calf Registration "),i.qZA()()()()(),i.TgZ(26,"div",4)(27,"div",6),i._UZ(28,"img",12),i.qZA()(),i.TgZ(29,"div",4)(30,"div",6)(31,"div",8)(32,"div",9)(33,"button",13),i._uU(34," Add Treatment "),i.qZA(),i.TgZ(35,"button",10),i.NdJ("click",function(){return f.medicationScreen()}),i._uU(36," Add Medication "),i.qZA(),i.TgZ(37,"button",13),i._uU(38," Print Report "),i.qZA()()()()(),i.TgZ(39,"div",4)(40,"div",6),i._UZ(41,"img",14),i.TgZ(42,"div",8)(43,"div",9)(44,"button",15),i.NdJ("click",function(){return f.logout()}),i._uU(45," Log Out "),i.qZA()()()()()(),i._UZ(46,"cms-weight-modal",16)),2&o&&(i.xp6(4),i.Q6J("ngIf",i.lcZ(5,4,f.$allUnregCalves)),i.xp6(3),i.Q6J("ngIf",i.lcZ(8,6,f.$oldMales)),i.xp6(39),i.Q6J("animal",f.selectedAnimal)("isAddMode",!0))},directives:[F.O5,ne.jt,ne.iD,ne.Vi,F.sg,ne.TH,bs],pipes:[F.Ov],styles:[".container[_ngcontent-%COMP%]{flex-direction:column;flex-wrap:nowrap;justify-content:flex-start}.alert-warning[_ngcontent-%COMP%]{font-size:clamp(12px,2vw,16px)}.cow-menu-icon[_ngcontent-%COMP%]{margin-top:20px;width:8.5vw}.medicine-menu-icon[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px;width:3.5vw}.user-menu-icon[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px;width:5vw}.alert[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{font-size:clamp(10pt,2vw,16px)}.menu-buttons[_ngcontent-%COMP%]{font-size:clamp(10pt,2vw,15pt);min-width:-webkit-min-content;min-width:-moz-min-content;min-width:min-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.dropdown-menu[_ngcontent-%COMP%]{padding:0!important}span[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}"]}),l})()},{path:"weight",component:xu},{path:"animals",component:Xd},{path:"births",component:eu},{path:"performance",component:vu},{path:"registration",component:pu},{path:"medication",component:(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=i.Xpm({type:l,selectors:[["cms-medication"]],decls:2,vars:0,template:function(o,f){1&o&&(i.TgZ(0,"p"),i._uU(1,"medication works!"),i.qZA())},styles:[""]}),l})()}];let Iu=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=i.oAB({type:l}),l.\u0275inj=i.cJS({imports:[[Tt.Bz.forChild(Fu)],Tt.Bz]}),l})(),Pu=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=i.oAB({type:l}),l.\u0275inj=i.cJS({imports:[[F.ez,Iu,nl,T.UX,ve.Hd.forChild(),vd,ne.IJ]]}),l})()},8332:function(Ts,Va,J){Ts.exports=function(F){"use strict";F=F&&F.hasOwnProperty("default")?F.default:F;var i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},j=function T(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var t={};for(var r in i)i.hasOwnProperty(r)&&(t[i[r]]=r);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var n in a)if(a.hasOwnProperty(n)){if(!("channels"in a[n]))throw new Error("missing channels property: "+n);if(!("labels"in a[n]))throw new Error("missing channel labels property: "+n);if(a[n].labels.length!==a[n].channels)throw new Error("channel and label counts mismatch: "+n);var s=a[n].channels,d=a[n].labels;delete a[n].channels,delete a[n].labels,Object.defineProperty(a[n],"channels",{value:s}),Object.defineProperty(a[n],"labels",{value:d})}function c(u,h){return Math.pow(u[0]-h[0],2)+Math.pow(u[1]-h[1],2)+Math.pow(u[2]-h[2],2)}a.rgb.hsl=function(u){var C,S,h=u[0]/255,g=u[1]/255,v=u[2]/255,b=Math.min(h,g,v),y=Math.max(h,g,v),x=y-b;return y===b?C=0:h===y?C=(g-v)/x:g===y?C=2+(v-h)/x:v===y&&(C=4+(h-g)/x),(C=Math.min(60*C,360))<0&&(C+=360),S=(b+y)/2,[C,100*(y===b?0:S<=.5?x/(y+b):x/(2-y-b)),100*S]},a.rgb.hsv=function(u){var h,g,v,b,y,x=u[0]/255,C=u[1]/255,A=u[2]/255,S=Math.max(x,C,A),D=S-Math.min(x,C,A),N=function(U){return(S-U)/6/D+.5};return 0===D?b=y=0:(y=D/S,h=N(x),g=N(C),v=N(A),x===S?b=v-g:C===S?b=1/3+h-v:A===S&&(b=2/3+g-h),b<0?b+=1:b>1&&(b-=1)),[360*b,100*y,100*S]},a.rgb.hwb=function(u){var h=u[0],g=u[1],v=u[2];return[a.rgb.hsl(u)[0],1/255*Math.min(h,Math.min(g,v))*100,100*(v=1-1/255*Math.max(h,Math.max(g,v)))]},a.rgb.cmyk=function(u){var C,h=u[0]/255,g=u[1]/255,v=u[2]/255;return[100*((1-h-(C=Math.min(1-h,1-g,1-v)))/(1-C)||0),100*((1-g-C)/(1-C)||0),100*((1-v-C)/(1-C)||0),100*C]},a.rgb.keyword=function(u){var h=t[u];if(h)return h;var v,g=1/0;for(var b in i)if(i.hasOwnProperty(b)){var x=c(u,i[b]);x<g&&(g=x,v=b)}return v},a.keyword.rgb=function(u){return i[u]},a.rgb.xyz=function(u){var h=u[0]/255,g=u[1]/255,v=u[2]/255;return[100*(.4124*(h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92)+.3576*(g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92)+.1805*(v=v>.04045?Math.pow((v+.055)/1.055,2.4):v/12.92)),100*(.2126*h+.7152*g+.0722*v),100*(.0193*h+.1192*g+.9505*v)]},a.rgb.lab=function(u){var h=a.rgb.xyz(u),g=h[0],v=h[1],b=h[2];return v/=100,b/=108.883,g=(g/=95.047)>.008856?Math.pow(g,1/3):7.787*g+16/116,[116*(v=v>.008856?Math.pow(v,1/3):7.787*v+16/116)-16,500*(g-v),200*(v-(b=b>.008856?Math.pow(b,1/3):7.787*b+16/116))]},a.hsl.rgb=function(u){var b,y,x,C,A,h=u[0]/360,g=u[1]/100,v=u[2]/100;if(0===g)return[A=255*v,A,A];b=2*v-(y=v<.5?v*(1+g):v+g-v*g),C=[0,0,0];for(var S=0;S<3;S++)(x=h+1/3*-(S-1))<0&&x++,x>1&&x--,C[S]=255*(A=6*x<1?b+6*(y-b)*x:2*x<1?y:3*x<2?b+(y-b)*(2/3-x)*6:b);return C},a.hsl.hsv=function(u){var h=u[0],g=u[1]/100,v=u[2]/100,b=g,y=Math.max(v,.01);return g*=(v*=2)<=1?v:2-v,b*=y<=1?y:2-y,[h,100*(0===v?2*b/(y+b):2*g/(v+g)),(v+g)/2*100]},a.hsv.rgb=function(u){var h=u[0]/60,g=u[1]/100,v=u[2]/100,b=Math.floor(h)%6,y=h-Math.floor(h),x=255*v*(1-g),C=255*v*(1-g*y),A=255*v*(1-g*(1-y));switch(v*=255,b){case 0:return[v,A,x];case 1:return[C,v,x];case 2:return[x,v,A];case 3:return[x,C,v];case 4:return[A,x,v];case 5:return[v,x,C]}},a.hsv.hsl=function(u){var y,x,C,h=u[0],g=u[1]/100,v=u[2]/100,b=Math.max(v,.01);return C=(2-g)*v,x=g*b,[h,100*(x=(x/=(y=(2-g)*b)<=1?y:2-y)||0),100*(C/=2)]},a.hwb.rgb=function(u){var y,x,C,A,S,D,N,h=u[0]/360,g=u[1]/100,v=u[2]/100,b=g+v;switch(b>1&&(g/=b,v/=b),C=6*h-(y=Math.floor(6*h)),0!=(1&y)&&(C=1-C),A=g+C*((x=1-v)-g),y){default:case 6:case 0:S=x,D=A,N=g;break;case 1:S=A,D=x,N=g;break;case 2:S=g,D=x,N=A;break;case 3:S=g,D=A,N=x;break;case 4:S=A,D=g,N=x;break;case 5:S=x,D=g,N=A}return[255*S,255*D,255*N]},a.cmyk.rgb=function(u){var g=u[1]/100,v=u[2]/100,b=u[3]/100;return[255*(1-Math.min(1,u[0]/100*(1-b)+b)),255*(1-Math.min(1,g*(1-b)+b)),255*(1-Math.min(1,v*(1-b)+b))]},a.xyz.rgb=function(u){var b,y,x,h=u[0]/100,g=u[1]/100,v=u[2]/100;return y=-.9689*h+1.8758*g+.0415*v,x=.0557*h+-.204*g+1.057*v,b=(b=3.2406*h+-1.5372*g+-.4986*v)>.0031308?1.055*Math.pow(b,1/2.4)-.055:12.92*b,y=y>.0031308?1.055*Math.pow(y,1/2.4)-.055:12.92*y,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:12.92*x,[255*(b=Math.min(Math.max(0,b),1)),255*(y=Math.min(Math.max(0,y),1)),255*(x=Math.min(Math.max(0,x),1))]},a.xyz.lab=function(u){var h=u[0],g=u[1],v=u[2];return g/=100,v/=108.883,h=(h/=95.047)>.008856?Math.pow(h,1/3):7.787*h+16/116,[116*(g=g>.008856?Math.pow(g,1/3):7.787*g+16/116)-16,500*(h-g),200*(g-(v=v>.008856?Math.pow(v,1/3):7.787*v+16/116))]},a.lab.xyz=function(u){var b,y,x;b=u[1]/500+(y=(u[0]+16)/116),x=y-u[2]/200;var C=Math.pow(y,3),A=Math.pow(b,3),S=Math.pow(x,3);return y=C>.008856?C:(y-16/116)/7.787,b=A>.008856?A:(b-16/116)/7.787,x=S>.008856?S:(x-16/116)/7.787,[b*=95.047,y*=100,x*=108.883]},a.lab.lch=function(u){var y,h=u[0],g=u[1],v=u[2];return(y=360*Math.atan2(v,g)/2/Math.PI)<0&&(y+=360),[h,Math.sqrt(g*g+v*v),y]},a.lch.lab=function(u){var x,g=u[1];return x=u[2]/360*2*Math.PI,[u[0],g*Math.cos(x),g*Math.sin(x)]},a.rgb.ansi16=function(u){var h=u[0],g=u[1],v=u[2],b=1 in arguments?arguments[1]:a.rgb.hsv(u)[2];if(0===(b=Math.round(b/50)))return 30;var y=30+(Math.round(v/255)<<2|Math.round(g/255)<<1|Math.round(h/255));return 2===b&&(y+=60),y},a.hsv.ansi16=function(u){return a.rgb.ansi16(a.hsv.rgb(u),u[2])},a.rgb.ansi256=function(u){var h=u[0],g=u[1],v=u[2];return h===g&&g===v?h<8?16:h>248?231:Math.round((h-8)/247*24)+232:16+36*Math.round(h/255*5)+6*Math.round(g/255*5)+Math.round(v/255*5)},a.ansi16.rgb=function(u){var h=u%10;if(0===h||7===h)return u>50&&(h+=3.5),[h=h/10.5*255,h,h];var g=.5*(1+~~(u>50));return[(1&h)*g*255,(h>>1&1)*g*255,(h>>2&1)*g*255]},a.ansi256.rgb=function(u){if(u>=232){var h=10*(u-232)+8;return[h,h,h]}var g;return u-=16,[Math.floor(u/36)/5*255,Math.floor((g=u%36)/6)/5*255,g%6/5*255]},a.rgb.hex=function(u){var g=(((255&Math.round(u[0]))<<16)+((255&Math.round(u[1]))<<8)+(255&Math.round(u[2]))).toString(16).toUpperCase();return"000000".substring(g.length)+g},a.hex.rgb=function(u){var h=u.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!h)return[0,0,0];var g=h[0];3===h[0].length&&(g=g.split("").map(function(C){return C+C}).join(""));var v=parseInt(g,16);return[v>>16&255,v>>8&255,255&v]},a.rgb.hcg=function(u){var A,h=u[0]/255,g=u[1]/255,v=u[2]/255,b=Math.max(Math.max(h,g),v),y=Math.min(Math.min(h,g),v),x=b-y;return A=x<=0?0:b===h?(g-v)/x%6:b===g?2+(v-h)/x:4+(h-g)/x+4,A/=6,[360*(A%=1),100*x,100*(x<1?y/(1-x):0)]},a.hsl.hcg=function(u){var v,h=u[1]/100,g=u[2]/100,b=0;return(v=g<.5?2*h*g:2*h*(1-g))<1&&(b=(g-.5*v)/(1-v)),[u[0],100*v,100*b]},a.hsv.hcg=function(u){var g=u[2]/100,v=u[1]/100*g,b=0;return v<1&&(b=(g-v)/(1-v)),[u[0],100*v,100*b]},a.hcg.rgb=function(u){var g=u[1]/100,v=u[2]/100;if(0===g)return[255*v,255*v,255*v];var A,b=[0,0,0],y=u[0]/360%1*6,x=y%1,C=1-x;switch(Math.floor(y)){case 0:b[0]=1,b[1]=x,b[2]=0;break;case 1:b[0]=C,b[1]=1,b[2]=0;break;case 2:b[0]=0,b[1]=1,b[2]=x;break;case 3:b[0]=0,b[1]=C,b[2]=1;break;case 4:b[0]=x,b[1]=0,b[2]=1;break;default:b[0]=1,b[1]=0,b[2]=C}return[255*(g*b[0]+(A=(1-g)*v)),255*(g*b[1]+A),255*(g*b[2]+A)]},a.hcg.hsv=function(u){var h=u[1]/100,v=h+u[2]/100*(1-h),b=0;return v>0&&(b=h/v),[u[0],100*b,100*v]},a.hcg.hsl=function(u){var h=u[1]/100,v=u[2]/100*(1-h)+.5*h,b=0;return v>0&&v<.5?b=h/(2*v):v>=.5&&v<1&&(b=h/(2*(1-v))),[u[0],100*b,100*v]},a.hcg.hwb=function(u){var h=u[1]/100,v=h+u[2]/100*(1-h);return[u[0],100*(v-h),100*(1-v)]},a.hwb.hcg=function(u){var v=1-u[2]/100,b=v-u[1]/100,y=0;return b<1&&(y=(v-b)/(1-b)),[u[0],100*b,100*y]},a.apple.rgb=function(u){return[u[0]/65535*255,u[1]/65535*255,u[2]/65535*255]},a.rgb.apple=function(u){return[u[0]/255*65535,u[1]/255*65535,u[2]/255*65535]},a.gray.rgb=function(u){return[u[0]/100*255,u[0]/100*255,u[0]/100*255]},a.gray.hsl=a.gray.hsv=function(u){return[0,0,u[0]]},a.gray.hwb=function(u){return[0,100,u[0]]},a.gray.cmyk=function(u){return[0,0,0,u[0]]},a.gray.lab=function(u){return[u[0],0,0]},a.gray.hex=function(u){var h=255&Math.round(u[0]/100*255),v=((h<<16)+(h<<8)+h).toString(16).toUpperCase();return"000000".substring(v.length)+v},a.rgb.gray=function(u){return[(u[0]+u[1]+u[2])/3/255*100]}});function Mt(e){var t=function Qa(){for(var e={},t=Object.keys(j),r=t.length,a=0;a<r;a++)e[t[a]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var a=r.pop(),n=Object.keys(j[a]),s=n.length,d=0;d<s;d++){var c=n[d],u=t[c];-1===u.distance&&(u.distance=t[a].distance+1,u.parent=a,r.unshift(c))}return t}function fi(e,t){return function(r){return t(e(r))}}function $a(e,t){for(var r=[t[e].parent,e],a=j[t[e].parent][e],n=t[e].parent;t[n].parent;)r.unshift(t[n].parent),a=fi(j[t[n].parent][n],a),n=t[n].parent;return a.conversion=r,a}var Dt={};Object.keys(j).forEach(function(e){Dt[e]={},Object.defineProperty(Dt[e],"channels",{value:j[e].channels}),Object.defineProperty(Dt[e],"labels",{value:j[e].labels});var t=function(e){for(var t=Mt(e),r={},a=Object.keys(t),n=a.length,s=0;s<n;s++){var d=a[s];null!==t[d].parent&&(r[d]=$a(d,t))}return r}(e);Object.keys(t).forEach(function(a){var n=t[a];Dt[e][a]=function en(e){var t=function(r){if(null==r)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var a=e(r);if("object"==typeof a)for(var n=a.length,s=0;s<n;s++)a[s]=Math.round(a[s]);return a};return"conversion"in e&&(t.conversion=e.conversion),t}(n),Dt[e][a].raw=function Xa(e){var t=function(r){return null==r?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)})});var tn=Dt,Ri={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Be={getRgba:gi,getHsla:Li,getRgb:function Re(e){var t=gi(e);return t&&t.slice(0,3)},getHsl:function rn(e){var t=Li(e);return t&&t.slice(0,3)},getHwb:kr,getAlpha:function Nt(e){var t=gi(e);return t||(t=Li(e))||(t=kr(e))?t[3]:void 0},hexString:function Mr(e,r){return r=void 0!==r&&3===e.length?r:e[3],"#"+vi(e[0])+vi(e[1])+vi(e[2])+(r>=0&&r<1?vi(Math.round(255*r)):"")},rgbString:function an(e,t){return t<1||e[3]&&e[3]<1?Dr(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:Dr,percentString:function Ht(e,t){return t<1||e[3]&&e[3]<1?Nr(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:Nr,hslString:function nn(e,t){return t<1||e[3]&&e[3]<1?Fr(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:Fr,hwbString:function on(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function sn(e){return Ir[e.slice(0,3)]}};function gi(e){if(e){var d=[0,0,0],c=1,u=e.match(/^#([a-fA-F0-9]{3,4})$/i),h="";if(u){h=(u=u[1])[3];for(var g=0;g<d.length;g++)d[g]=parseInt(u[g]+u[g],16);h&&(c=Math.round(parseInt(h+h,16)/255*100)/100)}else if(u=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(h=u[2],u=u[1],g=0;g<d.length;g++)d[g]=parseInt(u.slice(2*g,2*g+2),16);h&&(c=Math.round(parseInt(h,16)/255*100)/100)}else if(u=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(g=0;g<d.length;g++)d[g]=parseInt(u[g+1]);c=parseFloat(u[4])}else if(u=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(g=0;g<d.length;g++)d[g]=Math.round(2.55*parseFloat(u[g+1]));c=parseFloat(u[4])}else if(u=e.match(/(\w+)/)){if("transparent"==u[1])return[0,0,0,0];if(!(d=Ri[u[1]]))return}for(g=0;g<d.length;g++)d[g]=Le(d[g],0,255);return c=c||0==c?Le(c,0,1):1,d[3]=c,d}}function Li(e){if(e){var r=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(r){var a=parseFloat(r[4]);return[Le(parseInt(r[1]),0,360),Le(parseFloat(r[2]),0,100),Le(parseFloat(r[3]),0,100),Le(isNaN(a)?1:a,0,1)]}}}function kr(e){if(e){var r=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(r){var a=parseFloat(r[4]);return[Le(parseInt(r[1]),0,360),Le(parseFloat(r[2]),0,100),Le(parseFloat(r[3]),0,100),Le(isNaN(a)?1:a,0,1)]}}}function Dr(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function Nr(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function Fr(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function Le(e,t,r){return Math.min(Math.max(t,e),r)}function vi(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var Ir={};for(var qi in Ri)Ir[Ri[qi]]=qi;var ke=function(e){return e instanceof ke?e:this instanceof ke?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=Be.getRgba(e))?this.setValues("rgb",t):(t=Be.getHsla(e))?this.setValues("hsl",t):(t=Be.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):(void 0!==t.c||void 0!==t.cyan)&&this.setValues("cmyk",t)))):new ke(e);var t};ke.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return Be.hexString(this.values.rgb)},rgbString:function(){return Be.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return Be.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return Be.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return Be.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return Be.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return Be.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return Be.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],r=0;r<e.length;r++){var a=e[r]/255;t[r]=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,r=(t[0]+e)%360;return t[0]=r<0?360+r:r,this.setValues("hsl",t),this},mix:function(e,t){var r=this,a=e,n=void 0===t?.5:t,s=2*n-1,d=r.alpha()-a.alpha(),c=((s*d==-1?s:(s+d)/(1+s*d))+1)/2,u=1-c;return this.rgb(c*r.red()+u*a.red(),c*r.green()+u*a.green(),c*r.blue()+u*a.blue()).alpha(r.alpha()*n+a.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var a,n,e=new ke,t=this.values,r=e.values;for(var s in t)t.hasOwnProperty(s)&&("[object Array]"===(n={}.toString.call(a=t[s]))?r[s]=a.slice(0):"[object Number]"===n?r[s]=a:console.error("unexpected color value:",a));return e}},ke.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},ke.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},ke.prototype.getValues=function(e){for(var t=this.values,r={},a=0;a<e.length;a++)r[e.charAt(a)]=t[e][a];return 1!==t.alpha&&(r.a=t.alpha),r},ke.prototype.setValues=function(e,t){var d,u,r=this.values,a=this.spaces,n=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)r[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(d=0;d<e.length;d++)r[e][d]=t[e.charAt(d)];s=t.a}else if(void 0!==t[a[e][0]]){var c=a[e];for(d=0;d<e.length;d++)r[e][d]=t[c[d]];s=t.alpha}if(r.alpha=Math.max(0,Math.min(1,void 0===s?r.alpha:s)),"alpha"===e)return!1;for(d=0;d<e.length;d++)u=Math.max(0,Math.min(n[e][d],r[e][d])),r[e][d]=Math.round(u);for(var h in a)h!==e&&(r[h]=tn[e][h](r[e]));return!0},ke.prototype.setSpace=function(e,t){var r=t[0];return void 0===r?this.getValues(e):("number"==typeof r&&(r=Array.prototype.slice.call(t)),this.setValues(e,r),this)},ke.prototype.setChannel=function(e,t,r){var a=this.values[e];return void 0===r?a[t]:(r===a[t]||(a[t]=r,this.setValues(e,a)),this)},"undefined"!=typeof window&&(window.Color=ke);var tt=ke;function Pr(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}var e,R={noop:function(){},uid:(e=0,function(){return e++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,r){return R.valueOrDefault(R.isArray(e)?e[t]:e,r)},callback:function(e,t,r){if(e&&"function"==typeof e.call)return e.apply(r,t)},each:function(e,t,r,a){var n,s,d;if(R.isArray(e))if(s=e.length,a)for(n=s-1;n>=0;n--)t.call(r,e[n],n);else for(n=0;n<s;n++)t.call(r,e[n],n);else if(R.isObject(e))for(s=(d=Object.keys(e)).length,n=0;n<s;n++)t.call(r,e[d[n]],d[n])},arrayEquals:function(e,t){var r,a,n,s;if(!e||!t||e.length!==t.length)return!1;for(r=0,a=e.length;r<a;++r)if(s=t[r],(n=e[r])instanceof Array&&s instanceof Array){if(!R.arrayEquals(n,s))return!1}else if(n!==s)return!1;return!0},clone:function(e){if(R.isArray(e))return e.map(R.clone);if(R.isObject(e)){for(var t=Object.create(e),r=Object.keys(e),a=r.length,n=0;n<a;++n)t[r[n]]=R.clone(e[r[n]]);return t}return e},_merger:function(e,t,r,a){if(Pr(e)){var n=t[e],s=r[e];R.isObject(n)&&R.isObject(s)?R.merge(n,s,a):t[e]=R.clone(s)}},_mergerIf:function(e,t,r){if(Pr(e)){var a=t[e],n=r[e];R.isObject(a)&&R.isObject(n)?R.mergeIf(a,n):t.hasOwnProperty(e)||(t[e]=R.clone(n))}},merge:function(e,t,r){var s,d,c,u,h,a=R.isArray(t)?t:[t],n=a.length;if(!R.isObject(e))return e;for(s=(r=r||{}).merger||R._merger,d=0;d<n;++d)if(R.isObject(t=a[d]))for(h=0,u=(c=Object.keys(t)).length;h<u;++h)s(c[h],e,t,r);return e},mergeIf:function(e,t){return R.merge(e,t,{merger:R._mergerIf})},extend:Object.assign||function(e){return R.merge(e,[].slice.call(arguments,1),{merger:function(t,r,a){r[t]=a[t]}})},inherits:function(e){var t=this,r=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},a=function(){this.constructor=r};return a.prototype=t.prototype,r.prototype=new a,r.extend=R.inherits,e&&R.extend(r.prototype,e),r.__super__=t.prototype,r},_deprecated:function(e,t,r,a){void 0!==t&&console.warn(e+': "'+r+'" is deprecated. Please use "'+a+'" instead')}},Ne=R;R.callCallback=R.callback,R.indexOf=function(e,t,r){return Array.prototype.indexOf.call(e,t,r)},R.getValueOrDefault=R.valueOrDefault,R.getValueAtIndexOrDefault=R.valueAtIndexOrDefault;var Qt={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,r=0,a=1;return 0===e?0:1===e?1:(r||(r=.3),a<1?(a=1,t=r/4):t=r/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r))},easeOutElastic:function(e){var t=1.70158,r=0,a=1;return 0===e?0:1===e?1:(r||(r=.3),a<1?(a=1,t=r/4):t=r/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/r)+1)},easeInOutElastic:function(e){var t=1.70158,r=0,a=1;return 0===e?0:2==(e/=.5)?1:(r||(r=.45),a<1?(a=1,t=r/4):t=r/(2*Math.PI)*Math.asin(1/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-Qt.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*Qt.easeInBounce(2*e):.5*Qt.easeOutBounce(2*e-1)+.5}},ln={effects:Qt};Ne.easingEffects=Qt;var xe=Math.PI,dn=xe/180,Zr=2*xe,Fe=xe/2,dt=xe/4,Wi=2*xe/3,pi={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,r,a,n,s){if(s){var d=Math.min(s,n/2,a/2),c=t+d,u=r+d,h=t+a-d,g=r+n-d;e.moveTo(t,u),c<h&&u<g?(e.arc(c,u,d,-xe,-Fe),e.arc(h,u,d,-Fe,0),e.arc(h,g,d,0,Fe),e.arc(c,g,d,Fe,xe)):c<h?(e.moveTo(c,r),e.arc(h,u,d,-Fe,Fe),e.arc(c,u,d,Fe,xe+Fe)):u<g?(e.arc(c,u,d,-xe,0),e.arc(c,g,d,0,xe)):e.arc(c,u,d,-xe,xe),e.closePath(),e.moveTo(t,r)}else e.rect(t,r,a,n)},drawPoint:function(e,t,r,a,n,s){var d,c,u,h,g,v=(s||0)*dn;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(d=t.toString())||"[object HTMLCanvasElement]"===d))return e.save(),e.translate(a,n),e.rotate(v),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(r)||r<=0)){switch(e.beginPath(),t){default:e.arc(a,n,r,0,Zr),e.closePath();break;case"triangle":e.moveTo(a+Math.sin(v)*r,n-Math.cos(v)*r),v+=Wi,e.lineTo(a+Math.sin(v)*r,n-Math.cos(v)*r),v+=Wi,e.lineTo(a+Math.sin(v)*r,n-Math.cos(v)*r),e.closePath();break;case"rectRounded":h=r-(g=.516*r),c=Math.cos(v+dt)*h,u=Math.sin(v+dt)*h,e.arc(a-c,n-u,g,v-xe,v-Fe),e.arc(a+u,n-c,g,v-Fe,v),e.arc(a+c,n+u,g,v,v+Fe),e.arc(a-u,n+c,g,v+Fe,v+xe),e.closePath();break;case"rect":if(!s){h=Math.SQRT1_2*r,e.rect(a-h,n-h,2*h,2*h);break}v+=dt;case"rectRot":c=Math.cos(v)*r,u=Math.sin(v)*r,e.moveTo(a-c,n-u),e.lineTo(a+u,n-c),e.lineTo(a+c,n+u),e.lineTo(a-u,n+c),e.closePath();break;case"crossRot":v+=dt;case"cross":c=Math.cos(v)*r,u=Math.sin(v)*r,e.moveTo(a-c,n-u),e.lineTo(a+c,n+u),e.moveTo(a+u,n-c),e.lineTo(a-u,n+c);break;case"star":c=Math.cos(v)*r,u=Math.sin(v)*r,e.moveTo(a-c,n-u),e.lineTo(a+c,n+u),e.moveTo(a+u,n-c),e.lineTo(a-u,n+c),v+=dt,c=Math.cos(v)*r,u=Math.sin(v)*r,e.moveTo(a-c,n-u),e.lineTo(a+c,n+u),e.moveTo(a+u,n-c),e.lineTo(a-u,n+c);break;case"line":c=Math.cos(v)*r,u=Math.sin(v)*r,e.moveTo(a-c,n-u),e.lineTo(a+c,n+u);break;case"dash":e.moveTo(a,n),e.lineTo(a+Math.cos(v)*r,n+Math.sin(v)*r)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){var r=1e-6;return e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,r,a){var n=r.steppedLine;if(n){if("middle"===n){var s=(t.x+r.x)/2;e.lineTo(s,a?r.y:t.y),e.lineTo(s,a?t.y:r.y)}else"after"===n&&!a||"after"!==n&&a?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}else r.tension?e.bezierCurveTo(a?t.controlPointPreviousX:t.controlPointNextX,a?t.controlPointPreviousY:t.controlPointNextY,a?r.controlPointNextX:r.controlPointPreviousX,a?r.controlPointNextY:r.controlPointPreviousY,r.x,r.y):e.lineTo(r.x,r.y)}},un=pi;Ne.clear=pi.clear,Ne.drawRoundedRectangle=function(e){e.beginPath(),pi.roundedRect.apply(pi,arguments)};var Or={_set:function(e,t){return Ne.merge(this[e]||(this[e]={}),t)}};Or._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var I=Or,mi=Ne.valueOrDefault;var cn={toLineHeight:function(e,t){var r=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!r||"normal"===r[1])return 1.2*t;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,r,a,n;return Ne.isObject(e)?(t=+e.top||0,r=+e.right||0,a=+e.bottom||0,n=+e.left||0):t=r=a=n=+e||0,{top:t,right:r,bottom:a,left:n,height:t+a,width:n+r}},_parseFont:function(e){var t=I.global,r=mi(e.fontSize,t.defaultFontSize),a={family:mi(e.fontFamily,t.defaultFontFamily),lineHeight:Ne.options.toLineHeight(mi(e.lineHeight,t.defaultLineHeight),r),size:r,style:mi(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return a.string=function ut(e){return!e||Ne.isNullOrUndef(e.size)||Ne.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a},resolve:function(e,t,r,a){var s,d,c,n=!0;for(s=0,d=e.length;s<d;++s)if(void 0!==(c=e[s])&&(void 0!==t&&"function"==typeof c&&(c=c(t),n=!1),void 0!==r&&Ne.isArray(c)&&(c=c[r],n=!1),void 0!==c))return a&&!n&&(a.cacheable=!1),c}},Br={_factorize:function(e){var a,t=[],r=Math.sqrt(e);for(a=1;a<r;a++)e%a==0&&(t.push(a),t.push(e/a));return r===(0|r)&&t.push(r),t.sort(function(n,s){return n-s}).pop(),t},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,r=Math.round(t);return e===Math.pow(10,r)?r:t}},hn=Br;Ne.log10=Br.log10;var m=Ne,yn=un,ct=cn,xn=hn,$t={getRtlAdapter:function(e,t,r){return e?function(e,t){return{x:function(r){return e+e+t-r},setWidth:function(r){t=r},textAlign:function(r){return"center"===r?r:"right"===r?"left":"right"},xPlus:function(r,a){return r-a},leftForLtr:function(r,a){return r-a}}}(t,r):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},overrideTextDirection:function(e,t){var r,a;("ltr"===t||"rtl"===t)&&(a=[(r=e.canvas.style).getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=a)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};m.easing=ln,m.canvas=yn,m.options=ct,m.math=xn,m.rtl=$t;var ht=function(e){m.extend(this,e),this.initialize.apply(this,arguments)};m.extend(ht.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=m.extend({},e._model)),e._start={},e},transition:function(e){var t=this,r=t._model,a=t._start,n=t._view;return r&&1!==e?(n||(n=t._view={}),a||(a=t._start={}),function Cn(e,t,r,a){var s,d,c,u,h,g,v,b,y,n=Object.keys(r);for(s=0,d=n.length;s<d;++s)if(g=r[c=n[s]],t.hasOwnProperty(c)||(t[c]=g),(u=t[c])!==g&&"_"!==c[0]){if(e.hasOwnProperty(c)||(e[c]=u),(v=typeof g)==typeof(h=e[c]))if("string"===v){if((b=tt(h)).valid&&(y=tt(g)).valid){t[c]=y.mix(b,a).rgbString();continue}}else if(m.isFinite(h)&&m.isFinite(g)){t[c]=h+(g-h)*a;continue}t[c]=g}}(a,n,r,e),t):(t._view=m.extend({},r),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return m.isNumber(this._model.x)&&m.isNumber(this._model.y)}}),ht.extend=m.inherits;var qe=ht,ji=qe.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Yi=ji;Object.defineProperty(ji.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ji.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),I._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:m.noop,onComplete:m.noop}});var zi={animations:[],request:null,addAnimation:function(e,t,r,a){var s,d,n=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=r,a||(e.animating=!0),s=0,d=n.length;s<d;++s)if(n[s].chart===e)return void(n[s]=t);n.push(t),1===n.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=m.findIndex(this.animations,function(r){return r.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=m.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){var e=this;e.advance(),e.animations.length>0&&e.requestAnimationFrame()},advance:function(){for(var t,r,a,n,e=this.animations,s=0;s<e.length;)r=(t=e[s]).chart,a=t.numSteps,n=Math.floor((Date.now()-t.startTime)/t.duration*a)+1,t.currentStep=Math.min(n,a),m.callback(t.render,[r,t],r),m.callback(t.onAnimationProgress,[t],r),t.currentStep>=a?(m.callback(t.onAnimationComplete,[t],r),r.animating=!1,e.splice(s,1)):++s}},Ft=m.options.resolve,Ur=["push","pop","shift","splice","unshift"];function Er(e,t){var r=e._chartjs;if(r){var a=r.listeners,n=a.indexOf(t);-1!==n&&a.splice(n,1),!(a.length>0)&&(Ur.forEach(function(s){delete e[s]}),delete e._chartjs)}}var Ji=function(e,t){this.initialize(e,t)};m.extend(Ji.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var r=this;r.chart=e,r.index=t,r.linkScales(),r.addElements(),r._type=r.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),r=e.chart,a=r.scales,n=e.getDataset(),s=r.options.scales;(null===t.xAxisID||!(t.xAxisID in a)||n.xAxisID)&&(t.xAxisID=n.xAxisID||s.xAxes[0].id),(null===t.yAxisID||!(t.yAxisID in a)||n.yAxisID)&&(t.yAxisID=n.yAxisID||s.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&Er(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,r=t.dataElementType;return r&&new r({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var n,s,e=this,t=e.getMeta(),r=e.getDataset().data||[],a=t.data;for(n=0,s=r.length;n<s;++n)a[n]=a[n]||e.createMetaData(n);t.dataset=t.dataset||e.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,t=e.getDataset(),r=t.data||(t.data=[]);e._data!==r&&(e._data&&Er(e._data,e),r&&Object.isExtensible(r)&&function An(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ur.forEach(function(r){var a="onData"+r.charAt(0).toUpperCase()+r.slice(1),n=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value:function(){var s=Array.prototype.slice.call(arguments),d=n.apply(this,s);return m.each(e._chartjs.listeners,function(c){"function"==typeof c[a]&&c[a].apply(c,s)}),d}})}))}(r,e),e._data=r),e.resyncElements()},_configure:function(){var e=this;e._config=m.merge(Object.create(null),[e.chart.options.datasets[e._type],e.getDataset()],{merger:function(t,r,a){"_meta"!==t&&"data"!==t&&m._merger(t,r,a)}})},_update:function(e){var t=this;t._configure(),t._cachedDataOpts=null,t.update(e)},update:m.noop,transition:function(e){for(var t=this.getMeta(),r=t.data||[],a=r.length,n=0;n<a;++n)r[n].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],r=t.length,a=0;for(e.dataset&&e.dataset.draw();a<r;++a)t[a].draw()},getStyle:function(e){var n,t=this,r=t.getMeta(),a=r.dataset;return t._configure(),(!1===(n=a&&void 0===e?t._resolveDatasetElementOptions(a||{}):t._resolveDataElementOptions(r.data[e=e||0]||{},e)).fill||null===n.fill)&&(n.backgroundColor=n.borderColor),n},_resolveDatasetElementOptions:function(e,t){var h,g,v,b,r=this,a=r.chart,n=r._config,s=e.custom||{},d=a.options.elements[r.datasetElementType.prototype._type]||{},c=r._datasetElementOptions,u={},y={chart:a,dataset:r.getDataset(),datasetIndex:r.index,hover:t};for(h=0,g=c.length;h<g;++h)v=c[h],b=t?"hover"+v.charAt(0).toUpperCase()+v.slice(1):v,u[v]=Ft([s[b],n[b],d[b]],y);return u},_resolveDataElementOptions:function(e,t){var r=this,a=e&&e.custom,n=r._cachedDataOpts;if(n&&!a)return n;var b,y,x,C,s=r.chart,d=r._config,c=s.options.elements[r.dataElementType.prototype._type]||{},u=r._dataElementOptions,h={},g={chart:s,dataIndex:t,dataset:r.getDataset(),datasetIndex:r.index},v={cacheable:!a};if(a=a||{},m.isArray(u))for(y=0,x=u.length;y<x;++y)h[C=u[y]]=Ft([a[C],d[C],c[C]],g,t,v);else for(y=0,x=(b=Object.keys(u)).length;y<x;++y)h[C=b[y]]=Ft([a[C],d[u[C]],d[C],c[C]],g,t,v);return v.cacheable&&(r._cachedDataOpts=Object.freeze(h)),h},removeHoverStyle:function(e){m.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],r=e._index,a=e.custom||{},n=e._model,s=m.getHoverColor;e.$previousStyle={backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:n.borderWidth},n.backgroundColor=Ft([a.hoverBackgroundColor,t.hoverBackgroundColor,s(n.backgroundColor)],void 0,r),n.borderColor=Ft([a.hoverBorderColor,t.hoverBorderColor,s(n.borderColor)],void 0,r),n.borderWidth=Ft([a.hoverBorderWidth,t.hoverBorderWidth,n.borderWidth],void 0,r)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var r,a,n,s,d,c,e=this.getMeta().dataset,t={};if(e){for(c=e._model,d=this._resolveDatasetElementOptions(e,!0),r=0,a=(s=Object.keys(d)).length;r<a;++r)t[n=s[r]]=c[n],c[n]=d[n];e.$previousStyle=t}},resyncElements:function(){var e=this,t=e.getMeta(),r=e.getDataset().data,a=t.data.length,n=r.length;n<a?t.data.splice(n,a-n):n>a&&e.insertElements(a,n-a)},insertElements:function(e,t){for(var r=0;r<t;++r)this.addElementAndReset(e+r)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Ji.extend=m.inherits;var Ie=Ji,We=2*Math.PI;function Rr(e,t){var r=t.startAngle,a=t.endAngle,n=t.pixelMargin,s=n/t.outerRadius,d=t.x,c=t.y;e.beginPath(),e.arc(d,c,t.outerRadius,r-s,a+s),t.innerRadius>n?e.arc(d,c,t.innerRadius-n,a+(s=n/t.innerRadius),r-s,!0):e.arc(d,c,n,a+Math.PI/2,r-Math.PI/2),e.closePath(),e.clip()}function Tn(e,t,r){var a="inner"===t.borderAlign;a?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),r.fullCircles&&function wn(e,t,r,a){var s,n=r.endAngle;for(a&&(r.endAngle=r.startAngle+We,Rr(e,r),r.endAngle=n,r.endAngle===r.startAngle&&r.fullCircles&&(r.endAngle+=We,r.fullCircles--)),e.beginPath(),e.arc(r.x,r.y,r.innerRadius,r.startAngle+We,r.startAngle,!0),s=0;s<r.fullCircles;++s)e.stroke();for(e.beginPath(),e.arc(r.x,r.y,t.outerRadius,r.startAngle,r.startAngle+We),s=0;s<r.fullCircles;++s)e.stroke()}(e,t,r,a),a&&Rr(e,r),e.beginPath(),e.arc(r.x,r.y,t.outerRadius,r.startAngle,r.endAngle),e.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),e.closePath(),e.stroke()}I._set("global",{elements:{arc:{backgroundColor:I.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Sn=qe.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var r=this._view;if(r){for(var a=m.getAngleFromPoint(r,{x:e,y:t}),n=a.angle,s=a.distance,d=r.startAngle,c=r.endAngle;c<d;)c+=We;for(;n>c;)n-=We;for(;n<d;)n+=We;return n>=d&&n<=c&&s>=r.innerRadius&&s<=r.outerRadius}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,r=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*r,y:e.y+Math.sin(t)*r}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,r=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*r,y:e.y+Math.sin(t)*r}},draw:function(){var n,e=this._chart.ctx,t=this._view,r="inner"===t.borderAlign?.33:0,a={x:t.x,y:t.y,innerRadius:t.innerRadius,outerRadius:Math.max(t.outerRadius-r,0),pixelMargin:r,startAngle:t.startAngle,endAngle:t.endAngle,fullCircles:Math.floor(t.circumference/We)};if(e.save(),e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,a.fullCircles){for(a.endAngle=a.startAngle+We,e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),n=0;n<a.fullCircles;++n)e.fill();a.endAngle=a.startAngle+t.circumference%We}e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),e.fill(),t.borderWidth&&Tn(e,t,a),e.restore()}}),Lr=m.valueOrDefault,ft=I.global.defaultColor;I._set("global",{elements:{line:{tension:.4,backgroundColor:ft,borderWidth:3,borderColor:ft,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var qr=qe.extend({_type:"line",draw:function(){var h,g,v,e=this,t=e._view,r=e._chart.ctx,a=t.spanGaps,n=e._children.slice(),s=I.global,d=s.elements.line,c=-1,u=e._loop;if(n.length){if(e._loop){for(h=0;h<n.length;++h)if(g=m.previousItem(n,h),!n[h]._view.skip&&g._view.skip){n=n.slice(h).concat(n.slice(0,h)),u=a;break}u&&n.push(n[0])}for(r.save(),r.lineCap=t.borderCapStyle||d.borderCapStyle,r.setLineDash&&r.setLineDash(t.borderDash||d.borderDash),r.lineDashOffset=Lr(t.borderDashOffset,d.borderDashOffset),r.lineJoin=t.borderJoinStyle||d.borderJoinStyle,r.lineWidth=Lr(t.borderWidth,d.borderWidth),r.strokeStyle=t.borderColor||s.defaultColor,r.beginPath(),(v=n[0]._view).skip||(r.moveTo(v.x,v.y),c=0),h=1;h<n.length;++h)v=n[h]._view,g=-1===c?m.previousItem(n,h):n[c],v.skip||(c!==h-1&&!a||-1===c?r.moveTo(v.x,v.y):m.canvas.lineTo(r,g._view,v),c=h);u&&r.closePath(),r.stroke(),r.restore()}}}),kn=m.valueOrDefault,Wr=I.global.defaultColor;function jr(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}I._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Wr,borderColor:Wr,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Dn=qe.extend({_type:"point",inRange:function(e,t){var r=this._view;return!!r&&Math.pow(e-r.x,2)+Math.pow(t-r.y,2)<Math.pow(r.hitRadius+r.radius,2)},inLabelRange:jr,inXRange:jr,inYRange:function Mn(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,r=this._chart.ctx,a=t.pointStyle,n=t.rotation,s=t.radius,d=t.x,c=t.y,u=I.global,h=u.defaultColor;t.skip||(void 0===e||m.canvas._isPointInArea(t,e))&&(r.strokeStyle=t.borderColor||h,r.lineWidth=kn(t.borderWidth,u.elements.point.borderWidth),r.fillStyle=t.backgroundColor||h,m.canvas.drawPoint(r,a,s,d,c,n))}}),Gt=I.global.defaultColor;function bi(e){return e&&void 0!==e.width}function Yr(e){var t,r,a,n,s;return bi(e)?(t=e.x-(s=e.width/2),r=e.x+s,a=Math.min(e.y,e.base),n=Math.max(e.y,e.base)):(s=e.height/2,t=Math.min(e.x,e.base),r=Math.max(e.x,e.base),a=e.y-s,n=e.y+s),{left:t,top:a,right:r,bottom:n}}function zr(e,t,r){return e===t?r:e===r?t:e}function Fn(e,t,r){var s,d,c,u,a=e.borderWidth,n=function Nn(e){var t=e.borderSkipped,r={};return t&&(e.horizontal?e.base>e.x&&(t=zr(t,"left","right")):e.base<e.y&&(t=zr(t,"bottom","top")),r[t]=!0),r}(e);return m.isObject(a)?(s=+a.top||0,d=+a.right||0,c=+a.bottom||0,u=+a.left||0):s=d=c=u=+a||0,{t:n.top||s<0?0:s>r?r:s,r:n.right||d<0?0:d>t?t:d,b:n.bottom||c<0?0:c>r?r:c,l:n.left||u<0?0:u>t?t:u}}function Kt(e,t,r){var a=null===t,n=null===r,s=!(!e||a&&n)&&Yr(e);return s&&(a||t>=s.left&&t<=s.right)&&(n||r>=s.top&&r<=s.bottom)}I._set("global",{elements:{rectangle:{backgroundColor:Gt,borderColor:Gt,borderSkipped:"bottom",borderWidth:0}}});var Pn=qe.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,r=function In(e){var t=Yr(e),r=t.right-t.left,a=t.bottom-t.top,n=Fn(e,r/2,a/2);return{outer:{x:t.left,y:t.top,w:r,h:a},inner:{x:t.left+n.l,y:t.top+n.t,w:r-n.l-n.r,h:a-n.t-n.b}}}(t),a=r.outer,n=r.inner;e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.w,a.h),(a.w!==n.w||a.h!==n.h)&&(e.save(),e.beginPath(),e.rect(a.x,a.y,a.w,a.h),e.clip(),e.fillStyle=t.borderColor,e.rect(n.x,n.y,n.w,n.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Kt(this._view,e,t)},inLabelRange:function(e,t){var r=this._view;return bi(r)?Kt(r,e,null):Kt(r,null,t)},inXRange:function(e){return Kt(this._view,e,null)},inYRange:function(e){return Kt(this._view,null,e)},getCenterPoint:function(){var t,r,e=this._view;return bi(e)?(t=e.x,r=(e.y+e.base)/2):(t=(e.x+e.base)/2,r=e.y),{x:t,y:r}},getArea:function(){var e=this._view;return bi(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),le={},On=qr,Bn=Dn,Un=Pn;le.Arc=Sn,le.Line=On,le.Point=Bn,le.Rectangle=Un;var je=m._deprecated,It=m.valueOrDefault;function Rn(e,t,r){var c,u,a=r.barThickness,n=t.stackCount,s=t.pixels[e],d=m.isNullOrUndef(a)?function En(e,t){var a,n,s,d,r=e._length;for(s=1,d=t.length;s<d;++s)r=Math.min(r,Math.abs(t[s]-t[s-1]));for(s=0,d=e.getTicks().length;s<d;++s)n=e.getPixelForTick(s),r=s>0?Math.min(r,Math.abs(n-a)):r,a=n;return r}(t.scale,t.pixels):-1;return m.isNullOrUndef(a)?(c=d*r.categoryPercentage,u=r.barPercentage):(c=a*n,u=1),{chunk:c/n,ratio:u,start:s-c/2}}I._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),I._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Vi=Ie.extend({dataElementType:le.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,r,e=this;Ie.prototype.initialize.apply(e,arguments),(t=e.getMeta()).stack=e.getDataset().stack,t.bar=!0,r=e._getIndexScale().options,je("bar chart",r.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),je("bar chart",r.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),je("bar chart",r.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),je("bar chart",e._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),je("bar chart",r.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var a,n,t=this,r=t.getMeta().data;for(t._ruler=t.getRuler(),a=0,n=r.length;a<n;++a)t.updateElement(r[a],a,e)},updateElement:function(e,t,r){var a=this,n=a.getMeta(),s=a.getDataset(),d=a._resolveDataElementOptions(e,t);e._xScale=a.getScaleForId(n.xAxisID),e._yScale=a.getScaleForId(n.yAxisID),e._datasetIndex=a.index,e._index=t,e._model={backgroundColor:d.backgroundColor,borderColor:d.borderColor,borderSkipped:d.borderSkipped,borderWidth:d.borderWidth,datasetLabel:s.label,label:a.chart.data.labels[t]},m.isArray(s.data[t])&&(e._model.borderSkipped=null),a._updateElementGeometry(e,t,r,d),e.pivot()},_updateElementGeometry:function(e,t,r,a){var n=this,s=e._model,d=n._getValueScale(),c=d.getBasePixel(),u=d.isHorizontal(),h=n._ruler||n.getRuler(),g=n.calculateBarValuePixels(n.index,t,a),v=n.calculateBarIndexPixels(n.index,t,h,a);s.horizontal=u,s.base=r?c:g.base,s.x=u?r?c:g.head:v.center,s.y=u?v.center:r?c:g.head,s.height=u?v.size:void 0,s.width=u?void 0:v.size},_getStacks:function(e){var c,u,r=this._getIndexScale(),a=r._getMatchingVisibleMetas(this._type),n=r.options.stacked,s=a.length,d=[];for(c=0;c<s&&(u=a[c],(!1===n||-1===d.indexOf(u.stack)||void 0===n&&void 0===u.stack)&&d.push(u.stack),u.index!==e);++c);return d},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var r=this._getStacks(e),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a},getRuler:function(){var a,n,e=this,t=e._getIndexScale(),r=[];for(a=0,n=e.getMeta().data.length;a<n;++a)r.push(t.getPixelForValue(null,a,e.index));return{pixels:r,start:t._startPixel,end:t._endPixel,stackCount:e.getStackCount(),scale:t}},calculateBarValuePixels:function(e,t,r){var A,S,D,N,U,O,z,a=this,n=a.chart,s=a._getValueScale(),d=s.isHorizontal(),c=n.data.datasets,u=s._getMatchingVisibleMetas(a._type),h=s._parseValue(c[e].data[t]),g=r.minBarLength,v=s.options.stacked,b=a.getMeta().stack,y=void 0===h.start?0:h.max>=0&&h.min>=0?h.min:h.max,x=void 0===h.start?h.end:h.max>=0&&h.min>=0?h.max-h.min:h.min-h.max,C=u.length;if(v||void 0===v&&void 0!==b)for(A=0;A<C&&(S=u[A]).index!==e;++A)S.stack===b&&(D=void 0===(z=s._parseValue(c[S.index].data[t])).start?z.end:z.min>=0&&z.max>=0?z.max:z.min,(h.min<0&&D<0||h.max>=0&&D>0)&&(y+=D));return N=s.getPixelForValue(y),O=(U=s.getPixelForValue(y+x))-N,void 0!==g&&Math.abs(O)<g&&(O=g,U=x>=0&&!d||x<0&&d?N-g:N+g),{size:O,base:N,head:U,center:U+O/2}},calculateBarIndexPixels:function(e,t,r,a){var s="flex"===a.barThickness?function Ln(e,t,r){var u,a=t.pixels,n=a[e],s=e>0?a[e-1]:null,d=e<a.length-1?a[e+1]:null,c=r.categoryPercentage;return null===s&&(s=n-(null===d?t.end-t.start:d-n)),null===d&&(d=n+n-s),u=n-(n-Math.min(s,d))/2*c,{chunk:Math.abs(d-s)/2*c/t.stackCount,ratio:r.barPercentage,start:u}}(t,r,a):Rn(t,r,a),d=this.getStackIndex(e,this.getMeta().stack),c=s.start+s.chunk*d+s.chunk/2,u=Math.min(It(a.maxBarThickness,1/0),s.chunk*s.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}},draw:function(){var e=this,t=e.chart,r=e._getValueScale(),a=e.getMeta().data,n=e.getDataset(),s=a.length,d=0;for(m.canvas.clipArea(t.ctx,t.chartArea);d<s;++d){var c=r._parseValue(n.data[d]);!isNaN(c.min)&&!isNaN(c.max)&&a[d].draw()}m.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var e=this,t=m.extend({},Ie.prototype._resolveDataElementOptions.apply(e,arguments)),r=e._getIndexScale().options,a=e._getValueScale().options;return t.barPercentage=It(r.barPercentage,t.barPercentage),t.barThickness=It(r.barThickness,t.barThickness),t.categoryPercentage=It(r.categoryPercentage,t.categoryPercentage),t.maxBarThickness=It(r.maxBarThickness,t.maxBarThickness),t.minBarLength=It(a.minBarLength,t.minBarLength),t}}),Hi=m.valueOrDefault,Jr=m.options.resolve;I._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": ("+e.xLabel+", "+e.yLabel+", "+t.datasets[e.datasetIndex].data[e.index].r+")"}}}});var qn=Ie.extend({dataElementType:le.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,r=t.getMeta();m.each(r.data,function(n,s){t.updateElement(n,s,e)})},updateElement:function(e,t,r){var a=this,n=a.getMeta(),s=e.custom||{},d=a.getScaleForId(n.xAxisID),c=a.getScaleForId(n.yAxisID),u=a._resolveDataElementOptions(e,t),h=a.getDataset().data[t],g=a.index,v=r?d.getPixelForDecimal(.5):d.getPixelForValue("object"==typeof h?h:NaN,t,g),b=r?c.getBasePixel():c.getPixelForValue(h,t,g);e._xScale=d,e._yScale=c,e._options=u,e._datasetIndex=g,e._index=t,e._model={backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,hitRadius:u.hitRadius,pointStyle:u.pointStyle,rotation:u.rotation,radius:r?0:u.radius,skip:s.skip||isNaN(v)||isNaN(b),x:v,y:b},e.pivot()},setHoverStyle:function(e){var t=e._model,r=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Hi(r.hoverBackgroundColor,a(r.backgroundColor)),t.borderColor=Hi(r.hoverBorderColor,a(r.borderColor)),t.borderWidth=Hi(r.hoverBorderWidth,r.borderWidth),t.radius=r.radius+r.hoverRadius},_resolveDataElementOptions:function(e,t){var r=this,a=r.chart,n=r.getDataset(),s=e.custom||{},d=n.data[t]||{},c=Ie.prototype._resolveDataElementOptions.apply(r,arguments),u={chart:a,dataIndex:t,dataset:n,datasetIndex:r.index};return r._cachedDataOpts===c&&(c=m.extend({},c)),c.radius=Jr([s.radius,d.r,r._config.radius,a.options.elements.point.radius],u,t),c}}),_i=m.valueOrDefault,gt=Math.PI,Ye=2*gt,vt=gt/2;I._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var s,d,c,t=document.createElement("ul"),r=e.data,a=r.datasets,n=r.labels;if(t.setAttribute("class",e.id+"-legend"),a.length)for(s=0,d=a[0].data.length;s<d;++s)(c=t.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[s],n[s]&&c.appendChild(document.createTextNode(n[s]));return t.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(r,a){var n=e.getDatasetMeta(0),s=n.controller.getStyle(a);return{text:r,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,hidden:isNaN(t.datasets[0].data[a])||n.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var n,s,d,r=t.index,a=this.chart;for(n=0,s=(a.data.datasets||[]).length;n<s;++n)(d=a.getDatasetMeta(n)).data[r]&&(d.data[r].hidden=!d.data[r].hidden);a.update()}},cutoutPercentage:50,rotation:-vt,circumference:Ye,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var r=t.labels[e.index],a=": "+t.datasets[e.datasetIndex].data[e.index];return m.isArray(r)?(r=r.slice())[0]+=a:r+=a,r}}}});var Xt=Ie.extend({dataElementType:le.Arc,linkScales:m.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,r=0;r<e;++r)this.chart.isDatasetVisible(r)&&++t;return t},update:function(e){var A,S,t=this,r=t.chart,a=r.chartArea,n=r.options,s=1,d=1,c=0,u=0,h=t.getMeta(),g=h.data,v=n.cutoutPercentage/100||0,b=n.circumference,y=t._getRingWeight(t.index);if(b<Ye){var D=n.rotation%Ye,N=(D+=D>=gt?-Ye:D<-gt?Ye:0)+b,U=Math.cos(D),O=Math.sin(D),z=Math.cos(N),Y=Math.sin(N),$=D<=0&&N>=0||N>=Ye,G=D<=vt&&N>=vt||N>=Ye+vt,de=D<=-vt&&N>=-vt||N>=gt+vt,Z=D===-gt||N>=gt?-1:Math.min(U,U*v,z,z*v),se=de?-1:Math.min(O,O*v,Y,Y*v),qt=$?1:Math.max(U,U*v,z,z*v),Wt=G?1:Math.max(O,O*v,Y,Y*v);s=(qt-Z)/2,d=(Wt-se)/2,c=-(qt+Z)/2,u=-(Wt+se)/2}for(A=0,S=g.length;A<S;++A)g[A]._options=t._resolveDataElementOptions(g[A],A);for(r.borderWidth=t.getMaxBorderWidth(),r.outerRadius=Math.max(Math.min((a.right-a.left-r.borderWidth)/s,(a.bottom-a.top-r.borderWidth)/d)/2,0),r.innerRadius=Math.max(r.outerRadius*v,0),r.radiusLength=(r.outerRadius-r.innerRadius)/(t._getVisibleDatasetWeightTotal()||1),r.offsetX=c*r.outerRadius,r.offsetY=u*r.outerRadius,h.total=t.calculateTotal(),t.outerRadius=r.outerRadius-r.radiusLength*t._getRingWeightOffset(t.index),t.innerRadius=Math.max(t.outerRadius-r.radiusLength*y,0),A=0,S=g.length;A<S;++A)t.updateElement(g[A],A,e)},updateElement:function(e,t,r){var a=this,n=a.chart,s=n.chartArea,d=n.options,c=d.animation,u=(s.left+s.right)/2,h=(s.top+s.bottom)/2,g=d.rotation,v=d.rotation,b=a.getDataset(),y=r&&c.animateRotate||e.hidden?0:a.calculateCircumference(b.data[t])*(d.circumference/Ye),A=e._options||{};m.extend(e,{_datasetIndex:a.index,_index:t,_model:{backgroundColor:A.backgroundColor,borderColor:A.borderColor,borderWidth:A.borderWidth,borderAlign:A.borderAlign,x:u+n.offsetX,y:h+n.offsetY,startAngle:g,endAngle:v,circumference:y,outerRadius:r&&c.animateScale?0:a.outerRadius,innerRadius:r&&c.animateScale?0:a.innerRadius,label:m.valueAtIndexOrDefault(b.label,t,n.data.labels[t])}});var S=e._model;(!r||!c.animateRotate)&&(S.startAngle=0===t?d.rotation:a.getMeta().data[t-1]._model.endAngle,S.endAngle=S.startAngle+S.circumference),e.pivot()},calculateTotal:function(){var a,e=this.getDataset(),t=this.getMeta(),r=0;return m.each(t.data,function(n,s){a=e.data[s],!isNaN(a)&&!n.hidden&&(r+=Math.abs(a))}),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?Ye*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var n,s,d,c,u,h,g,v,r=0,a=this.chart;if(!e)for(n=0,s=a.data.datasets.length;n<s;++n)if(a.isDatasetVisible(n)){e=(d=a.getDatasetMeta(n)).data,n!==this.index&&(u=d.controller);break}if(!e)return 0;for(n=0,s=e.length;n<s;++n)c=e[n],u?(u._configure(),h=u._resolveDataElementOptions(c,n)):h=c._options,"inner"!==h.borderAlign&&(r=(v=h.hoverBorderWidth)>(r=(g=h.borderWidth)>r?g:r)?v:r);return r},setHoverStyle:function(e){var t=e._model,r=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=_i(r.hoverBackgroundColor,a(r.backgroundColor)),t.borderColor=_i(r.hoverBorderColor,a(r.borderColor)),t.borderWidth=_i(r.hoverBorderWidth,r.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t},_getRingWeight:function(e){return Math.max(_i(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});I._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),I._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Wn=Vi.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),$e=m.valueOrDefault,jn=m.options.resolve,pt=m.canvas._isPointInArea;function Vr(e,t){var r=e&&e.options.ticks||{},a=r.reverse,n=void 0===r.min?t:0,s=void 0===r.max?t:0;return{start:a?s:n,end:a?n:s}}function Yn(e,t,r){var a=r/2,n=Vr(e,a),s=Vr(t,a);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Hr(e){var t,r,a,n;return m.isObject(e)?(t=e.top,r=e.right,a=e.bottom,n=e.left):t=r=a=n=e,{top:t,right:r,bottom:a,left:n}}I._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Qi=Ie.extend({datasetElementType:le.Line,dataElementType:le.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var u,h,t=this,r=t.getMeta(),a=r.dataset,n=r.data||[],d=t._config,c=t._showLine=$e(d.showLine,t.chart.options.showLines);for(t._xScale=t.getScaleForId(r.xAxisID),t._yScale=t.getScaleForId(r.yAxisID),c&&(void 0!==d.tension&&void 0===d.lineTension&&(d.lineTension=d.tension),a._scale=t._yScale,a._datasetIndex=t.index,a._children=n,a._model=t._resolveDatasetElementOptions(a),a.pivot()),u=0,h=n.length;u<h;++u)t.updateElement(n[u],u,e);for(c&&0!==a._model.tension&&t.updateBezierControlPoints(),u=0,h=n.length;u<h;++u)n[u].pivot()},updateElement:function(e,t,r){var b,y,a=this,n=a.getMeta(),s=e.custom||{},d=a.getDataset(),c=a.index,u=d.data[t],h=a._xScale,g=a._yScale,v=n.dataset._model,x=a._resolveDataElementOptions(e,t);b=h.getPixelForValue("object"==typeof u?u:NaN,t,c),y=r?g.getBasePixel():a.calculatePointY(u,t,c),e._xScale=h,e._yScale=g,e._options=x,e._datasetIndex=c,e._index=t,e._model={x:b,y,skip:s.skip||isNaN(b)||isNaN(y),radius:x.radius,pointStyle:x.pointStyle,rotation:x.rotation,backgroundColor:x.backgroundColor,borderColor:x.borderColor,borderWidth:x.borderWidth,tension:$e(s.tension,v?v.tension:0),steppedLine:!!v&&v.steppedLine,hitRadius:x.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,r=t._config,a=e.custom||{},n=t.chart.options,s=n.elements.line,d=Ie.prototype._resolveDatasetElementOptions.apply(t,arguments);return d.spanGaps=$e(r.spanGaps,n.spanGaps),d.tension=$e(r.lineTension,s.tension),d.steppedLine=jn([a.steppedLine,r.steppedLine,s.stepped]),d.clip=Hr($e(r.clip,Yn(t._xScale,t._yScale,d.borderWidth))),d},calculatePointY:function(e,t,r){var u,g,v,b,y,x,n=this.chart,s=this._yScale,d=0,c=0;if(s.options.stacked){for(b=+s.getRightValue(e),x=(y=n._getSortedVisibleDatasetMetas()).length,u=0;u<x&&(g=y[u]).index!==r;++u)"line"===g.type&&g.yAxisID===s.id&&((v=+s.getRightValue(n.data.datasets[g.index].data[t]))<0?c+=v||0:d+=v||0);return s.getPixelForValue(b<0?c+b:d+b)}return s.getPixelForValue(e)},updateBezierControlPoints:function(){var d,c,u,h,t=this.chart,r=this.getMeta(),a=r.dataset._model,n=t.chartArea,s=r.data||[];function g(v,b,y){return Math.max(Math.min(v,y),b)}if(a.spanGaps&&(s=s.filter(function(v){return!v._model.skip})),"monotone"===a.cubicInterpolationMode)m.splineCurveMonotone(s);else for(d=0,c=s.length;d<c;++d)u=s[d]._model,h=m.splineCurve(m.previousItem(s,d)._model,u,m.nextItem(s,d)._model,a.tension),u.controlPointPreviousX=h.previous.x,u.controlPointPreviousY=h.previous.y,u.controlPointNextX=h.next.x,u.controlPointNextY=h.next.y;if(t.options.elements.line.capBezierPoints)for(d=0,c=s.length;d<c;++d)pt(u=s[d]._model,n)&&(d>0&&pt(s[d-1]._model,n)&&(u.controlPointPreviousX=g(u.controlPointPreviousX,n.left,n.right),u.controlPointPreviousY=g(u.controlPointPreviousY,n.top,n.bottom)),d<s.length-1&&pt(s[d+1]._model,n)&&(u.controlPointNextX=g(u.controlPointNextX,n.left,n.right),u.controlPointNextY=g(u.controlPointNextY,n.top,n.bottom)))},draw:function(){var u,e=this,t=e.chart,r=e.getMeta(),a=r.data||[],n=t.chartArea,s=t.canvas,d=0,c=a.length;for(e._showLine&&(m.canvas.clipArea(t.ctx,{left:!1===(u=r.dataset._model.clip).left?0:n.left-u.left,right:!1===u.right?s.width:n.right+u.right,top:!1===u.top?0:n.top-u.top,bottom:!1===u.bottom?s.height:n.bottom+u.bottom}),r.dataset.draw(),m.canvas.unclipArea(t.ctx));d<c;++d)a[d].draw(n)},setHoverStyle:function(e){var t=e._model,r=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=$e(r.hoverBackgroundColor,a(r.backgroundColor)),t.borderColor=$e(r.hoverBorderColor,a(r.borderColor)),t.borderWidth=$e(r.hoverBorderWidth,r.borderWidth),t.radius=$e(r.hoverRadius,r.radius)}}),zn=m.options.resolve;I._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var s,d,c,t=document.createElement("ul"),r=e.data,a=r.datasets,n=r.labels;if(t.setAttribute("class",e.id+"-legend"),a.length)for(s=0,d=a[0].data.length;s<d;++s)(c=t.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[s],n[s]&&c.appendChild(document.createTextNode(n[s]));return t.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(r,a){var n=e.getDatasetMeta(0),s=n.controller.getStyle(a);return{text:r,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,hidden:isNaN(t.datasets[0].data[a])||n.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var n,s,d,r=t.index,a=this.chart;for(n=0,s=(a.data.datasets||[]).length;n<s;++n)(d=a.getDatasetMeta(n)).data[r].hidden=!d.data[r].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var Jn=Ie.extend({dataElementType:le.Arc,linkScales:m.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var u,h,g,t=this,r=t.getDataset(),a=t.getMeta(),n=t.chart.options.startAngle||0,s=t._starts=[],d=t._angles=[],c=a.data;for(t._updateRadius(),a.count=t.countVisibleElements(),u=0,h=r.data.length;u<h;u++)s[u]=n,g=t._computeAngle(u),d[u]=g,n+=g;for(u=0,h=c.length;u<h;++u)c[u]._options=t._resolveDataElementOptions(c[u],u),t.updateElement(c[u],u,e)},_updateRadius:function(){var e=this,t=e.chart,r=t.chartArea,a=t.options,n=Math.min(r.right-r.left,r.bottom-r.top);t.outerRadius=Math.max(n/2,0),t.innerRadius=Math.max(a.cutoutPercentage?t.outerRadius/100*a.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,r){var a=this,n=a.chart,s=a.getDataset(),d=n.options,c=d.animation,u=n.scale,h=n.data.labels,g=u.xCenter,v=u.yCenter,b=d.startAngle,y=e.hidden?0:u.getDistanceFromCenterForValue(s.data[t]),x=a._starts[t],C=x+(e.hidden?0:a._angles[t]),A=c.animateScale?0:u.getDistanceFromCenterForValue(s.data[t]),S=e._options||{};m.extend(e,{_datasetIndex:a.index,_index:t,_scale:u,_model:{backgroundColor:S.backgroundColor,borderColor:S.borderColor,borderWidth:S.borderWidth,borderAlign:S.borderAlign,x:g,y:v,innerRadius:0,outerRadius:r?A:y,startAngle:r&&c.animateRotate?b:x,endAngle:r&&c.animateRotate?b:C,label:m.valueAtIndexOrDefault(h,t,h[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),r=0;return m.each(t.data,function(a,n){!isNaN(e.data[n])&&!a.hidden&&r++}),r},setHoverStyle:function(e){var t=e._model,r=e._options,a=m.getHoverColor,n=m.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=n(r.hoverBackgroundColor,a(r.backgroundColor)),t.borderColor=n(r.hoverBorderColor,a(r.borderColor)),t.borderWidth=n(r.hoverBorderWidth,r.borderWidth)},_computeAngle:function(e){var t=this,r=this.getMeta().count,a=t.getDataset(),n=t.getMeta();return isNaN(a.data[e])||n.data[e].hidden?0:zn([t.chart.options.elements.arc.angle,2*Math.PI/r],{chart:t.chart,dataIndex:e,dataset:a,datasetIndex:t.index},e)}});I._set("pie",m.clone(I.doughnut)),I._set("pie",{cutoutPercentage:0});var Vn=Xt,mt=m.valueOrDefault;I._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Hn=Ie.extend({datasetElementType:le.Line,dataElementType:le.Point,linkScales:m.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var c,u,t=this,r=t.getMeta(),a=r.dataset,n=r.data||[],s=t.chart.scale,d=t._config;for(void 0!==d.tension&&void 0===d.lineTension&&(d.lineTension=d.tension),a._scale=s,a._datasetIndex=t.index,a._children=n,a._loop=!0,a._model=t._resolveDatasetElementOptions(a),a.pivot(),c=0,u=n.length;c<u;++c)t.updateElement(n[c],c,e);for(t.updateBezierControlPoints(),c=0,u=n.length;c<u;++c)n[c].pivot()},updateElement:function(e,t,r){var a=this,n=e.custom||{},s=a.getDataset(),d=a.chart.scale,c=d.getPointPositionForValue(t,s.data[t]),u=a._resolveDataElementOptions(e,t),h=a.getMeta().dataset._model,g=r?d.xCenter:c.x,v=r?d.yCenter:c.y;e._scale=d,e._options=u,e._datasetIndex=a.index,e._index=t,e._model={x:g,y:v,skip:n.skip||isNaN(g)||isNaN(v),radius:u.radius,pointStyle:u.pointStyle,rotation:u.rotation,backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,tension:mt(n.tension,h?h.tension:0),hitRadius:u.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,r=e.chart.options,a=Ie.prototype._resolveDatasetElementOptions.apply(e,arguments);return a.spanGaps=mt(t.spanGaps,r.spanGaps),a.tension=mt(t.lineTension,r.elements.line.tension),a},updateBezierControlPoints:function(){var n,s,d,c,t=this.getMeta(),r=this.chart.chartArea,a=t.data||[];function u(h,g,v){return Math.max(Math.min(h,v),g)}for(t.dataset._model.spanGaps&&(a=a.filter(function(h){return!h._model.skip})),n=0,s=a.length;n<s;++n)d=a[n]._model,c=m.splineCurve(m.previousItem(a,n,!0)._model,d,m.nextItem(a,n,!0)._model,d.tension),d.controlPointPreviousX=u(c.previous.x,r.left,r.right),d.controlPointPreviousY=u(c.previous.y,r.top,r.bottom),d.controlPointNextX=u(c.next.x,r.left,r.right),d.controlPointNextY=u(c.next.y,r.top,r.bottom)},setHoverStyle:function(e){var t=e._model,r=e._options,a=m.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=mt(r.hoverBackgroundColor,a(r.backgroundColor)),t.borderColor=mt(r.hoverBorderColor,a(r.borderColor)),t.borderWidth=mt(r.hoverBorderWidth,r.borderWidth),t.radius=mt(r.hoverRadius,r.radius)}});I._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),I._set("global",{datasets:{scatter:{showLine:!1}}});var Qr={bar:Vi,bubble:qn,doughnut:Xt,horizontalBar:Wn,line:Qi,polarArea:Jn,pie:Vn,radar:Hn,scatter:Qi};function bt(e,t){return e.native?{x:e.x,y:e.y}:m.getRelativePosition(e,t)}function Pt(e,t){var a,n,s,d,c,u,r=e._getSortedVisibleDatasetMetas();for(n=0,d=r.length;n<d;++n)for(s=0,c=(a=r[n].data).length;s<c;++s)(u=a[s])._view.skip||t(u)}function yi(e,t){var r=[];return Pt(e,function(a){a.inRange(t.x,t.y)&&r.push(a)}),r}function Gi(e,t,r,a){var n=Number.POSITIVE_INFINITY,s=[];return Pt(e,function(d){if(!r||d.inRange(t.x,t.y)){var c=d.getCenterPoint(),u=a(t,c);u<n?(s=[d],n=u):u===n&&s.push(d)}}),s}function xi(e){var t=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(a,n){var s=t?Math.abs(a.x-n.x):0,d=r?Math.abs(a.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(d,2))}}function Ki(e,t,r){var a=bt(t,e);r.axis=r.axis||"x";var n=xi(r.axis),s=r.intersect?yi(e,a):Gi(e,a,!1,n),d=[];return s.length?(e._getSortedVisibleDatasetMetas().forEach(function(c){var u=c.data[s[0]._index];u&&!u._view.skip&&d.push(u)}),d):[]}var Zt={modes:{single:function(e,t){var r=bt(t,e),a=[];return Pt(e,function(n){if(n.inRange(r.x,r.y))return a.push(n),a}),a.slice(0,1)},label:Ki,index:Ki,dataset:function(e,t,r){var a=bt(t,e);r.axis=r.axis||"xy";var n=xi(r.axis),s=r.intersect?yi(e,a):Gi(e,a,!1,n);return s.length>0&&(s=e.getDatasetMeta(s[0]._datasetIndex).data),s},"x-axis":function(e,t){return Ki(e,t,{intersect:!1})},point:function(e,t){return yi(e,bt(t,e))},nearest:function(e,t,r){var a=bt(t,e);r.axis=r.axis||"xy";var n=xi(r.axis);return Gi(e,a,r.intersect,n)},x:function(e,t,r){var a=bt(t,e),n=[],s=!1;return Pt(e,function(d){d.inXRange(a.x)&&n.push(d),d.inRange(a.x,a.y)&&(s=!0)}),r.intersect&&!s&&(n=[]),n},y:function(e,t,r){var a=bt(t,e),n=[],s=!1;return Pt(e,function(d){d.inYRange(a.y)&&n.push(d),d.inRange(a.x,a.y)&&(s=!0)}),r.intersect&&!s&&(n=[]),n}}},Ci=m.extend;function ei(e,t){return m.where(e,function(r){return r.pos===t})}function Ai(e,t){return e.sort(function(r,a){var n=t?a:r,s=t?r:a;return n.weight===s.weight?n.index-s.index:n.weight-s.weight})}function $r(e,t,r,a){return Math.max(e[r],t[r])+Math.max(e[a],t[a])}function Gr(e,t,r){var s,d,a=r.box,n=e.maxPadding;if(r.size&&(e[r.pos]-=r.size),r.size=r.horizontal?a.height:a.width,e[r.pos]+=r.size,a.getPadding){var c=a.getPadding();n.top=Math.max(n.top,c.top),n.left=Math.max(n.left,c.left),n.bottom=Math.max(n.bottom,c.bottom),n.right=Math.max(n.right,c.right)}if(s=t.outerWidth-$r(n,e,"left","right"),d=t.outerHeight-$r(n,e,"top","bottom"),s!==e.w||d!==e.h){e.w=s,e.h=d;var u=r.horizontal?[s,e.w]:[d,e.h];return!(u[0]===u[1]||isNaN(u[0])&&isNaN(u[1]))}}function Xn(e,t){var r=t.maxPadding;return function a(n){var s={left:0,top:0,right:0,bottom:0};return n.forEach(function(d){s[d]=Math.max(t[d],r[d])}),s}(e?["left","right"]:["top","bottom"])}function wi(e,t,r){var n,s,d,c,u,h,a=[];for(n=0,s=e.length;n<s;++n)(c=(d=e[n]).box).update(d.width||t.w,d.height||t.h,Xn(d.horizontal,t)),Gr(t,r,d)&&(h=!0,a.length&&(u=!0)),c.fullWidth||a.push(d);return u&&wi(a,t,r)||h}function Kr(e,t,r){var d,c,u,h,a=r.padding,n=t.x,s=t.y;for(d=0,c=e.length;d<c;++d)h=(u=e[d]).box,u.horizontal?(h.left=h.fullWidth?a.left:t.left,h.right=h.fullWidth?r.outerWidth-a.right:t.left+t.w,h.top=s,h.bottom=s+h.height,h.width=h.right-h.left,s=h.bottom):(h.left=n,h.right=n+h.width,h.top=t.top,h.bottom=t.top+t.h,h.height=h.bottom-h.top,n=h.right);t.x=n,t.y=s}I._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Pe={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var r=e.boxes?e.boxes.indexOf(t):-1;-1!==r&&e.boxes.splice(r,1)},configure:function(e,t,r){for(var d,a=["fullWidth","position","weight"],n=a.length,s=0;s<n;++s)r.hasOwnProperty(d=a[s])&&(t[d]=r[d])},update:function(e,t,r){if(e){var n=m.options.toPadding((e.options.layout||{}).padding),s=t-n.width,d=r-n.height,c=function Gn(e){var t=function Qn(e){var r,a,n,t=[];for(r=0,a=(e||[]).length;r<a;++r)t.push({index:r,box:n=e[r],pos:n.position,horizontal:n.isHorizontal(),weight:n.weight});return t}(e),r=Ai(ei(t,"left"),!0),a=Ai(ei(t,"right")),n=Ai(ei(t,"top"),!0),s=Ai(ei(t,"bottom"));return{leftAndTop:r.concat(n),rightAndBottom:a.concat(s),chartArea:ei(t,"chartArea"),vertical:r.concat(a),horizontal:n.concat(s)}}(e.boxes),u=c.vertical,h=c.horizontal,g=Object.freeze({outerWidth:t,outerHeight:r,padding:n,availableWidth:s,vBoxMaxWidth:s/2/u.length,hBoxMaxHeight:d/2}),v=Ci({maxPadding:Ci({},n),w:s,h:d,x:n.left,y:n.top},n);(function $n(e,t){var r,a,n;for(r=0,a=e.length;r<a;++r)(n=e[r]).width=n.horizontal?n.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,n.height=n.horizontal&&t.hBoxMaxHeight})(u.concat(h),g),wi(u,v,g),wi(h,v,g)&&wi(u,v,g),function Kn(e){var t=e.maxPadding;function r(a){var n=Math.max(t[a]-e[a],0);return e[a]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(v),Kr(c.leftAndTop,v,g),v.x+=v.w,v.y+=v.h,Kr(c.rightAndBottom,v,g),e.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h},m.each(c.chartArea,function(b){var y=b.box;Ci(y,e.chartArea),y.update(v.w,v.h)})}}},ro=function ne(e){return e&&e.default||e}(Object.freeze({__proto__:null,default:"/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n"})),be="$chartjs",Xi="chartjs-",er=Xi+"size-monitor",Xr=Xi+"render-monitor",ea=["animationstart","webkitAnimationStart"],no={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ta(e,t){var r=m.getStyle(e,t),a=r&&r.match(/^(\d+)(\.\d+)?px$/);return a?Number(a[1]):void 0}var ia=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(r){}return e}()&&{passive:!0};function ti(e,t,r){e.addEventListener(t,r,ia)}function tr(e,t,r){e.removeEventListener(t,r,ia)}function ir(e,t,r,a,n){return{type:e,chart:t,native:n||null,x:void 0!==r?r:null,y:void 0!==a?a:null}}function ii(e){var t=document.createElement("div");return t.className=e||"",t}function ra(e,t,r){var a=e[be]||(e[be]={}),n=a.resizer=function uo(e){var t=1e6,r=ii(er),a=ii(er+"-expand"),n=ii(er+"-shrink");a.appendChild(ii()),n.appendChild(ii()),r.appendChild(a),r.appendChild(n),r._reset=function(){a.scrollLeft=t,a.scrollTop=t,n.scrollLeft=t,n.scrollTop=t};var s=function(){r._reset(),e()};return ti(a,"scroll",s.bind(a,"expand")),ti(n,"scroll",s.bind(n,"shrink")),r}(function X(e,t){var r=!1,a=[];return function(){a=Array.prototype.slice.call(arguments),t=t||this,r||(r=!0,m.requestAnimFrame.call(window,function(){r=!1,e.apply(t,a)}))}}(function(){if(a.resizer){var s=r.options.maintainAspectRatio&&e.parentNode,d=s?s.clientWidth:0;t(ir("resize",r)),s&&s.clientWidth<d&&r.canvas&&t(ir("resize",r))}}));!function co(e,t){var r=e[be]||(e[be]={}),a=r.renderProxy=function(n){"chartjs-render-animation"===n.animationName&&t()};m.each(ea,function(n){ti(e,n,a)}),r.reflow=!!e.offsetParent,e.classList.add(Xr)}(e,function(){if(a.resizer){var s=e.parentNode;s&&s!==n.parentNode&&s.insertBefore(n,s.firstChild),n._reset()}})}function ri(e){var t=e[be]||{},r=t.resizer;delete t.resizer,function rr(e){var t=e[be]||{},r=t.renderProxy;r&&(m.each(ea,function(a){tr(e,a,r)}),delete t.renderProxy),e.classList.remove(Xr)}(e),r&&r.parentNode&&r.parentNode.removeChild(r)}var Ti={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;!function ho(e,t){var r=e[be]||(e[be]={});if(!r.containsStyles){r.containsStyles=!0,t="/* Chart.js */\n"+t;var a=document.createElement("style");a.setAttribute("type","text/css"),a.appendChild(document.createTextNode(t)),e.appendChild(a)}}(t.host?t:document.head,ro)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(this._ensureLoaded(e),function oo(e,t){var r=e.style,a=e.getAttribute("height"),n=e.getAttribute("width");if(e[be]={initial:{height:a,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",null===n||""===n){var s=ta(e,"width");void 0!==s&&(e.width=s)}if(null===a||""===a)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var d=ta(e,"height");void 0!==s&&(e.height=d)}return e}(e,t),r):null},releaseContext:function(e){var t=e.canvas;if(t[be]){var r=t[be].initial;["height","width"].forEach(function(a){var n=r[a];m.isNullOrUndef(n)?t.removeAttribute(a):t.setAttribute(a,n)}),m.each(r.style||{},function(a,n){t.style[n]=a}),t.width=t.width,delete t[be]}},addEventListener:function(e,t,r){var a=e.canvas;if("resize"!==t){var n=r[be]||(r[be]={});ti(a,t,(n.proxies||(n.proxies={}))[e.id+"_"+t]=function(c){r(function lo(e,t){var r=no[e.type]||e.type,a=m.getRelativePosition(e,t);return ir(r,t,a.x,a.y,e)}(c,e))})}else ra(a,r,e)},removeEventListener:function(e,t,r){var a=e.canvas;if("resize"!==t){var d=((r[be]||{}).proxies||{})[e.id+"_"+t];!d||tr(a,t,d)}else ri(a)}};m.addEvent=ti,m.removeEvent=tr;var Ue=m.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ti._enabled?Ti:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}});I._set("global",{plugins:{}});var Q={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(r){-1===t.indexOf(r)&&t.push(r)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(r){var a=t.indexOf(r);-1!==a&&t.splice(a,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,r){var s,d,c,u,h,a=this.descriptors(e),n=a.length;for(s=0;s<n;++s)if("function"==typeof(h=(c=(d=a[s]).plugin)[t])&&((u=[e].concat(r||[])).push(d.options),!1===h.apply(c,u)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var r=[],a=[],n=e&&e.config||{},s=n.options&&n.options.plugins||{};return this._plugins.concat(n.plugins||[]).forEach(function(d){if(-1===r.indexOf(d)){var u=d.id,h=s[u];!1!==h&&(!0===h&&(h=m.clone(I.global.plugins[u])),r.push(d),a.push({plugin:d,options:h||{}}))}}),t.descriptors=a,t.id=this._cacheId,a},_invalidate:function(e){delete e.$plugins}},ai={constructors:{},defaults:{},registerScaleType:function(e,t,r){this.constructors[e]=t,this.defaults[e]=m.clone(r)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?m.merge(Object.create(null),[I.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var r=this;r.defaults.hasOwnProperty(e)&&(r.defaults[e]=m.extend(r.defaults[e],t))},addScalesToLayout:function(e){m.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,Pe.addBox(e,t)})}},Ge=m.valueOrDefault,ar=m.rtl.getRtlAdapter;I._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:m.noop,title:function(e,t){var r="",a=t.labels,n=a?a.length:0;if(e.length>0){var s=e[0];s.label?r=s.label:s.xLabel?r=s.xLabel:n>0&&s.index<n&&(r=a[s.index])}return r},afterTitle:m.noop,beforeBody:m.noop,beforeLabel:m.noop,label:function(e,t){var r=t.datasets[e.datasetIndex].label||"";return r&&(r+=": "),m.isNullOrUndef(e.value)?r+=e.yLabel:r+=e.value,r},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:m.noop,afterBody:m.noop,beforeFooter:m.noop,footer:m.noop,afterFooter:m.noop}}});var aa={average:function(e){if(!e.length)return!1;var t,r,a=0,n=0,s=0;for(t=0,r=e.length;t<r;++t){var d=e[t];if(d&&d.hasValue()){var c=d.tooltipPosition();a+=c.x,n+=c.y,++s}}return{x:a/s,y:n/s}},nearest:function(e,t){var s,d,c,r=t.x,a=t.y,n=Number.POSITIVE_INFINITY;for(s=0,d=e.length;s<d;++s){var u=e[s];if(u&&u.hasValue()){var h=u.getCenterPoint(),g=m.distanceBetweenPoints(t,h);g<n&&(n=g,c=u)}}if(c){var v=c.tooltipPosition();r=v.x,a=v.y}return{x:r,y:a}}};function ze(e,t){return t&&(m.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Je(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function go(e){var t=e._xScale,r=e._yScale||e._scale,a=e._index,n=e._datasetIndex,s=e._chart.getDatasetMeta(n).controller,d=s._getIndexScale(),c=s._getValueScale();return{xLabel:t?t.getLabelForIndex(a,n):"",yLabel:r?r.getLabelForIndex(a,n):"",label:d?""+d.getLabelForIndex(a,n):"",value:c?""+c.getLabelForIndex(a,n):"",index:a,datasetIndex:n,x:e._model.x,y:e._model.y}}function na(e){var t=I.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Ge(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Ge(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Ge(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Ge(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Ge(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Ge(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Ge(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Ge(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Ge(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Si(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function sa(e){return ze([],Je(e))}var po=qe.extend({initialize:function(){this._model=na(this._options),this._lastActive=[]},getTitle:function(){var e=this,r=e._options.callbacks,a=r.beforeTitle.apply(e,arguments),n=r.title.apply(e,arguments),s=r.afterTitle.apply(e,arguments),d=[];return d=ze(d,Je(a)),d=ze(d,Je(n)),ze(d,Je(s))},getBeforeBody:function(){return sa(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var r=this,a=r._options.callbacks,n=[];return m.each(e,function(s){var d={before:[],lines:[],after:[]};ze(d.before,Je(a.beforeLabel.call(r,s,t))),ze(d.lines,a.label.call(r,s,t)),ze(d.after,Je(a.afterLabel.call(r,s,t))),n.push(d)}),n},getAfterBody:function(){return sa(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,r=t.beforeFooter.apply(e,arguments),a=t.footer.apply(e,arguments),n=t.afterFooter.apply(e,arguments),s=[];return s=ze(s,Je(r)),s=ze(s,Je(a)),ze(s,Je(n))},update:function(e){var v,b,t=this,r=t._options,a=t._model,n=t._model=na(r),s=t._active,d=t._data,c={xAlign:a.xAlign,yAlign:a.yAlign},u={x:a.x,y:a.y},h={width:a.width,height:a.height},g={x:a.caretX,y:a.caretY};if(s.length){n.opacity=1;var y=[],x=[];g=aa[r.position].call(t,s,t._eventPosition);var C=[];for(v=0,b=s.length;v<b;++v)C.push(go(s[v]));r.filter&&(C=C.filter(function(A){return r.filter(A,d)})),r.itemSort&&(C=C.sort(function(A,S){return r.itemSort(A,S,d)})),m.each(C,function(A){y.push(r.callbacks.labelColor.call(t,A,t._chart)),x.push(r.callbacks.labelTextColor.call(t,A,t._chart))}),n.title=t.getTitle(C,d),n.beforeBody=t.getBeforeBody(C,d),n.body=t.getBody(C,d),n.afterBody=t.getAfterBody(C,d),n.footer=t.getFooter(C,d),n.x=g.x,n.y=g.y,n.caretPadding=r.caretPadding,n.labelColors=y,n.labelTextColors=x,n.dataPoints=C,u=function oa(e,t,r,a){var n=e.x,s=e.y,c=e.caretPadding,h=r.xAlign,g=r.yAlign,v=e.caretSize+c,b=e.cornerRadius+c;return"right"===h?n-=t.width:"center"===h&&((n-=t.width/2)+t.width>a.width&&(n=a.width-t.width),n<0&&(n=0)),"top"===g?s+=v:s-="bottom"===g?t.height+v:t.height/2,"center"===g?"left"===h?n+=v:"right"===h&&(n-=v):"left"===h?n-=b:"right"===h&&(n+=b),{x:n,y:s}}(n,h=function nr(e,t){var r=e._chart.ctx,a=2*t.yPadding,n=0,s=t.body,d=s.reduce(function(x,C){return x+C.before.length+C.lines.length+C.after.length},0),c=t.title.length,u=t.footer.length,h=t.titleFontSize,g=t.bodyFontSize,v=t.footerFontSize;a+=c*h,a+=c?(c-1)*t.titleSpacing:0,a+=c?t.titleMarginBottom:0,a+=(d+=t.beforeBody.length+t.afterBody.length)*g,a+=d?(d-1)*t.bodySpacing:0,a+=u?t.footerMarginTop:0,a+=u*v,a+=u?(u-1)*t.footerSpacing:0;var b=0,y=function(x){n=Math.max(n,r.measureText(x).width+b)};return r.font=m.fontString(h,t._titleFontStyle,t._titleFontFamily),m.each(t.title,y),r.font=m.fontString(g,t._bodyFontStyle,t._bodyFontFamily),m.each(t.beforeBody.concat(t.afterBody),y),b=t.displayColors?g+2:0,m.each(s,function(x){m.each(x.before,y),m.each(x.lines,y),m.each(x.after,y)}),b=0,r.font=m.fontString(v,t._footerFontStyle,t._footerFontFamily),m.each(t.footer,y),{width:n+=2*t.xPadding,height:a}}(this,n),c=function vo(e,t){var r=e._model,a=e._chart,n=e._chart.chartArea,s="center",d="center";r.y<t.height?d="top":r.y>a.height-t.height&&(d="bottom");var c,u,h,g,v,b=(n.left+n.right)/2,y=(n.top+n.bottom)/2;"center"===d?(c=function(C){return C<=b},u=function(C){return C>b}):(c=function(C){return C<=t.width/2},u=function(C){return C>=a.width-t.width/2}),h=function(C){return C+t.width+r.caretSize+r.caretPadding>a.width},g=function(C){return C-t.width-r.caretSize-r.caretPadding<0},v=function(C){return C<=y?"top":"bottom"},c(r.x)?(s="left",h(r.x)&&(s="center",d=v(r.y))):u(r.x)&&(s="right",g(r.x)&&(s="center",d=v(r.y)));var x=e._options;return{xAlign:x.xAlign?x.xAlign:s,yAlign:x.yAlign?x.yAlign:d}}(this,h),t._chart)}else n.opacity=0;return n.xAlign=c.xAlign,n.yAlign=c.yAlign,n.x=u.x,n.y=u.y,n.width=h.width,n.height=h.height,n.caretX=g.x,n.caretY=g.y,t._model=n,e&&r.custom&&r.custom.call(t,n),t},drawCaret:function(e,t){var r=this._chart.ctx,n=this.getCaretPosition(e,t,this._view);r.lineTo(n.x1,n.y1),r.lineTo(n.x2,n.y2),r.lineTo(n.x3,n.y3)},getCaretPosition:function(e,t,r){var a,n,s,d,c,u,h=r.caretSize,g=r.cornerRadius,v=r.xAlign,b=r.yAlign,y=e.x,x=e.y,C=t.width,A=t.height;if("center"===b)c=x+A/2,"left"===v?(n=(a=y)-h,s=a,d=c+h,u=c-h):(n=(a=y+C)+h,s=a,d=c-h,u=c+h);else if("left"===v?(a=(n=y+g+h)-h,s=n+h):"right"===v?(a=(n=y+C-g-h)-h,s=n+h):(a=(n=r.caretX)-h,s=n+h),"top"===b)c=(d=x)-h,u=d;else{c=(d=x+A)+h,u=d;var S=s;s=a,a=S}return{x1:a,x2:n,x3:s,y1:d,y2:c,y3:u}},drawTitle:function(e,t,r){var s,d,c,a=t.title,n=a.length;if(n){var u=ar(t.rtl,t.x,t.width);for(e.x=Si(t,t._titleAlign),r.textAlign=u.textAlign(t._titleAlign),r.textBaseline="middle",s=t.titleFontSize,d=t.titleSpacing,r.fillStyle=t.titleFontColor,r.font=m.fontString(s,t._titleFontStyle,t._titleFontFamily),c=0;c<n;++c)r.fillText(a[c],u.x(e.x),e.y+s/2),e.y+=s+d,c+1===n&&(e.y+=t.titleMarginBottom-d)}},drawBody:function(e,t,r){var b,y,x,C,A,S,D,N,a=t.bodyFontSize,n=t.bodySpacing,s=t._bodyAlign,d=t.body,c=t.displayColors,u=0,h=c?Si(t,"left"):0,g=ar(t.rtl,t.x,t.width),v=function(z){r.fillText(z,g.x(e.x+u),e.y+a/2),e.y+=a+n},U=g.textAlign(s);for(r.textAlign=s,r.textBaseline="middle",r.font=m.fontString(a,t._bodyFontStyle,t._bodyFontFamily),e.x=Si(t,U),r.fillStyle=t.bodyFontColor,m.each(t.beforeBody,v),u=c&&"right"!==U?"center"===s?a/2+1:a+2:0,A=0,D=d.length;A<D;++A){for(b=d[A],x=t.labelColors[A],r.fillStyle=y=t.labelTextColors[A],m.each(b.before,v),S=0,N=(C=b.lines).length;S<N;++S){if(c){var O=g.x(h);r.fillStyle=t.legendColorBackground,r.fillRect(g.leftForLtr(O,a),e.y,a,a),r.lineWidth=1,r.strokeStyle=x.borderColor,r.strokeRect(g.leftForLtr(O,a),e.y,a,a),r.fillStyle=x.backgroundColor,r.fillRect(g.leftForLtr(g.xPlus(O,1),a-2),e.y+1,a-2,a-2),r.fillStyle=y}v(C[S])}m.each(b.after,v)}u=0,m.each(t.afterBody,v),e.y-=n},drawFooter:function(e,t,r){var s,d,a=t.footer,n=a.length;if(n){var c=ar(t.rtl,t.x,t.width);for(e.x=Si(t,t._footerAlign),e.y+=t.footerMarginTop,r.textAlign=c.textAlign(t._footerAlign),r.textBaseline="middle",s=t.footerFontSize,r.fillStyle=t.footerFontColor,r.font=m.fontString(s,t._footerFontStyle,t._footerFontFamily),d=0;d<n;++d)r.fillText(a[d],c.x(e.x),e.y+s/2),e.y+=s+t.footerSpacing}},drawBackground:function(e,t,r,a){r.fillStyle=t.backgroundColor,r.strokeStyle=t.borderColor,r.lineWidth=t.borderWidth;var n=t.xAlign,s=t.yAlign,d=e.x,c=e.y,u=a.width,h=a.height,g=t.cornerRadius;r.beginPath(),r.moveTo(d+g,c),"top"===s&&this.drawCaret(e,a),r.lineTo(d+u-g,c),r.quadraticCurveTo(d+u,c,d+u,c+g),"center"===s&&"right"===n&&this.drawCaret(e,a),r.lineTo(d+u,c+h-g),r.quadraticCurveTo(d+u,c+h,d+u-g,c+h),"bottom"===s&&this.drawCaret(e,a),r.lineTo(d+g,c+h),r.quadraticCurveTo(d,c+h,d,c+h-g),"center"===s&&"left"===n&&this.drawCaret(e,a),r.lineTo(d,c+g),r.quadraticCurveTo(d,c,d+g,c),r.closePath(),r.fill(),t.borderWidth>0&&r.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var r={width:t.width,height:t.height},a={x:t.x,y:t.y},n=Math.abs(t.opacity<.001)?0:t.opacity;this._options.enabled&&(t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length)&&(e.save(),e.globalAlpha=n,this.drawBackground(a,t,e,r),a.y+=t.yPadding,m.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),m.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var a,t=this,r=t._options;return t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:(t._active=t._chart.getElementsAtEventForMode(e,r.mode,r),r.reverse&&t._active.reverse()),(a=!m.arrayEquals(t._active,t._lastActive))&&(t._lastActive=t._active,(r.enabled||r.custom)&&(t._eventPosition={x:e.x,y:e.y},t.update(!0),t.pivot())),a}}),or=po;or.positioners=aa;var sr=m.valueOrDefault;function la(){return m.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,r,a){if("xAxes"===e||"yAxes"===e){var s,d,c,n=r[e].length;for(t[e]||(t[e]=[]),s=0;s<n;++s)d=sr((c=r[e][s]).type,"xAxes"===e?"category":"linear"),s>=t[e].length&&t[e].push({}),m.merge(t[e][s],!t[e][s].type||c.type&&c.type!==t[e][s].type?[ai.getScaleDefaults(d),c]:c)}else m._merger(e,t,r,a)}})}function ki(){return m.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,r,a){var n=t[e]||Object.create(null),s=r[e];"scales"===e?t[e]=la(n,s):"scale"===e?t[e]=m.merge(n,[ai.getScaleDefaults(s.type),s]):m._merger(e,t,r,a)}})}function lr(e){var t=e.options;m.each(e.scales,function(r){Pe.removeBox(e,r)}),t=ki(I.global,I[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function da(e,t,r){var a,n=function(s){return s.id===a};do{a=t+r++}while(m.findIndex(e,n)>=0);return a}function ua(e){return"top"===e||"bottom"===e}function ca(e,t){return function(r,a){return r[e]===a[e]?r[t]-a[t]:r[e]-a[e]}}I._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var it=function(e,t){return this.construct(e,t),this};m.extend(it.prototype,{construct:function(e,t){var r=this;t=function bo(e){var t=(e=e||Object.create(null)).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=ki(I.global,I[e.type],e.options||{}),e}(t);var a=Ue.acquireContext(e,t),n=a&&a.canvas,s=n&&n.height,d=n&&n.width;r.id=m.uid(),r.ctx=a,r.canvas=n,r.config=t,r.width=d,r.height=s,r.aspectRatio=s?d/s:null,r.options=t.options,r._bufferedRender=!1,r._layers=[],r.chart=r,r.controller=r,it.instances[r.id]=r,Object.defineProperty(r,"data",{get:function(){return r.config.data},set:function(c){r.config.data=c}}),a&&n?(r.initialize(),r.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Q.notify(e,"beforeInit"),m.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),Q.notify(e,"afterInit"),e},clear:function(){return m.canvas.clear(this),this},stop:function(){return zi.cancelAnimation(this),this},resize:function(e){var t=this,r=t.options,a=t.canvas,n=r.maintainAspectRatio&&t.aspectRatio||null,s=Math.max(0,Math.floor(m.getMaximumWidth(a))),d=Math.max(0,Math.floor(n?s/n:m.getMaximumHeight(a)));if((t.width!==s||t.height!==d)&&(a.width=t.width=s,a.height=t.height=d,a.style.width=s+"px",a.style.height=d+"px",m.retinaScale(t,r.devicePixelRatio),!e)){var c={width:s,height:d};Q.notify(t,"resize",[c]),r.onResize&&r.onResize(t,c),t.stop(),t.update({duration:r.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},r=e.scale;m.each(t.xAxes,function(a,n){a.id||(a.id=da(t.xAxes,"x-axis-",n))}),m.each(t.yAxes,function(a,n){a.id||(a.id=da(t.yAxes,"y-axis-",n))}),r&&(r.id=r.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,r=e.scales||{},a=[],n=Object.keys(r).reduce(function(s,d){return s[d]=!1,s},{});t.scales&&(a=a.concat((t.scales.xAxes||[]).map(function(s){return{options:s,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(s){return{options:s,dtype:"linear",dposition:"left"}}))),t.scale&&a.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),m.each(a,function(s){var d=s.options,c=d.id,u=sr(d.type,s.dtype);ua(d.position)!==ua(s.dposition)&&(d.position=s.dposition),n[c]=!0;var h=null;if(c in r&&r[c].type===u)(h=r[c]).options=d,h.ctx=e.ctx,h.chart=e;else{var g=ai.getScaleConstructor(u);if(!g)return;h=new g({id:c,type:u,options:d,ctx:e.ctx,chart:e}),r[h.id]=h}h.mergeTicksOptions(),s.isDefault&&(e.scale=h)}),m.each(n,function(s,d){s||delete r[d]}),e.scales=r,ai.addScalesToLayout(this)},buildOrUpdateControllers:function(){var a,n,e=this,t=[],r=e.data.datasets;for(a=0,n=r.length;a<n;a++){var s=r[a],d=e.getDatasetMeta(a),c=s.type||e.config.type;if(d.type&&d.type!==c&&(e.destroyDatasetMeta(a),d=e.getDatasetMeta(a)),d.type=c,d.order=s.order||0,d.index=a,d.controller)d.controller.updateIndex(a),d.controller.linkScales();else{var u=Qr[d.type];if(void 0===u)throw new Error('"'+d.type+'" is not a chart type.');d.controller=new u(e,a),t.push(d.controller)}}return t},resetElements:function(){var e=this;m.each(e.data.datasets,function(t,r){e.getDatasetMeta(r).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var r,a,t=this;if((!e||"object"!=typeof e)&&(e={duration:e,lazy:arguments[1]}),lr(t),Q._invalidate(t),!1!==Q.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var n=t.buildOrUpdateControllers();for(r=0,a=t.data.datasets.length;r<a;r++)t.getDatasetMeta(r).controller.buildOrUpdateElements();t.updateLayout(),t.options.animation&&t.options.animation.duration&&m.each(n,function(s){s.reset()}),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],Q.notify(t,"afterUpdate"),t._layers.sort(ca("z","_idx")),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){var e=this;!1!==Q.notify(e,"beforeLayout")&&(Pe.update(this,this.width,this.height),e._layers=[],m.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(t,r){t._idx=r}),Q.notify(e,"afterScaleUpdate"),Q.notify(e,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==Q.notify(e,"beforeDatasetsUpdate")){for(var t=0,r=e.data.datasets.length;t<r;++t)e.updateDataset(t);Q.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,r=t.getDatasetMeta(e),a={meta:r,index:e};!1!==Q.notify(t,"beforeDatasetUpdate",[a])&&(r.controller._update(),Q.notify(t,"afterDatasetUpdate",[a]))},render:function(e){var t=this;(!e||"object"!=typeof e)&&(e={duration:e,lazy:arguments[1]});var r=t.options.animation,a=sr(e.duration,r&&r.duration),n=e.lazy;if(!1!==Q.notify(t,"beforeRender")){var s=function(c){Q.notify(t,"afterRender"),m.callback(r&&r.onComplete,[c],t)};if(r&&a){var d=new Yi({numSteps:a/16.66,easing:e.easing||r.easing,render:function(c,u){var g=u.currentStep,v=g/u.numSteps;c.draw((0,m.easing.effects[u.easing])(v),v,g)},onAnimationProgress:r.onProgress,onAnimationComplete:s});zi.addAnimation(t,d,a,n)}else t.draw(),s(new Yi({numSteps:0,chart:t}));return t}},draw:function(e){var r,a,t=this;if(t.clear(),m.isNullOrUndef(e)&&(e=1),t.transition(e),!(t.width<=0||t.height<=0)&&!1!==Q.notify(t,"beforeDraw",[e])){for(a=t._layers,r=0;r<a.length&&a[r].z<=0;++r)a[r].draw(t.chartArea);for(t.drawDatasets(e);r<a.length;++r)a[r].draw(t.chartArea);t._drawTooltip(e),Q.notify(t,"afterDraw",[e])}},transition:function(e){for(var t=this,r=0,a=(t.data.datasets||[]).length;r<a;++r)t.isDatasetVisible(r)&&t.getDatasetMeta(r).controller.transition(e);t.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var n,s,t=this,a=[];for(n=0,s=(t.data.datasets||[]).length;n<s;++n)(!e||t.isDatasetVisible(n))&&a.push(t.getDatasetMeta(n));return a.sort(ca("order","index")),a},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var r,a,t=this;if(!1!==Q.notify(t,"beforeDatasetsDraw",[e])){for(a=(r=t._getSortedVisibleDatasetMetas()).length-1;a>=0;--a)t.drawDataset(r[a],e);Q.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var a={meta:e,index:e.index,easingValue:t};!1!==Q.notify(this,"beforeDatasetDraw",[a])&&(e.controller.draw(t),Q.notify(this,"afterDatasetDraw",[a]))},_drawTooltip:function(e){var t=this,r=t.tooltip,a={tooltip:r,easingValue:e};!1!==Q.notify(t,"beforeTooltipDraw",[a])&&(r.draw(),Q.notify(t,"afterTooltipDraw",[a]))},getElementAtEvent:function(e){return Zt.modes.single(this,e)},getElementsAtEvent:function(e){return Zt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return Zt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,r){var a=Zt.modes[t];return"function"==typeof a?a(this,e,r):[]},getDatasetAtEvent:function(e){return Zt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,r=t.data.datasets[e];r._meta||(r._meta={});var a=r._meta[t.id];return a||(a=r._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r.order||0,index:e}),a},getVisibleDatasetCount:function(){for(var e=0,t=0,r=this.data.datasets.length;t<r;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,r=this.data.datasets[e],a=r._meta&&r._meta[t];a&&(a.controller.destroy(),delete r._meta[t])},destroy:function(){var r,a,e=this,t=e.canvas;for(e.stop(),r=0,a=e.data.datasets.length;r<a;++r)e.destroyDatasetMeta(r);t&&(e.unbindEvents(),m.canvas.clear(e),Ue.releaseContext(e.ctx),e.canvas=null,e.ctx=null),Q.notify(e,"destroy"),delete it.instances[e.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new or({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},r=function(){e.eventHandler.apply(e,arguments)};m.each(e.options.events,function(a){Ue.addEventListener(e,a,r),t[a]=r}),e.options.responsive&&(r=function(){e.resize()},Ue.addEventListener(e,"resize",r),t.resize=r)},unbindEvents:function(){var e=this,t=e._listeners;!t||(delete e._listeners,m.each(t,function(r,a){Ue.removeEventListener(e,a,r)}))},updateHoverStyle:function(e,t,r){var n,s,d,a=r?"set":"remove";for(s=0,d=e.length;s<d;++s)(n=e[s])&&this.getDatasetMeta(n._datasetIndex).controller[a+"HoverStyle"](n);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+a+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,r=t.tooltip;if(!1!==Q.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var a=t.handleEvent(e);r&&(a=r._start?r.handleEvent(e):a|r.handleEvent(e)),Q.notify(t,"afterEvent",[e]);var n=t._bufferedRequest;return n?t.render(n):a&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var n,t=this,r=t.options||{},a=r.hover;return t.lastActive=t.lastActive||[],t.active="mouseout"===e.type?[]:t.getElementsAtEventForMode(e,a.mode,a),m.callback(r.onHover||r.hover.onHover,[e.native,t.active],t),("mouseup"===e.type||"click"===e.type)&&r.onClick&&r.onClick.call(t,e.native,t.active),t.lastActive.length&&t.updateHoverStyle(t.lastActive,a.mode,!1),t.active.length&&a.mode&&t.updateHoverStyle(t.active,a.mode,!0),n=!m.arrayEquals(t.active,t.lastActive),t.lastActive=t.active,n}}),it.instances={};var E=it;it.Controller=it,it.types={},m.configMerge=ki,m.scaleMerge=la;function _t(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Mi(e){this.options=e||{}}m.extend(Mi.prototype,{formats:_t,parse:_t,format:_t,add:_t,diff:_t,startOf:_t,endOf:_t,_create:function(e){return e}}),Mi.override=function(e){m.extend(Mi.prototype,e)};var ni={_date:Mi},oi={formatters:{values:function(e){return m.isArray(e)?e:""+e},linear:function(e,t,r){var a=r.length>3?r[2]-r[1]:r[1]-r[0];Math.abs(a)>1&&e!==Math.floor(e)&&(a=e-Math.floor(e));var n=m.log10(Math.abs(a)),s="";if(0!==e)if(Math.max(Math.abs(r[0]),Math.abs(r[r.length-1]))<1e-4){var c=m.log10(Math.abs(e)),u=Math.floor(c)-Math.floor(n);u=Math.max(Math.min(u,20),0),s=e.toExponential(u)}else{var h=-1*Math.floor(n);h=Math.max(Math.min(h,20),0),s=e.toFixed(h)}else s="0";return s},logarithmic:function(e,t,r){var a=e/Math.pow(10,Math.floor(m.log10(e)));return 0===e?"0":1===a||2===a||5===a||0===t||t===r.length-1?e.toExponential():""}}},yt=m.isArray,Ot=m.isNullOrUndef,rt=m.valueOrDefault,Bt=m.valueAtIndexOrDefault;function fa(e,t,r){var h,a=e.getTicks().length,n=Math.min(t,a-1),s=e.getPixelForTick(n),d=e._startPixel,c=e._endPixel,u=1e-6;if(!(r&&(h=1===a?Math.max(s-d,c-s):0===t?(e.getPixelForTick(1)-s)/2:(s-e.getPixelForTick(n-1))/2,s+=n<t?h:-h,s<d-u||s>c+u)))return s}function Co(e,t,r,a){var g,v,b,y,x,C,A,S,D,N,U,O,z,n=r.length,s=[],d=[],c=[],u=0,h=0;for(g=0;g<n;++g){if(y=r[g].label,e.font=C=(x=r[g].major?t.major:t.minor).string,A=a[C]=a[C]||{data:{},gc:[]},S=x.lineHeight,D=N=0,Ot(y)||yt(y)){if(yt(y))for(v=0,b=y.length;v<b;++v)!Ot(U=y[v])&&!yt(U)&&(D=m.measureText(e,A.data,A.gc,D,U),N+=S)}else D=m.measureText(e,A.data,A.gc,D,y),N=S;s.push(D),d.push(N),c.push(S/2),u=Math.max(D,u),h=Math.max(N,h)}function Y($){return{width:s[$]||0,height:d[$]||0,offset:c[$]||0}}return function xo(e,t){m.each(e,function(r){var s,a=r.gc,n=a.length/2;if(n>t){for(s=0;s<n;++s)delete r.data[a[s]];a.splice(0,n)}})}(a,n),O=s.indexOf(u),z=d.indexOf(h),{first:Y(0),last:Y(n-1),widest:Y(O),highest:Y(z)}}function si(e){return e.drawTicks?e.tickMarkLength:0}function dr(e){var t,r;return e.display?(t=m.options._parseFont(e),r=m.options.toPadding(e.padding),t.lineHeight+r.height):0}function ga(e,t){return m.extend(m.options._parseFont({fontFamily:rt(t.fontFamily,e.fontFamily),fontSize:rt(t.fontSize,e.fontSize),fontStyle:rt(t.fontStyle,e.fontStyle),lineHeight:rt(t.lineHeight,e.lineHeight)}),{color:m.options.resolve([t.fontColor,e.fontColor,I.global.defaultFontColor])})}function ur(e){var t=ga(e,e.minor);return{minor:t,major:e.major.enabled?ga(e,e.major):t}}function cr(e){var r,a,n,t=[];for(a=0,n=e.length;a<n;++a)void 0!==(r=e[a])._index&&t.push(r);return t}function Di(e,t,r,a){var c,u,h,g,n=rt(r,0),s=Math.min(rt(a,e.length),e.length),d=0;for(t=Math.ceil(t),a&&(t=(c=a-r)/Math.floor(c/t)),g=n;g<0;)d++,g=Math.round(n+d*t);for(u=Math.max(n,0);u<s;u++)h=e[u],u===g?(h._index=u,d++,g=Math.round(n+d*t)):delete h.label}I._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:oi.formatters.values,minor:{},major:{}}});var li=qe.extend({zeroLineIndex:0,getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){m.callback(this.options.beforeUpdate,[this])},update:function(e,t,r){var d,c,u,h,g,a=this,n=a.options.ticks,s=n.sampleSize;if(a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=m.extend({left:0,right:0,top:0,bottom:0},r),a._ticks=null,a.ticks=null,a._labelSizes=null,a._maxLabelLines=0,a.longestLabelWidth=0,a.longestTextCache=a.longestTextCache||{},a._gridLineItems=null,a._labelItems=null,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeDataLimits(),a.determineDataLimits(),a.afterDataLimits(),a.beforeBuildTicks(),h=a.buildTicks()||[],(!(h=a.afterBuildTicks(h)||h)||!h.length)&&a.ticks)for(h=[],d=0,c=a.ticks.length;d<c;++d)h.push({value:a.ticks[d],major:!1});return a._ticks=h,u=a._convertTicksToLabels((g=s<h.length)?function ha(e,t){for(var r=[],a=e.length/t,n=0,s=e.length;n<s;n+=a)r.push(e[Math.floor(n)]);return r}(h,s):h),a._configure(),a.beforeCalculateTickRotation(),a.calculateTickRotation(),a.afterCalculateTickRotation(),a.beforeFit(),a.fit(),a.afterFit(),a._ticksToDraw=n.display&&(n.autoSkip||"auto"===n.source)?a._autoSkip(h):h,g&&(u=a._convertTicksToLabels(a._ticksToDraw)),a.ticks=u,a.afterUpdate(),a.minSize},_configure:function(){var r,a,e=this,t=e.options.ticks.reverse;e.isHorizontal()?(r=e.left,a=e.right):(r=e.top,a=e.bottom,t=!t),e._startPixel=r,e._endPixel=a,e._reversePixels=t,e._length=a-r},afterUpdate:function(){m.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){m.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){m.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){m.callback(this.options.beforeDataLimits,[this])},determineDataLimits:m.noop,afterDataLimits:function(){m.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){m.callback(this.options.beforeBuildTicks,[this])},buildTicks:m.noop,afterBuildTicks:function(e){var t=this;return yt(e)&&e.length?m.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=m.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){m.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){m.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){m.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var c,u,h,g,v,b,y,e=this,t=e.options,r=t.ticks,a=e.getTicks().length,n=r.minRotation||0,s=r.maxRotation,d=n;!e._isVisible()||!r.display||n>=s||a<=1||!e.isHorizontal()?e.labelRotation=n:(u=(c=e._getLabelSizes()).widest.width,h=c.highest.height-c.highest.offset,g=Math.min(e.maxWidth,e.chart.width-u),u+6>(v=t.offset?e.maxWidth/a:g/(a-1))&&(v=g/(a-(t.offset?.5:1)),b=e.maxHeight-si(t.gridLines)-r.padding-dr(t.scaleLabel),y=Math.sqrt(u*u+h*h),d=m.toDegrees(Math.min(Math.asin(Math.min((c.highest.height+6)/v,1)),Math.asin(Math.min(b/y,1))-Math.asin(h/y))),d=Math.max(n,Math.min(s,d))),e.labelRotation=d)},afterCalculateTickRotation:function(){m.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){m.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},r=e.chart,a=e.options,n=a.ticks,s=a.scaleLabel,d=a.gridLines,c=e._isVisible(),u="bottom"===a.position,h=e.isHorizontal();if(h?t.width=e.maxWidth:c&&(t.width=si(d)+dr(s)),h?c&&(t.height=si(d)+dr(s)):t.height=e.maxHeight,n.display&&c){var g=ur(n),v=e._getLabelSizes(),b=v.first,y=v.last,x=v.widest,C=v.highest,A=.4*g.minor.lineHeight,S=n.padding;if(h){var D=0!==e.labelRotation,N=m.toRadians(e.labelRotation),U=Math.cos(N),O=Math.sin(N);t.height=Math.min(e.maxHeight,t.height+(O*x.width+U*(C.height-(D?C.offset:0))+(D?0:A))+S);var G,ce,Y=e.getPixelForTick(0)-e.left,$=e.right-e.getPixelForTick(e.getTicks().length-1);D?(G=u?U*b.width+O*b.offset:O*(b.height-b.offset),ce=u?O*(y.height-y.offset):U*y.width+O*y.offset):(G=b.width/2,ce=y.width/2),e.paddingLeft=Math.max((G-Y)*e.width/(e.width-Y),0)+3,e.paddingRight=Math.max((ce-$)*e.width/(e.width-$),0)+3}else t.width=Math.min(e.maxWidth,t.width+(n.mirror?0:x.width+S+A)),e.paddingTop=b.height/2,e.paddingBottom=y.height/2}e.handleMargins(),h?(e.width=e._length=r.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=r.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){m.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(Ot(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var r,a,n,t=this;for(t.ticks=e.map(function(s){return s.value}),t.beforeTickToLabelConversion(),r=t.convertTicksToLabels(e)||t.ticks,t.afterTickToLabelConversion(),a=0,n=e.length;a<n;++a)e[a].label=r[a];return r},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=Co(e.ctx,ur(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,r,a,n;return yt(e)?(t=+this.getRightValue(e[0]),r=+this.getRightValue(e[1]),a=Math.min(t,r),n=Math.max(t,r)):(t=void 0,r=e=+this.getRightValue(e),a=e,n=e),{min:a,max:n,start:t,end:r}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:m.noop,getPixelForValue:m.noop,getValueForPixel:m.noop,getPixelForTick:function(e){var t=this,r=t.options.offset,a=t._ticks.length,n=1/Math.max(a-(r?0:1),1);return e<0||e>a-1?null:t.getPixelForDecimal(e*n+(r?n/2:0))},getPixelForDecimal:function(e){var t=this;return t._reversePixels&&(e=1-e),t._startPixel+e*t._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,r=e.max;return e.beginAtZero?0:t<0&&r<0?r:t>0&&r>0?t:0},_autoSkip:function(e){var h,g,v,b,t=this,r=t.options.ticks,a=t._length,n=r.maxTicksLimit||a/t._tickSize()+1,s=r.major.enabled?function wo(e){var r,a,t=[];for(r=0,a=e.length;r<a;r++)e[r].major&&t.push(r);return t}(e):[],d=s.length,c=s[0],u=s[d-1];if(d>n)return function pa(e,t,r){var s,d,a=0,n=t[0];for(r=Math.ceil(r),s=0;s<e.length;s++)d=e[s],s===n?(d._index=s,n=t[++a*r]):delete d.label}(e,s,d/n),cr(e);if(v=function Ao(e,t,r,a){var d,c,u,h,n=function va(e){var r,a,t=e.length;if(t<2)return!1;for(a=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==a)return!1;return a}(e),s=(t.length-1)/a;if(!n)return Math.max(s,1);for(u=0,h=(d=m.math._factorize(n)).length-1;u<h;u++)if((c=d[u])>s)return c;return Math.max(s,1)}(s,e,0,n),d>0){for(h=0,g=d-1;h<g;h++)Di(e,v,s[h],s[h+1]);return Di(e,v,m.isNullOrUndef(b=d>1?(u-c)/(d-1):null)?0:c-b,c),Di(e,v,u,m.isNullOrUndef(b)?e.length:u+b),cr(e)}return Di(e,v),cr(e)},_tickSize:function(){var e=this,t=e.options.ticks,r=m.toRadians(e.labelRotation),a=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),s=e._getLabelSizes(),d=t.autoSkipPadding||0,c=s?s.widest.width+d:0,u=s?s.highest.height+d:0;return e.isHorizontal()?u*a>c*n?c/a:u/n:u*n<c*a?u/a:c/n},_isVisible:function(){var a,n,s,e=this,t=e.chart,r=e.options.display;if("auto"!==r)return!!r;for(a=0,n=t.data.datasets.length;a<n;++a)if(t.isDatasetVisible(a)&&((s=t.getDatasetMeta(a)).xAxisID===e.id||s.yAxisID===e.id))return!0;return!1},_computeGridLineItems:function(e){var A,S,D,N,U,O,z,Y,$,G,ce,de,Z,se,qt,Wt,Cr,t=this,r=t.chart,a=t.options,n=a.gridLines,s=a.position,d=n.offsetGridLines,c=t.isHorizontal(),u=t._ticksToDraw,h=u.length+(d?1:0),g=si(n),v=[],b=n.drawBorder?Bt(n.lineWidth,0,0):0,y=b/2,x=m._alignPixel,C=function(fs){return x(r,fs,b)};for("top"===s?(A=C(t.bottom),z=t.bottom-g,$=A-y,ce=C(e.top)+y,Z=e.bottom):"bottom"===s?(A=C(t.top),ce=e.top,Z=C(e.bottom)-y,z=A+y,$=t.top+g):"left"===s?(A=C(t.right),O=t.right-g,Y=A-y,G=C(e.left)+y,de=e.right):(A=C(t.left),G=e.left,de=C(e.right)-y,O=A+y,Y=t.left+g),S=0;S<h;++S)!(Ot((D=u[S]||{}).label)&&S<u.length)&&(S===t.zeroLineIndex&&a.offset===d?(se=n.zeroLineWidth,qt=n.zeroLineColor,Wt=n.zeroLineBorderDash||[],Cr=n.zeroLineBorderDashOffset||0):(se=Bt(n.lineWidth,S,1),qt=Bt(n.color,S,"rgba(0,0,0,0.1)"),Wt=n.borderDash||[],Cr=n.borderDashOffset||0),void 0!==(N=fa(t,D._index||S,d))&&(U=x(r,N,se),c?O=Y=G=de=U:z=$=ce=Z=U,v.push({tx1:O,ty1:z,tx2:Y,ty2:$,x1:G,y1:ce,x2:de,y2:Z,width:se,color:qt,borderDash:Wt,borderDashOffset:Cr})));return v.ticksLength=h,v.borderValue=A,v},_computeLabelItems:function(){var b,y,x,C,A,S,D,N,U,O,z,Y,e=this,t=e.options,r=t.ticks,a=t.position,n=r.mirror,s=e.isHorizontal(),d=e._ticksToDraw,c=ur(r),u=r.padding,h=si(t.gridLines),g=-m.toRadians(e.labelRotation),v=[];for("top"===a?(S=e.bottom-h-u,D=g?"left":"center"):"bottom"===a?(S=e.top+h+u,D=g?"right":"center"):"left"===a?(A=e.right-(n?0:h)-u,D=n?"left":"right"):(A=e.left+(n?0:h)+u,D=n?"right":"left"),b=0,y=d.length;b<y;++b)!Ot(C=(x=d[b]).label)&&(N=e.getPixelForTick(x._index||b)+r.labelOffset,O=(U=x.major?c.major:c.minor).lineHeight,z=yt(C)?C.length:1,s?(A=N,Y="top"===a?((g?1:.5)-z)*O:(g?0:.5)*O):(S=N,Y=(1-z)*O/2),v.push({x:A,y:S,rotation:g,label:C,font:U,textOffset:Y,textAlign:D}));return v},_drawGrid:function(e){var t=this,r=t.options.gridLines;if(r.display){var u,h,g,v,b,a=t.ctx,n=t.chart,s=m._alignPixel,d=r.drawBorder?Bt(r.lineWidth,0,0):0,c=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(g=0,v=c.length;g<v;++g)h=(b=c[g]).color,(u=b.width)&&h&&(a.save(),a.lineWidth=u,a.strokeStyle=h,a.setLineDash&&(a.setLineDash(b.borderDash),a.lineDashOffset=b.borderDashOffset),a.beginPath(),r.drawTicks&&(a.moveTo(b.tx1,b.ty1),a.lineTo(b.tx2,b.ty2)),r.drawOnChartArea&&(a.moveTo(b.x1,b.y1),a.lineTo(b.x2,b.y2)),a.stroke(),a.restore());if(d){var A,S,D,N,y=d,x=Bt(r.lineWidth,c.ticksLength-1,1),C=c.borderValue;t.isHorizontal()?(A=s(n,t.left,y)-y/2,S=s(n,t.right,x)+x/2,D=N=C):(D=s(n,t.top,y)-y/2,N=s(n,t.bottom,x)+x/2,A=S=C),a.lineWidth=d,a.strokeStyle=Bt(r.color,0),a.beginPath(),a.moveTo(A,D),a.lineTo(S,N),a.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var n,s,d,c,u,h,g,v,r=e.ctx,a=e._labelItems||(e._labelItems=e._computeLabelItems());for(n=0,d=a.length;n<d;++n){if(h=(u=a[n]).font,r.save(),r.translate(u.x,u.y),r.rotate(u.rotation),r.font=h.string,r.fillStyle=h.color,r.textBaseline="middle",r.textAlign=u.textAlign,v=u.textOffset,yt(g=u.label))for(s=0,c=g.length;s<c;++s)r.fillText(""+g[s],0,v),v+=h.lineHeight;else r.fillText(g,0,v);r.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,r=e.options,a=r.scaleLabel;if(a.display){var g,v,n=rt(a.fontColor,I.global.defaultFontColor),s=m.options._parseFont(a),d=m.options.toPadding(a.padding),c=s.lineHeight/2,u=r.position,h=0;if(e.isHorizontal())g=e.left+e.width/2,v="bottom"===u?e.bottom-c-d.bottom:e.top+c+d.top;else{var b="left"===u;g=b?e.left+c+d.top:e.right-c-d.top,v=e.top+e.height/2,h=b?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(g,v),t.rotate(h),t.textAlign="center",t.textBaseline="middle",t.fillStyle=n,t.font=s.string,t.fillText(a.labelString,0,0),t.restore()}},draw:function(e){var t=this;!t._isVisible()||(t._drawGrid(e),t._drawTitle(),t._drawLabels())},_layers:function(){var e=this,t=e.options,r=t.ticks&&t.ticks.z||0,a=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&r!==a&&e.draw===e._draw?[{z:a,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:r,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:r,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,r=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter(function(a){return(!e||a.type===e)&&(r?a.xAxisID===t.id:a.yAxisID===t.id)})}});li.prototype._draw=li.prototype.draw;var Ce=li,hr=m.isNullOrUndef,fr=Ce.extend({determineDataLimits:function(){var c,e=this,t=e._getLabels(),r=e.options.ticks,a=r.min,n=r.max,s=0,d=t.length-1;void 0!==a&&(c=t.indexOf(a))>=0&&(s=c),void 0!==n&&(c=t.indexOf(n))>=0&&(d=c),e.minIndex=s,e.maxIndex=d,e.min=t[s],e.max=t[d]},buildTicks:function(){var e=this,t=e._getLabels(),r=e.minIndex,a=e.maxIndex;e.ticks=0===r&&a===t.length-1?t:t.slice(r,a+1)},getLabelForIndex:function(e,t){var r=this,a=r.chart;return a.getDatasetMeta(t).controller._getValueScaleId()===r.id?r.getRightValue(a.data.datasets[t].data[e]):r._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,r=e.ticks;Ce.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),r&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(r.length-(t?0:1),1))},getPixelForValue:function(e,t,r){var n,s,d,a=this;return!hr(t)&&!hr(r)&&(e=a.chart.data.datasets[r].data[t]),hr(e)||(n=a.isHorizontal()?e.x:e.y),(void 0!==n||void 0!==e&&isNaN(t))&&(s=a._getLabels(),e=m.valueOrDefault(n,e),t=-1!==(d=s.indexOf(e))?d:t,isNaN(t)&&(t=e)),a.getPixelForDecimal((t-a._startValue)/a._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=this,r=Math.round(t._startValue+t.getDecimalForPixel(e)*t._valueRange);return Math.min(Math.max(r,0),t.ticks.length-1)},getBasePixel:function(){return this.bottom}});fr._defaults={position:"bottom"};var xt=m.isNullOrUndef;var di=Ce.extend({getRightValue:function(e){return"string"==typeof e?+e:Ce.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,r=e.options.ticks;if(r.beginAtZero){var a=m.sign(e.min),n=m.sign(e.max);a<0&&n<0?e.max=0:a>0&&n>0&&(e.min=0)}var s=void 0!==r.min||void 0!==r.suggestedMin,d=void 0!==r.max||void 0!==r.suggestedMax;void 0!==r.min?e.min=r.min:void 0!==r.suggestedMin&&(e.min=null===e.min?r.suggestedMin:Math.min(e.min,r.suggestedMin)),void 0!==r.max?e.max=r.max:void 0!==r.suggestedMax&&(e.max=null===e.max?r.suggestedMax:Math.max(e.max,r.suggestedMax)),s!==d&&e.min>=e.max&&(s?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,r.beginAtZero||e.min--)},getTickLimit:function(){var n,e=this,t=e.options.ticks,r=t.stepSize,a=t.maxTicksLimit;return r?n=Math.ceil(e.max/r)-Math.floor(e.min/r)+1:(n=e._computeTickLimit(),a=a||11),a&&(n=Math.min(a,n)),n},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:m.noop,buildTicks:function(){var e=this,r=e.options.ticks,a=e.getTickLimit(),n={maxTicks:a=Math.max(2,a),min:r.min,max:r.max,precision:r.precision,stepSize:m.valueOrDefault(r.fixedStepSize,r.stepSize)},s=e.ticks=function ko(e,t){var y,x,C,A,r=[],n=e.stepSize,s=n||1,d=e.maxTicks-1,c=e.min,u=e.max,h=e.precision,g=t.min,v=t.max,b=m.niceNum((v-g)/d/s)*s;if(b<1e-14&&xt(c)&&xt(u))return[g,v];(A=Math.ceil(v/b)-Math.floor(g/b))>d&&(b=m.niceNum(A*b/d/s)*s),n||xt(h)?y=Math.pow(10,m._decimalPlaces(b)):(y=Math.pow(10,h),b=Math.ceil(b*y)/y),x=Math.floor(g/b)*b,C=Math.ceil(v/b)*b,n&&(!xt(c)&&m.almostWhole(c/b,b/1e3)&&(x=c),!xt(u)&&m.almostWhole(u/b,b/1e3)&&(C=u)),A=m.almostEquals(A=(C-x)/b,Math.round(A),b/1e3)?Math.round(A):Math.ceil(A),x=Math.round(x*y)/y,C=Math.round(C*y)/y,r.push(xt(c)?x:c);for(var S=1;S<A;++S)r.push(Math.round((x+S*b)*y)/y);return r.push(xt(u)?C:u),r}(n,e);e.handleDirectionalChanges(),e.max=m.max(s),e.min=m.min(s),r.reverse?(s.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),Ce.prototype.convertTicksToLabels.call(e)},_configure:function(){var n,e=this,t=e.getTicks(),r=e.min,a=e.max;Ce.prototype._configure.call(e),e.options.offset&&t.length&&(r-=n=(a-r)/Math.max(t.length-1,1)/2,a+=n),e._startValue=r,e._endValue=a,e._valueRange=a-r}}),Mo={position:"left",ticks:{callback:oi.formatters.linear}};function Fo(e,t,r,a){var g,v,n=e.options,d=function ba(e,t,r){var a=[r.type,void 0===t&&void 0===r.stack?r.index:"",r.stack].join(".");return void 0===e[a]&&(e[a]={pos:[],neg:[]}),e[a]}(t,n.stacked,r),c=d.pos,u=d.neg,h=a.length;for(g=0;g<h;++g)v=e._parseValue(a[g]),!(isNaN(v.min)||isNaN(v.max)||r.data[g].hidden)&&(c[g]=c[g]||0,u[g]=u[g]||0,n.relativePoints?c[g]=100:v.min<0||v.max<0?u[g]+=v.min:c[g]+=v.max)}function Io(e,t,r){var n,s,a=r.length;for(n=0;n<a;++n)s=e._parseValue(r[n]),!(isNaN(s.min)||isNaN(s.max)||t.data[n].hidden)&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}var _a=di.extend({determineDataLimits:function(){var u,h,g,v,e=this,t=e.options,a=e.chart.data.datasets,n=e._getMatchingVisibleMetas(),s=t.stacked,d={},c=n.length;if(e.min=Number.POSITIVE_INFINITY,e.max=Number.NEGATIVE_INFINITY,void 0===s)for(u=0;!s&&u<c;++u)s=void 0!==(h=n[u]).stack;for(u=0;u<c;++u)g=a[(h=n[u]).index].data,s?Fo(e,d,h,g):Io(e,h,g);m.each(d,function(b){v=b.pos.concat(b.neg),e.min=Math.min(e.min,m.min(v)),e.max=Math.max(e.max,m.max(v))}),e.min=m.isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=m.isFinite(e.max)&&!isNaN(e.max)?e.max:1,e.handleTickRangeOptions()},_computeTickLimit:function(){var t,e=this;return e.isHorizontal()?Math.ceil(e.width/40):(t=m.options._parseFont(e.options.ticks),Math.ceil(e.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this;return t.getPixelForDecimal((+t.getRightValue(e)-t._startValue)/t._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}});_a._defaults=Mo;var gr=m.valueOrDefault,pe=m.math.log10;var vr={position:"left",ticks:{callback:oi.formatters.logarithmic}};function Ni(e,t){return m.isFinite(e)&&e>=0?e:t}var Fi=Ce.extend({determineDataLimits:function(){var d,c,u,h,g,v,e=this,t=e.options,r=e.chart,a=r.data.datasets,n=e.isHorizontal();function s(A){return n?A.xAxisID===e.id:A.yAxisID===e.id}e.min=Number.POSITIVE_INFINITY,e.max=Number.NEGATIVE_INFINITY,e.minNotZero=Number.POSITIVE_INFINITY;var b=t.stacked;if(void 0===b)for(d=0;d<a.length;d++)if(c=r.getDatasetMeta(d),r.isDatasetVisible(d)&&s(c)&&void 0!==c.stack){b=!0;break}if(t.stacked||b){var y={};for(d=0;d<a.length;d++){var x=[(c=r.getDatasetMeta(d)).type,void 0===t.stacked&&void 0===c.stack?d:"",c.stack].join(".");if(r.isDatasetVisible(d)&&s(c))for(void 0===y[x]&&(y[x]=[]),g=0,v=(h=a[d].data).length;g<v;g++){var C=y[x];u=e._parseValue(h[g]),!(isNaN(u.min)||isNaN(u.max)||c.data[g].hidden||u.min<0||u.max<0)&&(C[g]=C[g]||0,C[g]+=u.max)}}m.each(y,function(A){if(A.length>0){var S=m.min(A),D=m.max(A);e.min=Math.min(e.min,S),e.max=Math.max(e.max,D)}})}else for(d=0;d<a.length;d++)if(c=r.getDatasetMeta(d),r.isDatasetVisible(d)&&s(c))for(g=0,v=(h=a[d].data).length;g<v;g++)u=e._parseValue(h[g]),!(isNaN(u.min)||isNaN(u.max)||c.data[g].hidden||u.min<0||u.max<0)&&(e.min=Math.min(u.min,e.min),e.max=Math.max(u.max,e.max),0!==u.min&&(e.minNotZero=Math.min(u.min,e.minNotZero)));e.min=m.isFinite(e.min)?e.min:null,e.max=m.isFinite(e.max)?e.max:null,e.minNotZero=m.isFinite(e.minNotZero)?e.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=Ni(t.min,e.min),e.max=Ni(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(pe(e.min))-1),e.max=Math.pow(10,Math.floor(pe(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(pe(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(pe(e.min))+1):10),null===e.minNotZero&&(e.minNotZero=e.min>0?e.min:e.max<1?Math.pow(10,Math.floor(pe(e.max))):1)},buildTicks:function(){var e=this,t=e.options.ticks,r=!e.isHorizontal(),a={min:Ni(t.min),max:Ni(t.max)},n=e.ticks=function Zo(e,t){var d,c,r=[],a=gr(e.min,Math.pow(10,Math.floor(pe(t.min)))),n=Math.floor(pe(t.max)),s=Math.ceil(t.max/Math.pow(10,n));0===a?(d=Math.floor(pe(t.minNotZero)),c=Math.floor(t.minNotZero/Math.pow(10,d)),r.push(a),a=c*Math.pow(10,d)):(d=Math.floor(pe(a)),c=Math.floor(a/Math.pow(10,d)));var u=d<0?Math.pow(10,Math.abs(d)):1;do{r.push(a),10==++c&&(c=1,u=++d>=0?1:u),a=Math.round(c*Math.pow(10,d)*u)/u}while(d<n||d===n&&c<s);var h=gr(e.max,a);return r.push(h),r}(a,e);e.max=m.max(n),e.min=m.min(n),t.reverse?(r=!r,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),r&&n.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Ce.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(pe(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,r=0;Ce.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),r=gr(e.options.ticks.fontSize,I.global.defaultFontSize)/e._length),e._startValue=pe(t),e._valueOffset=r,e._valueRange=(pe(e.max)-pe(t))/(1-r)},getPixelForValue:function(e){var t=this,r=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(r=(pe(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(r)},getValueForPixel:function(e){var t=this,r=t.getDecimalForPixel(e);return 0===r&&0===t.min?0:Math.pow(10,t._startValue+(r-t._valueOffset)*t._valueRange)}});Fi._defaults=vr;var Ut=m.valueOrDefault,Ii=m.valueAtIndexOrDefault,ya=m.options.resolve,xa={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:oi.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Pi(e){var t=e.ticks;return t.display&&e.display?Ut(t.fontSize,I.global.defaultFontSize)+2*t.backdropPaddingY:0}function Ca(e,t,r){return m.isArray(r)?{w:m.longestText(e,e.font,r),h:r.length*t}:{w:e.measureText(r).width,h:t}}function pr(e,t,r,a,n){return e===a||e===n?{start:t-r/2,end:t+r/2}:e<a||e>n?{start:t-r,end:t}:{start:t,end:t+r}}function Uo(e){return 0===e||180===e?"center":e<180?"left":"right"}function Eo(e,t,r,a){var s,d,n=r.y+a/2;if(m.isArray(t))for(s=0,d=t.length;s<d;++s)e.fillText(t[s],r.x,n),n+=a;else e.fillText(t,r.x,n)}function Ro(e,t,r){90===e||270===e?r.y-=t.h/2:(e>270||e<90)&&(r.y-=t.h)}function Et(e){return m.isNumber(e)?e:0}var Aa=di.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Pi(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;m.each(t.data.datasets,function(n,s){if(t.isDatasetVisible(s)){var d=t.getDatasetMeta(s);m.each(n.data,function(c,u){var h=+e.getRightValue(c);isNaN(h)||d.data[u].hidden||(r=Math.min(h,r),a=Math.max(h,a))})}}),e.min=r===Number.POSITIVE_INFINITY?0:r,e.max=a===Number.NEGATIVE_INFINITY?0:a,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Pi(this.options))},convertTicksToLabels:function(){var e=this;di.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=m.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this,t=e.options;t.display&&t.pointLabels.display?function Bo(e){var n,s,d,t=m.options._parseFont(e.options.pointLabels),r={l:0,r:e.width,t:0,b:e.height-e.paddingTop},a={};e.ctx.font=t.string,e._pointLabelSizes=[];var c=e.chart.data.labels.length;for(n=0;n<c;n++){d=e.getPointPosition(n,e.drawingArea+5),s=Ca(e.ctx,t.lineHeight,e.pointLabels[n]),e._pointLabelSizes[n]=s;var u=e.getIndexAngle(n),h=m.toDegrees(u)%360,g=pr(h,d.x,s.w,0,180),v=pr(h,d.y,s.h,90,270);g.start<r.l&&(r.l=g.start,a.l=u),g.end>r.r&&(r.r=g.end,a.r=u),v.start<r.t&&(r.t=v.start,a.t=u),v.end>r.b&&(r.b=v.end,a.b=u)}e.setReductions(e.drawingArea,r,a)}(e):e.setCenterPoint(0,0,0,0)},setReductions:function(e,t,r){var a=this,n=t.l/Math.sin(r.l),s=Math.max(t.r-a.width,0)/Math.sin(r.r),d=-t.t/Math.cos(r.t),c=-Math.max(t.b-(a.height-a.paddingTop),0)/Math.cos(r.b);n=Et(n),s=Et(s),d=Et(d),c=Et(c),a.drawingArea=Math.min(Math.floor(e-(n+s)/2),Math.floor(e-(d+c)/2)),a.setCenterPoint(n,s,d,c)},setCenterPoint:function(e,t,r,a){var n=this,c=r+n.drawingArea,u=n.height-n.paddingTop-a-n.drawingArea;n.xCenter=Math.floor((e+n.drawingArea+(n.width-t-n.drawingArea))/2+n.left),n.yCenter=Math.floor((c+u)/2+n.top+n.paddingTop)},getIndexAngle:function(e){var t=this.chart,s=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(s<0?s+360:s)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(m.isNullOrUndef(e))return NaN;var r=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*r:(e-t.min)*r},getPointPosition:function(e,t){var r=this,a=r.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(a)*t+r.xCenter,y:Math.sin(a)*t+r.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this,r=t.min,a=t.max;return t.getPointPositionForValue(e||0,t.beginAtZero?0:r<0&&a<0?a:r>0&&a>0?r:0)},_drawGrid:function(){var c,u,h,e=this,t=e.ctx,r=e.options,a=r.gridLines,n=r.angleLines,s=Ut(n.lineWidth,a.lineWidth),d=Ut(n.color,a.color);if(r.pointLabels.display&&function Lo(e){var t=e.ctx,r=e.options,a=r.pointLabels,n=Pi(r),s=e.getDistanceFromCenterForValue(r.ticks.reverse?e.min:e.max),d=m.options._parseFont(a);t.save(),t.font=d.string,t.textBaseline="middle";for(var c=e.chart.data.labels.length-1;c>=0;c--){var h=e.getPointPosition(c,s+(0===c?n/2:0)+5),g=Ii(a.fontColor,c,I.global.defaultFontColor);t.fillStyle=g;var v=e.getIndexAngle(c),b=m.toDegrees(v);t.textAlign=Uo(b),Ro(b,e._pointLabelSizes[c],h),Eo(t,e.pointLabels[c],h,d.lineHeight)}t.restore()}(e),a.display&&m.each(e.ticks,function(g,v){0!==v&&(u=e.getDistanceFromCenterForValue(e.ticksAsNumbers[v]),function Ct(e,t,r,a){var h,n=e.ctx,s=t.circular,d=e.chart.data.labels.length,c=Ii(t.color,a-1),u=Ii(t.lineWidth,a-1);if((s||d)&&c&&u){if(n.save(),n.strokeStyle=c,n.lineWidth=u,n.setLineDash&&(n.setLineDash(t.borderDash||[]),n.lineDashOffset=t.borderDashOffset||0),n.beginPath(),s)n.arc(e.xCenter,e.yCenter,r,0,2*Math.PI);else{h=e.getPointPosition(0,r),n.moveTo(h.x,h.y);for(var g=1;g<d;g++)h=e.getPointPosition(g,r),n.lineTo(h.x,h.y)}n.closePath(),n.stroke(),n.restore()}}(e,a,u,v))}),n.display&&s&&d){for(t.save(),t.lineWidth=s,t.strokeStyle=d,t.setLineDash&&(t.setLineDash(ya([n.borderDash,a.borderDash,[]])),t.lineDashOffset=ya([n.borderDashOffset,a.borderDashOffset,0])),c=e.chart.data.labels.length-1;c>=0;c--)u=e.getDistanceFromCenterForValue(r.ticks.reverse?e.min:e.max),h=e.getPointPosition(c,u),t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(h.x,h.y),t.stroke();t.restore()}},_drawLabels:function(){var e=this,t=e.ctx,a=e.options.ticks;if(a.display){var c,u,n=e.getIndexAngle(0),s=m.options._parseFont(a),d=Ut(a.fontColor,I.global.defaultFontColor);t.save(),t.font=s.string,t.translate(e.xCenter,e.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",m.each(e.ticks,function(h,g){0===g&&!a.reverse||(c=e.getDistanceFromCenterForValue(e.ticksAsNumbers[g]),a.showLabelBackdrop&&(u=t.measureText(h).width,t.fillStyle=a.backdropColor,t.fillRect(-u/2-a.backdropPaddingX,-c-s.size/2-a.backdropPaddingY,u+2*a.backdropPaddingX,s.size+2*a.backdropPaddingY)),t.fillStyle=d,t.fillText(h,0,-c))}),t.restore()}},_drawTitle:m.noop});Aa._defaults=xa;var mr=m._deprecated,wa=m.options.resolve,Wo=m.valueOrDefault,br=Number.MIN_SAFE_INTEGER||-9007199254740991,_r=Number.MAX_SAFE_INTEGER||9007199254740991,Rt={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ae=Object.keys(Rt);function Ta(e,t){return e-t}function Sa(e){return m.valueOrDefault(e.time.min,e.ticks.min)}function ka(e){return m.valueOrDefault(e.time.max,e.ticks.max)}function Lt(e,t,r,a){var n=function Da(e,t,r){for(var s,d,c,a=0,n=e.length-1;a>=0&&a<=n;){if(c=e[s=a+n>>1],!(d=e[s-1]||null))return{lo:null,hi:c};if(c[t]<r)a=s+1;else{if(!(d[t]>r))return{lo:d,hi:c};n=s-1}}return{lo:c,hi:null}}(e,t,r),s=n.lo?n.hi?n.lo:e[e.length-2]:e[0],d=n.lo?n.hi?n.hi:e[e.length-1]:e[1],c=d[t]-s[t];return s[a]+(d[a]-s[a])*(c?(r-s[t])/c:0)}function yr(e,t){var r=e._adapter,a=e.options.time,n=a.parser,s=n||a.format,d=t;return"function"==typeof n&&(d=n(d)),m.isFinite(d)||(d="string"==typeof s?r.parse(d,s):r.parse(d)),null!==d?+d:(!n&&"function"==typeof s&&(d=s(t),m.isFinite(d)||(d=r.parse(d))),d)}function At(e,t){if(m.isNullOrUndef(t))return null;var r=e.options.time,a=yr(e,e.getRightValue(t));return null===a||r.round&&(a=+e._adapter.startOf(a,r.round)),a}function Na(e,t,r,a){var s,d,n=Ae.length;for(s=Ae.indexOf(e);s<n-1;++s)if((d=Rt[Ae[s]]).common&&Math.ceil((r-t)/((d.steps?d.steps:_r)*d.size))<=a)return Ae[s];return Ae[n-1]}function Fa(e,t,r){var d,c,a=[],n={},s=t.length;for(d=0;d<s;++d)n[c=t[d]]=d,a.push({value:c,major:!1});return 0!==s&&r?function Ho(e,t,r,a){var c,u,n=e._adapter,s=+n.startOf(t[0].value,a),d=t[t.length-1].value;for(c=s;c<=d;c=+n.add(c,1,a))(u=r[c])>=0&&(t[u].major=!0);return t}(e,a,n,r):a}var Ia=Ce.extend({initialize:function(){this.mergeTicksOptions(),Ce.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,r=t.time||(t.time={}),a=e._adapter=new ni._date(t.adapters.date);return mr("time scale",r.format,"time.format","time.parser"),mr("time scale",r.min,"time.min","ticks.min"),mr("time scale",r.max,"time.max","ticks.max"),m.mergeIf(r.displayFormats,a.formats()),Ce.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),Ce.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var g,v,b,y,x,C,A,e=this,t=e.chart,r=e._adapter,a=e.options,n=a.time.unit||"day",s=_r,d=br,c=[],u=[],h=[],S=e._getLabels();for(g=0,b=S.length;g<b;++g)h.push(At(e,S[g]));for(g=0,b=(t.data.datasets||[]).length;g<b;++g)if(t.isDatasetVisible(g))if(m.isObject((x=t.data.datasets[g].data)[0]))for(u[g]=[],v=0,y=x.length;v<y;++v)C=At(e,x[v]),c.push(C),u[g][v]=C;else u[g]=h.slice(0),A||(c=c.concat(h),A=!0);else u[g]=[];h.length&&(s=Math.min(s,h[0]),d=Math.max(d,h[h.length-1])),c.length&&(c=b>1?function jo(e){var a,n,s,t={},r=[];for(a=0,n=e.length;a<n;++a)t[s=e[a]]||(t[s]=!0,r.push(s));return r}(c).sort(Ta):c.sort(Ta),s=Math.min(s,c[0]),d=Math.max(d,c[c.length-1])),s=At(e,Sa(a))||s,d=At(e,ka(a))||d,s=s===_r?+r.startOf(Date.now(),n):s,d=d===br?+r.endOf(Date.now(),n)+1:d,e.min=Math.min(s,d),e.max=Math.max(s+1,d),e._table=[],e._timestamps={data:c,datasets:u,labels:h}},buildTicks:function(){var v,b,y,e=this,t=e.min,r=e.max,a=e.options,n=a.ticks,s=a.time,d=e._timestamps,c=[],u=e.getLabelCapacity(t),h=n.source,g=a.distribution;for(d="data"===h||"auto"===h&&"series"===g?d.data:"labels"===h?d.labels:function Jo(e,t,r,a){var b,n=e._adapter,s=e.options,d=s.time,c=d.unit||Na(d.minUnit,t,r,a),u=wa([d.stepSize,d.unitStepSize,1]),h="week"===c&&d.isoWeekday,g=t,v=[];if(h&&(g=+n.startOf(g,"isoWeek",h)),g=+n.startOf(g,h?"day":c),n.diff(r,t,c)>1e5*u)throw t+" and "+r+" are too far apart with stepSize of "+u+" "+c;for(b=g;b<r;b=+n.add(b,u,c))v.push(b);return(b===r||"ticks"===s.bounds)&&v.push(b),v}(e,t,r,u),"ticks"===a.bounds&&d.length&&(t=d[0],r=d[d.length-1]),t=At(e,Sa(a))||t,r=At(e,ka(a))||r,v=0,b=d.length;v<b;++v)(y=d[v])>=t&&y<=r&&c.push(y);return e.min=t,e.max=r,e._unit=s.unit||(n.autoSkip?Na(s.minUnit,e.min,e.max,u):function Yo(e,t,r,a,n){var s,d;for(s=Ae.length-1;s>=Ae.indexOf(r);s--)if(Rt[d=Ae[s]].common&&e._adapter.diff(n,a,d)>=t-1)return d;return Ae[r?Ae.indexOf(r):0]}(e,c.length,s.minUnit,e.min,e.max)),e._majorUnit=n.major.enabled&&"year"!==e._unit?function zo(e){for(var t=Ae.indexOf(e)+1,r=Ae.length;t<r;++t)if(Rt[Ae[t]].common)return Ae[t]}(e._unit):void 0,e._table=function Ma(e,t,r,a){if("linear"===a||!e.length)return[{time:t,pos:0},{time:r,pos:1}];var d,c,u,h,g,n=[],s=[t];for(d=0,c=e.length;d<c;++d)(h=e[d])>t&&h<r&&s.push(h);for(s.push(r),d=0,c=s.length;d<c;++d)g=s[d+1],h=s[d],(void 0===(u=s[d-1])||void 0===g||Math.round((g+u)/2)!==h)&&n.push({time:h,pos:d/(c-1)});return n}(e._timestamps.data,t,r,g),e._offsets=function Vo(e,t,r,a,n){var c,u,s=0,d=0;return n.offset&&t.length&&(c=Lt(e,"time",t[0],"pos"),s=1===t.length?1-c:(Lt(e,"time",t[1],"pos")-c)/2,u=Lt(e,"time",t[t.length-1],"pos"),d=1===t.length?u:(u-Lt(e,"time",t[t.length-2],"pos"))/2),{start:s,end:d,factor:1/(s+1+d)}}(e._table,c,0,0,a),n.reverse&&c.reverse(),Fa(e,c,e._majorUnit)},getLabelForIndex:function(e,t){var r=this,a=r._adapter,n=r.chart.data,s=r.options.time,d=n.labels&&e<n.labels.length?n.labels[e]:"",c=n.datasets[t].data[e];return m.isObject(c)&&(d=r.getRightValue(c)),s.tooltipFormat?a.format(yr(r,d),s.tooltipFormat):"string"==typeof d?d:a.format(yr(r,d),s.displayFormats.datetime)},tickFormatFunction:function(e,t,r,a){var n=this,d=n.options,c=d.time.displayFormats,h=n._majorUnit,g=c[h],v=r[t],b=d.ticks,y=h&&g&&v&&v.major,x=n._adapter.format(e,a||(y?g:c[n._unit])),C=y?b.major:b.minor,A=wa([C.callback,C.userCallback,b.callback,b.userCallback]);return A?A(x,t,r):x},convertTicksToLabels:function(e){var r,a,t=[];for(r=0,a=e.length;r<a;++r)t.push(this.tickFormatFunction(e[r].value,r,e));return t},getPixelForOffset:function(e){var t=this,r=t._offsets,a=Lt(t._table,"time",e,"pos");return t.getPixelForDecimal((r.start+a)*r.factor)},getPixelForValue:function(e,t,r){var a=this,n=null;if(void 0!==t&&void 0!==r&&(n=a._timestamps.datasets[r][t]),null===n&&(n=At(a,e)),null!==n)return a.getPixelForOffset(n)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,r=t._offsets,a=t.getDecimalForPixel(e)/r.factor-r.end,n=Lt(t._table,"pos",a,"time");return t._adapter._create(n)},_getLabelSize:function(e){var t=this,r=t.options.ticks,a=t.ctx.measureText(e).width,n=m.toRadians(t.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(n),d=Math.sin(n),c=Wo(r.fontSize,I.global.defaultFontSize);return{w:a*s+c*d,h:a*d+c*s}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,r=t.options.time,a=r.displayFormats,n=a[r.unit]||a.millisecond,s=t.tickFormatFunction(e,0,Fa(t,[e],t._majorUnit),n),d=t._getLabelSize(s),c=Math.floor(t.isHorizontal()?t.width/d.w:t.height/d.h);return t.options.offset&&c--,c>0?c:1}});Ia._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var Go={category:fr,linear:_a,logarithmic:Fi,radialLinear:Aa,time:Ia},Ko={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};ni._date.override("function"==typeof F?{_id:"moment",formats:function(){return Ko},parse:function(e,t){return"string"==typeof e&&"string"==typeof t?e=F(e,t):e instanceof F||(e=F(e)),e.isValid()?e.valueOf():null},format:function(e,t){return F(e).format(t)},add:function(e,t,r){return F(e).add(t,r).valueOf()},diff:function(e,t,r){return F(e).diff(F(t),r)},startOf:function(e,t,r){return e=F(e),"isoWeek"===t?e.isoWeekday(r).valueOf():e.startOf(t).valueOf()},endOf:function(e,t){return F(e).endOf(t).valueOf()},_create:function(e){return F(e)}}:{}),I._set("global",{plugins:{filler:{propagate:!0}}});var Xo={dataset:function(e){var t=e.fill,r=e.chart,a=r.getDatasetMeta(t),s=a&&r.isDatasetVisible(t)&&a.dataset._children||[],d=s.length||0;return d?function(c,u){return u<d&&s[u]._view||null}:null},boundary:function(e){var t=e.boundary,r=t?t.x:null,a=t?t.y:null;return m.isArray(t)?function(n,s){return t[s]}:function(n){return{x:null===r?n.x:r,y:null===a?n.y:a}}}};function es(e,t,r){var s,a=e._model||{},n=a.fill;if(void 0===n&&(n=!!a.backgroundColor),!1===n||null===n)return!1;if(!0===n)return"origin";if(s=parseFloat(n,10),isFinite(s)&&Math.floor(s)===s)return("-"===n[0]||"+"===n[0])&&(s=t+s),!(s===t||s<0||s>=r)&&s;switch(n){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return n;default:return!1}}function rs(e){return(e.el._scale||{}).getPointPositionForValue?function is(e){var d,c,u,h,g,t=e.el._scale,r=t.options,a=t.chart.data.labels.length,n=e.fill,s=[];if(!a)return null;for(c=r.ticks.reverse?t.min:t.max,u=t.getPointPositionForValue(0,d=r.ticks.reverse?t.max:t.min),h=0;h<a;++h)g="start"===n||"end"===n?t.getPointPositionForValue(h,"start"===n?d:c):t.getBasePosition(h),r.gridLines.circular&&(g.cx=u.x,g.cy=u.y,g.angle=t.getIndexAngle(h)-Math.PI/2),s.push(g);return s}(e):function ts(e){var s,t=e.el._model||{},r=e.el._scale||{},a=e.fill,n=null;if(isFinite(a))return null;if("start"===a?n=void 0===t.scaleBottom?r.bottom:t.scaleBottom:"end"===a?n=void 0===t.scaleTop?r.top:t.scaleTop:void 0!==t.scaleZero?n=t.scaleZero:r.getBasePixel&&(n=r.getBasePixel()),null!=n){if(void 0!==n.x&&void 0!==n.y)return n;if(m.isFinite(n))return{x:(s=r.isHorizontal())?n:null,y:s?null:n}}return null}(e)}function as(e,t,r){var d,n=e[t].fill,s=[t];if(!r)return n;for(;!1!==n&&-1===s.indexOf(n);){if(!isFinite(n))return n;if(!(d=e[n]))return!1;if(d.visible)return n;s.push(n),n=d.fill}return!1}function ns(e){var t=e.fill,r="dataset";return!1===t?null:(isFinite(t)||(r="boundary"),Xo[r](e))}function Pa(e){return e&&!e.skip}function Za(e,t,r,a,n){var s,d,c,u;if(a&&n){for(e.moveTo(t[0].x,t[0].y),s=1;s<a;++s)m.canvas.lineTo(e,t[s-1],t[s]);if(void 0!==r[0].angle){for(d=r[0].cx,c=r[0].cy,u=Math.sqrt(Math.pow(r[0].x-d,2)+Math.pow(r[0].y-c,2)),s=n-1;s>0;--s)e.arc(d,c,u,r[s].angle,r[s-1].angle,!0);return}for(e.lineTo(r[n-1].x,r[n-1].y),s=n-1;s>0;--s)m.canvas.lineTo(e,r[s],r[s-1],!0)}}function os(e,t,r,a,n,s){var b,y,x,C,A,S,D,N,d=t.length,c=a.spanGaps,u=[],h=[],g=0,v=0;for(e.beginPath(),b=0,y=d;b<y;++b)A=r(C=t[x=b%d]._view,x,a),S=Pa(C),D=Pa(A),s&&void 0===N&&S&&(y=d+(N=b+1)),S&&D?(g=u.push(C),v=h.push(A)):g&&v&&(c?(S&&u.push(C),D&&h.push(A)):(Za(e,u,h,g,v),g=v=0,u=[],h=[]));Za(e,u,h,g,v),e.closePath(),e.fillStyle=n,e.fill()}var Oa={id:"filler",afterDatasetsUpdate:function(e,t){var s,d,c,u,r=(e.data.datasets||[]).length,a=t.propagate,n=[];for(d=0;d<r;++d)u=null,(c=(s=e.getDatasetMeta(d)).dataset)&&c._model&&c instanceof le.Line&&(u={visible:e.isDatasetVisible(d),fill:es(c,d,r),chart:e,el:c}),s.$filler=u,n.push(u);for(d=0;d<r;++d)(u=n[d])&&(u.fill=as(n,d,a),u.boundary=rs(u),u.mapper=ns(u))},beforeDatasetsDraw:function(e){var a,n,s,d,c,u,h,t=e._getSortedVisibleDatasetMetas(),r=e.ctx;for(n=t.length-1;n>=0;--n)(a=t[n].$filler)&&a.visible&&(c=(s=a.el)._children||[],h=(d=s._view).backgroundColor||I.global.defaultColor,(u=a.mapper)&&h&&c.length&&(m.canvas.clipArea(r,e.chartArea),os(r,c,u,d,h,s._loop),m.canvas.unclipArea(r)))}},ss=m.rtl.getRtlAdapter,at=m.noop,nt=m.valueOrDefault;function xr(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}I._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var r=t.datasetIndex,a=this.chart,n=a.getDatasetMeta(r);n.hidden=null===n.hidden?!a.data.datasets[r].hidden:null,a.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,r=e.options.legend||{},a=r.labels&&r.labels.usePointStyle;return e._getSortedDatasetMetas().map(function(n){var s=n.controller.getStyle(a?0:void 0);return{text:t[n.index].label,fillStyle:s.backgroundColor,hidden:!e.isDatasetVisible(n.index),lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:s.borderWidth,strokeStyle:s.borderColor,pointStyle:s.pointStyle,rotation:s.rotation,datasetIndex:n.index}},this)}}},legendCallback:function(e){var a,n,s,t=document.createElement("ul"),r=e.data.datasets;for(t.setAttribute("class",e.id+"-legend"),a=0,n=r.length;a<n;a++)(s=t.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[a].backgroundColor,r[a].label&&s.appendChild(document.createTextNode(r[a].label));return t.outerHTML}});var Ba=qe.extend({initialize:function(e){var t=this;m.extend(t,e),t.legendHitBoxes=[],t._hoveredItem=null,t.doughnutMode=!1},beforeUpdate:at,update:function(e,t,r){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=r,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:at,beforeSetDimensions:at,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:at,beforeBuildLabels:at,buildLabels:function(){var e=this,t=e.options.labels||{},r=m.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(r=r.filter(function(a){return t.filter(a,e.chart.data)})),e.options.reverse&&r.reverse(),e.legendItems=r},afterBuildLabels:at,beforeFit:at,fit:function(){var e=this,t=e.options,r=t.labels,a=t.display,n=e.ctx,s=m.options._parseFont(r),d=s.size,c=e.legendHitBoxes=[],u=e.minSize,h=e.isHorizontal();if(h?(u.width=e.maxWidth,u.height=a?10:0):(u.width=a?10:0,u.height=e.maxHeight),a){if(n.font=s.string,h){var g=e.lineWidths=[0],v=0;n.textAlign="left",n.textBaseline="middle",m.each(e.legendItems,function(D,N){var O=xr(r,d)+d/2+n.measureText(D.text).width;(0===N||g[g.length-1]+O+2*r.padding>u.width)&&(v+=d+r.padding,g[g.length-(N>0?0:1)]=0),c[N]={left:0,top:0,width:O,height:d},g[g.length-1]+=O+r.padding}),u.height+=v}else{var b=r.padding,y=e.columnWidths=[],x=e.columnHeights=[],C=r.padding,A=0,S=0;m.each(e.legendItems,function(D,N){var O=xr(r,d)+d/2+n.measureText(D.text).width;N>0&&S+d+2*b>u.height&&(C+=A+r.padding,y.push(A),x.push(S),A=0,S=0),A=Math.max(A,O),S+=d+b,c[N]={left:0,top:0,width:O,height:d}}),C+=A,y.push(A),x.push(S),u.width+=C}e.width=u.width,e.height=u.height}else e.width=u.width=e.height=u.height=0},afterFit:at,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,r=t.labels,a=I.global,n=a.defaultColor,s=a.elements.line,d=e.height,c=e.columnHeights,u=e.width,h=e.lineWidths;if(t.display){var C,g=ss(t.rtl,e.left,e.minSize.width),v=e.ctx,b=nt(r.fontColor,a.defaultFontColor),y=m.options._parseFont(r),x=y.size;v.textAlign=g.textAlign("left"),v.textBaseline="middle",v.lineWidth=.5,v.strokeStyle=b,v.fillStyle=b,v.font=y.string;var A=xr(r,x),S=e.legendHitBoxes,U=function(Y,$){switch(t.align){case"start":return r.padding;case"end":return Y-$;default:return(Y-$+r.padding)/2}},O=e.isHorizontal();C=O?{x:e.left+U(u,h[0]),y:e.top+r.padding,line:0}:{x:e.left+r.padding,y:e.top+U(d,c[0]),line:0},m.rtl.overrideTextDirection(e.ctx,t.textDirection);var z=x+r.padding;m.each(e.legendItems,function(Y,$){var G=v.measureText(Y.text).width,ce=A+x/2+G,de=C.x,Z=C.y;g.setWidth(e.minSize.width),O?$>0&&de+ce+r.padding>e.left+e.minSize.width&&(Z=C.y+=z,C.line++,de=C.x=e.left+U(u,h[C.line])):$>0&&Z+z>e.top+e.minSize.height&&(de=C.x=de+e.columnWidths[C.line]+r.padding,C.line++,Z=C.y=e.top+U(d,c[C.line]));var se=g.x(de);(function(Y,$,G){if(!(isNaN(A)||A<=0)){v.save();var ce=nt(G.lineWidth,s.borderWidth);if(v.fillStyle=nt(G.fillStyle,n),v.lineCap=nt(G.lineCap,s.borderCapStyle),v.lineDashOffset=nt(G.lineDashOffset,s.borderDashOffset),v.lineJoin=nt(G.lineJoin,s.borderJoinStyle),v.lineWidth=ce,v.strokeStyle=nt(G.strokeStyle,n),v.setLineDash&&v.setLineDash(nt(G.lineDash,s.borderDash)),r&&r.usePointStyle){var de=A*Math.SQRT2/2,Z=g.xPlus(Y,A/2);m.canvas.drawPoint(v,G.pointStyle,de,Z,$+x/2,G.rotation)}else v.fillRect(g.leftForLtr(Y,A),$,A,x),0!==ce&&v.strokeRect(g.leftForLtr(Y,A),$,A,x);v.restore()}})(se,Z,Y),S[$].left=g.leftForLtr(se,S[$].width),S[$].top=Z,function(Y,$,G,ce){var de=x/2,Z=g.xPlus(Y,A+de),se=$+de;v.fillText(G.text,Z,se),G.hidden&&(v.beginPath(),v.lineWidth=2,v.moveTo(Z,se),v.lineTo(g.xPlus(Z,ce),se),v.stroke())}(se,Z,Y,G),O?C.x+=ce+r.padding:C.y+=z}),m.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var a,n,s,r=this;if(e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom)for(s=r.legendHitBoxes,a=0;a<s.length;++a)if(e>=(n=s[a]).left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height)return r.legendItems[a];return null},handleEvent:function(e){var n,t=this,r=t.options,a="mouseup"===e.type?"click":e.type;if("mousemove"===a){if(!r.onHover&&!r.onLeave)return}else{if("click"!==a)return;if(!r.onClick)return}n=t._getLegendItemAt(e.x,e.y),"click"===a?n&&r.onClick&&r.onClick.call(t,e.native,n):(r.onLeave&&n!==t._hoveredItem&&(t._hoveredItem&&r.onLeave.call(t,e.native,t._hoveredItem),t._hoveredItem=n),r.onHover&&n&&r.onHover.call(t,e.native,n))}});function Ua(e,t){var r=new Ba({ctx:e.ctx,options:t,chart:e});Pe.configure(e,r,t),Pe.addBox(e,r),e.legend=r}var ls={id:"legend",_element:Ba,beforeInit:function(e){var t=e.options.legend;t&&Ua(e,t)},beforeUpdate:function(e){var t=e.options.legend,r=e.legend;t?(m.mergeIf(t,I.global.legend),r?(Pe.configure(e,r,t),r.options=t):Ua(e,t)):r&&(Pe.removeBox(e,r),delete e.legend)},afterEvent:function(e,t){var r=e.legend;r&&r.handleEvent(t)}},Ve=m.noop;I._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Ea=qe.extend({initialize:function(e){m.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:Ve,update:function(e,t,r){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=r,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:Ve,beforeSetDimensions:Ve,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Ve,beforeBuildLabels:Ve,buildLabels:Ve,afterBuildLabels:Ve,beforeFit:Ve,fit:function(){var s,e=this,t=e.options,r=e.minSize={},a=e.isHorizontal();t.display?(s=(m.isArray(t.text)?t.text.length:1)*m.options._parseFont(t).lineHeight+2*t.padding,e.width=r.width=a?e.maxWidth:s,e.height=r.height=a?s:e.maxHeight):e.width=r.width=e.height=r.height=0},afterFit:Ve,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,r=e.options;if(r.display){var v,b,y,a=m.options._parseFont(r),n=a.lineHeight,s=n/2+r.padding,d=0,c=e.top,u=e.left,h=e.bottom,g=e.right;t.fillStyle=m.valueOrDefault(r.fontColor,I.global.defaultFontColor),t.font=a.string,e.isHorizontal()?(b=u+(g-u)/2,y=c+s,v=g-u):(b="left"===r.position?u+s:g-s,y=c+(h-c)/2,v=h-c,d=Math.PI*("left"===r.position?-.5:.5)),t.save(),t.translate(b,y),t.rotate(d),t.textAlign="center",t.textBaseline="middle";var x=r.text;if(m.isArray(x))for(var C=0,A=0;A<x.length;++A)t.fillText(x[A],0,C,v),C+=n;else t.fillText(x,0,0,v);t.restore()}}});function Ra(e,t){var r=new Ea({ctx:e.ctx,options:t,chart:e});Pe.configure(e,r,t),Pe.addBox(e,r),e.titleBlock=r}var ot={},us=Oa,La=ls,cs={id:"title",_element:Ea,beforeInit:function(e){var t=e.options.title;t&&Ra(e,t)},beforeUpdate:function(e){var t=e.options.title,r=e.titleBlock;t?(m.mergeIf(t,I.global.title),r?(Pe.configure(e,r,t),r.options=t):Ra(e,t)):r&&(Pe.removeBox(e,r),delete e.titleBlock)}};for(var qa in ot.filler=us,ot.legend=La,ot.title=cs,E.helpers=m,function(){function e(a,n,s){var d;return"string"==typeof a?(d=parseInt(a,10),-1!==a.indexOf("%")&&(d=d/100*n.parentNode[s])):d=a,d}function t(a){return null!=a&&"none"!==a}function r(a,n,s){var d=document.defaultView,c=m._getParentNode(a),u=d.getComputedStyle(a)[n],h=d.getComputedStyle(c)[n],g=t(u),v=t(h),b=Number.POSITIVE_INFINITY;return g||v?Math.min(g?e(u,a,s):b,v?e(h,c,s):b):"none"}m.where=function(a,n){if(m.isArray(a)&&Array.prototype.filter)return a.filter(n);var s=[];return m.each(a,function(d){n(d)&&s.push(d)}),s},m.findIndex=Array.prototype.findIndex?function(a,n,s){return a.findIndex(n,s)}:function(a,n,s){s=void 0===s?a:s;for(var d=0,c=a.length;d<c;++d)if(n.call(s,a[d],d,a))return d;return-1},m.findNextWhere=function(a,n,s){m.isNullOrUndef(s)&&(s=-1);for(var d=s+1;d<a.length;d++){var c=a[d];if(n(c))return c}},m.findPreviousWhere=function(a,n,s){m.isNullOrUndef(s)&&(s=a.length);for(var d=s-1;d>=0;d--){var c=a[d];if(n(c))return c}},m.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},m.almostEquals=function(a,n,s){return Math.abs(a-n)<s},m.almostWhole=function(a,n){var s=Math.round(a);return s-n<=a&&s+n>=a},m.max=function(a){return a.reduce(function(n,s){return isNaN(s)?n:Math.max(n,s)},Number.NEGATIVE_INFINITY)},m.min=function(a){return a.reduce(function(n,s){return isNaN(s)?n:Math.min(n,s)},Number.POSITIVE_INFINITY)},m.sign=Math.sign?function(a){return Math.sign(a)}:function(a){return 0==(a=+a)||isNaN(a)?a:a>0?1:-1},m.toRadians=function(a){return a*(Math.PI/180)},m.toDegrees=function(a){return a*(180/Math.PI)},m._decimalPlaces=function(a){if(m.isFinite(a)){for(var n=1,s=0;Math.round(a*n)/n!==a;)n*=10,s++;return s}},m.getAngleFromPoint=function(a,n){var s=n.x-a.x,d=n.y-a.y,c=Math.sqrt(s*s+d*d),u=Math.atan2(d,s);return u<-.5*Math.PI&&(u+=2*Math.PI),{angle:u,distance:c}},m.distanceBetweenPoints=function(a,n){return Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2))},m.aliasPixel=function(a){return a%2==0?0:.5},m._alignPixel=function(a,n,s){var d=a.currentDevicePixelRatio,c=s/2;return Math.round((n-c)*d)/d+c},m.splineCurve=function(a,n,s,d){var c=a.skip?n:a,u=n,h=s.skip?n:s,g=Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)),v=Math.sqrt(Math.pow(h.x-u.x,2)+Math.pow(h.y-u.y,2)),b=g/(g+v),y=v/(g+v),x=d*(b=isNaN(b)?0:b),C=d*(y=isNaN(y)?0:y);return{previous:{x:u.x-x*(h.x-c.x),y:u.y-x*(h.y-c.y)},next:{x:u.x+C*(h.x-c.x),y:u.y+C*(h.y-c.y)}}},m.EPSILON=Number.EPSILON||1e-14,m.splineCurveMonotone=function(a){var d,c,u,h,v,b,y,x,C,n=(a||[]).map(function(A){return{model:A._model,deltaK:0,mK:0}}),s=n.length;for(d=0;d<s;++d)if(!(u=n[d]).model.skip){if(c=d>0?n[d-1]:null,(h=d<s-1?n[d+1]:null)&&!h.model.skip){var g=h.model.x-u.model.x;u.deltaK=0!==g?(h.model.y-u.model.y)/g:0}u.mK=!c||c.model.skip?u.deltaK:!h||h.model.skip?c.deltaK:this.sign(c.deltaK)!==this.sign(u.deltaK)?0:(c.deltaK+u.deltaK)/2}for(d=0;d<s-1;++d)if(h=n[d+1],!(u=n[d]).model.skip&&!h.model.skip){if(m.almostEquals(u.deltaK,0,this.EPSILON)){u.mK=h.mK=0;continue}v=u.mK/u.deltaK,b=h.mK/u.deltaK,!((x=Math.pow(v,2)+Math.pow(b,2))<=9)&&(y=3/Math.sqrt(x),u.mK=v*y*u.deltaK,h.mK=b*y*u.deltaK)}for(d=0;d<s;++d)!(u=n[d]).model.skip&&(h=d<s-1?n[d+1]:null,(c=d>0?n[d-1]:null)&&!c.model.skip&&(u.model.controlPointPreviousX=u.model.x-(C=(u.model.x-c.model.x)/3),u.model.controlPointPreviousY=u.model.y-C*u.mK),h&&!h.model.skip&&(u.model.controlPointNextX=u.model.x+(C=(h.model.x-u.model.x)/3),u.model.controlPointNextY=u.model.y+C*u.mK))},m.nextItem=function(a,n,s){return s?n>=a.length-1?a[0]:a[n+1]:n>=a.length-1?a[a.length-1]:a[n+1]},m.previousItem=function(a,n,s){return s?n<=0?a[a.length-1]:a[n-1]:n<=0?a[0]:a[n-1]},m.niceNum=function(a,n){var s=Math.floor(m.log10(a)),d=a/Math.pow(10,s);return(n?d<1.5?1:d<3?2:d<7?5:10:d<=1?1:d<=2?2:d<=5?5:10)*Math.pow(10,s)},m.requestAnimFrame="undefined"==typeof window?function(a){a()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},m.getRelativePosition=function(a,n){var s,d,c=a.originalEvent||a,u=a.target||a.srcElement,h=u.getBoundingClientRect(),g=c.touches;g&&g.length>0?(s=g[0].clientX,d=g[0].clientY):(s=c.clientX,d=c.clientY);var v=parseFloat(m.getStyle(u,"padding-left")),b=parseFloat(m.getStyle(u,"padding-top")),y=parseFloat(m.getStyle(u,"padding-right")),x=parseFloat(m.getStyle(u,"padding-bottom")),A=h.bottom-h.top-b-x;return{x:s=Math.round((s-h.left-v)/(h.right-h.left-v-y)*u.width/n.currentDevicePixelRatio),y:d=Math.round((d-h.top-b)/A*u.height/n.currentDevicePixelRatio)}},m.getConstraintWidth=function(a){return r(a,"max-width","clientWidth")},m.getConstraintHeight=function(a){return r(a,"max-height","clientHeight")},m._calculatePadding=function(a,n,s){return(n=m.getStyle(a,n)).indexOf("%")>-1?s*parseInt(n,10)/100:parseInt(n,10)},m._getParentNode=function(a){var n=a.parentNode;return n&&"[object ShadowRoot]"===n.toString()&&(n=n.host),n},m.getMaximumWidth=function(a){var n=m._getParentNode(a);if(!n)return a.clientWidth;var s=n.clientWidth,u=s-m._calculatePadding(n,"padding-left",s)-m._calculatePadding(n,"padding-right",s),h=m.getConstraintWidth(a);return isNaN(h)?u:Math.min(u,h)},m.getMaximumHeight=function(a){var n=m._getParentNode(a);if(!n)return a.clientHeight;var s=n.clientHeight,u=s-m._calculatePadding(n,"padding-top",s)-m._calculatePadding(n,"padding-bottom",s),h=m.getConstraintHeight(a);return isNaN(h)?u:Math.min(u,h)},m.getStyle=function(a,n){return a.currentStyle?a.currentStyle[n]:document.defaultView.getComputedStyle(a,null).getPropertyValue(n)},m.retinaScale=function(a,n){var s=a.currentDevicePixelRatio=n||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==s){var d=a.canvas,c=a.height,u=a.width;d.height=c*s,d.width=u*s,a.ctx.scale(s,s),!d.style.height&&!d.style.width&&(d.style.height=c+"px",d.style.width=u+"px")}},m.fontString=function(a,n,s){return n+" "+a+"px "+s},m.longestText=function(a,n,s,d){var c=(d=d||{}).data=d.data||{},u=d.garbageCollect=d.garbageCollect||[];d.font!==n&&(c=d.data={},u=d.garbageCollect=[],d.font=n),a.font=n;var v,b,y,x,C,h=0,g=s.length;for(v=0;v<g;v++)if(null!=(x=s[v])&&!0!==m.isArray(x))h=m.measureText(a,c,u,h,x);else if(m.isArray(x))for(b=0,y=x.length;b<y;b++)null!=(C=x[b])&&!m.isArray(C)&&(h=m.measureText(a,c,u,h,C));var A=u.length/2;if(A>s.length){for(v=0;v<A;v++)delete c[u[v]];u.splice(0,A)}return h},m.measureText=function(a,n,s,d,c){var u=n[c];return u||(u=n[c]=a.measureText(c).width,s.push(c)),u>d&&(d=u),d},m.numberOfLabelLines=function(a){var n=1;return m.each(a,function(s){m.isArray(s)&&s.length>n&&(n=s.length)}),n},m.color=tt?function(a){return a instanceof CanvasGradient&&(a=I.global.defaultColor),tt(a)}:function(a){return console.error("Color.js not found!"),a},m.getHoverColor=function(a){return a instanceof CanvasPattern||a instanceof CanvasGradient?a:m.color(a).saturate(.5).darken(.1).rgbString()}}(),E._adapters=ni,E.Animation=Yi,E.animationService=zi,E.controllers=Qr,E.DatasetController=Ie,E.defaults=I,E.Element=qe,E.elements=le,E.Interaction=Zt,E.layouts=Pe,E.platform=Ue,E.plugins=Q,E.Scale=Ce,E.scaleService=ai,E.Ticks=oi,E.Tooltip=or,E.helpers.each(Go,function(e,t){E.scaleService.registerScaleType(t,e,e._defaults)}),ot)ot.hasOwnProperty(qa)&&E.plugins.register(ot[qa]);E.platform.initialize();var hs=E;return"undefined"!=typeof window&&(window.Chart=E),E.Chart=E,E.Legend=ot.legend._element,E.Title=ot.title._element,E.pluginService=E.plugins,E.PluginBase=E.Element.extend({}),E.canvasHelpers=E.helpers.canvas,E.layoutService=E.layouts,E.LinearScaleBase=di,E.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){E[e]=function(t,r){return new E(t,E.helpers.merge(r||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),hs}(function(){try{return J(5439)}catch(ne){}}())}}]);