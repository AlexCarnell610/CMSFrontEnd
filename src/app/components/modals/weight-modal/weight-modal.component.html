<ngx-smart-modal #weightModal identifier="weightModal">
  <div *ngIf="animal">
    <h4 class="text-center">
      {{ isAddMode ? "Add" : "Edit" }} Weight for
      <strong>{{ animal.tagNumber }}</strong>
    </h4>
    <div class="cms-form">
      <form [formGroup]="editWeightForm" class="mb-3 mt-2">
        <div
          *ngIf="!isAddMode"
          class="input-group mb-3 mt-3"
          [ngClass]="{ 'was-validated': weightSelect.dirty }"
        >
          <select
            formControlName="weightSelect"
            class="custom-select"
            id="weightSelect"
            required
          >
            <option value="">Select weight to edit</option>
            <option
              *ngFor="let weight of animal.weightData"
              value="{{ weight.id }}"
            >
              {{ weight.weightDate.toDate() | date: "dd/MM/yyyy" }} -
              {{ weight.weight }} Kg
            </option>
          </select>
          <div class="invalid-feedback">
            <cms-form-errors
              [errors]="weightSelect.errors"
              [isRadio]="true"
            ></cms-form-errors>
          </div>
        </div>

        <div class="form-group">
          <label for="newWeight">Enter new weight</label>
          <div class="input-group" [ngClass]="getCSSForWeight()">
            <input
              formControlName="weight"
              class="form-control"
              type="number"
              step="1"
              name="weight"
              required
              min="10"
              max="1000"
            />
            <div class="input-group-append">
              <span class="input-group-text">Kg</span>
            </div>
          </div>
          <div class="invalid-feedback">
            <cms-form-errors [errors]="weight.errors"></cms-form-errors>
          </div>
        </div>

        <div class="form-group">
          <label for="newDate">Enter new date</label>
          <input
            formControlName="date"
            class="form-control"
            type="date"
            name="date"
            id="newDate"
            [ngClass]="getCSSClassForDate()"
          />
          <div class="invalid-feedback">
            <cms-form-errors [errors]="date.errors"></cms-form-errors>
          </div>
        </div>
        <div class="form-check">
          <input
            formControlName="weightType"
            value="isSale"
            type="radio"
            name="weightType"
            class="form-check-input"
            id="isSaleRadio"
            [ngClass]="getCSSForRadio()"
          />
          <label for="isSaleRadio" class="form-check-label"
            >&nbsp; Is sale weight?</label
          >
        </div>
        <div class="form-check">
          <input
            formControlName="weightType"
            value="isIntermediate"
            type="radio"
            name="weightType"
            class="form-check-input"
            id="isIntermediate"
            [ngClass]="getCSSForRadio()"
          />
          <label for="isIntermediate" class="form-check-label">
            &nbsp; Is intermediate weight?</label
          >
        </div>
        <div class="form-check mb-3">
          <input
            formControlName="weightType"
            value="isInitial"
            type="radio"
            name="weightType"
            class="form-check-input"
            id="isInitialRadio"
            [ngClass]="getCSSForRadio()"
          />
          <label for="isInitialRadio" class="form-check-label">
            &nbsp; Is initial weight?</label
          >
          <div class="invalid-feedback">
            <cms-form-errors
              [errors]="weightType.errors"
              [isRadio]="true"
            ></cms-form-errors>
          </div>
        </div>

        <button
          class="btn btn-success mr-3"
          (click)="saveChanges()"
          ngbPopover="Update Success!"
          #p="ngbPopover"
          placement="bottom"
          popoverClass="update-success"
          triggers="manual"
        >
          Save Changes
        </button>
        <button type="button" class="btn btn-danger" (click)="closeModal()">
          Close
        </button>
      </form>
    </div>
  </div>
</ngx-smart-modal>
