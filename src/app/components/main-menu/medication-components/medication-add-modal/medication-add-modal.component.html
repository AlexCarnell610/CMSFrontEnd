<ngx-smart-modal [identifier]="modalIdentifier" #medicationAddModal>
  <h4 class="text-center">{{ isEdit ? "Edit" : "Add new" }} medication</h4>
  <form [formGroup]="medicationForm" class="mb-2">
    <div
      class="form-group"
      [ngClass]="{ 'was-validated': medicationNameControl.dirty }"
    >
      <label for="medicationName"> Medication Name </label>
      <input
        type="text"
        name="medicationName"
        id="medicationName"
        class="form-control"
        formControlName="medicationName"
        required
      />
      <div class="invalid-feedback">
        <cms-form-errors
          [errors]="medicationNameControl.errors"
        ></cms-form-errors>
      </div>
    </div>
    <div
      class="form-group"
      [ngClass]="{ 'was-validated': withdrawalPeriodControl.dirty }"
    >
      <label for="withdrawalPeriod"> Withdrawal Period</label>
      <input
        type="number"
        name="withdrawalPeriod"
        id="withdrawalPeriod"
        class="form-control"
        formControlName="withdrawalPeriod"
        required
      />
      <div class="invalid-feedback">
        <cms-form-errors
          [errors]="withdrawalPeriodControl.errors"
        ></cms-form-errors>
      </div>
    </div>
    <div
      class="form-group"
      [ngClass]="{ 'was-validated': expiryDateControl.dirty }"
    >
      <label for="expiryDate"> Expiry Date </label>
      <input
        type="date"
        name="expiryDate"
        id="expiryDate"
        class="form-control"
        formControlName="expiryDate"
        required
      />
      <div class="invalid-feedback">
        <cms-form-errors [errors]="expiryDateControl.errors"></cms-form-errors>
      </div>
    </div>
    <div
      class="form-group"
      [ngClass]="{ 'was-validated': batchNumberControl.dirty }"
    >
      <label for="batchNumber"> Batch Number </label>
      <input
        type="text"
        name="batchNumber"
        id="batchNumber"
        class="form-control"
        formControlName="batchNumber"
        required
      />
      <div class="invalid-feedback">
        <cms-form-errors [errors]="batchNumberControl.errors"></cms-form-errors>
      </div>
    </div>
    <div class="mt-2">
      <button
        class="btn btn-success me-2"
        type="button"
        id="save-button"
        ngbPopover="Medication Saved!"
        #saveConfirm="ngbPopover"
        placement="bottom"
        popoverClass="update-success"
        triggers="manual"
        (click)="save()"
      >
        Save
      </button>
      <button class="btn btn-secondary me-2" (click)="clear()">Clear</button>
      <button class="btn btn-danger me-2" (click)="close()">Close</button>
      <button class="btn btn-info" (click)="toggleCamera()">
        Toggle Camera
      </button>
    </div>
  </form>
  <!-- <div id="scanner-div"> -->
  <div class="" style="height: 20vh; position: relative">
    <svg width="100%" height="100%" viewBox="0 0 10 10">
      <line class="point" x1="0" x2="10" y1="5" y2="5" />
      <line class="point" x1="5" x2="5" y1="1" y2="9" />
    </svg>
    <zxing-scanner
      *ngIf="showScanner"
      #scanner
      [tryHarder]="true"
      (scanSuccess)="codeFound($event)"
      (scanComplete)="scanned($event)"
      [formats]="allowedFormats"
      [autostart]="false"
    ></zxing-scanner>
    <!-- </div> -->
  </div>
</ngx-smart-modal>
